<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="https://www.w3.org/2005/Atom">
  <title>GWAN IT Blog</title>
  
  <subtitle>GWAN IT Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://gwanhyeon.github.io/"/>
  <updated>2021-03-21T08:24:14.257Z</updated>
  <id>http://gwanhyeon.github.io/</id>
  
  <author>
    <name>gwanhyeon Kim</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>프로그래머스 쿼드 압축후 개수 세기</title>
    <link href="http://gwanhyeon.github.io/Programmers-20210321-programmers-%EC%BF%BC%EB%93%9C%EC%95%95%EC%B6%95%ED%9B%84%EA%B0%9C%EC%88%98%EC%84%B8%EA%B8%B0/"/>
    <id>http://gwanhyeon.github.io/Programmers-20210321-programmers-%EC%BF%BC%EB%93%9C%EC%95%95%EC%B6%95%ED%9B%84%EA%B0%9C%EC%88%98%EC%84%B8%EA%B8%B0/</id>
    <published>2021-03-21T06:01:08.000Z</published>
    <updated>2021-03-21T08:24:14.257Z</updated>
    
    <content type="html"><![CDATA[<h1 id="kweodeuabcug-hu-gaesu-segi"><a href="#kweodeuabcug-hu-gaesu-segi" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#쿼드압축-후-개수-세기"></a> <a href="https://programmers.co.kr/learn/courses/30/lessons/68936" target="_blank" rel="noopener">쿼드압축 후 개수 세기</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>가장왼쪽위의 좌표를 기준으로 현재 탐색하고자 하는 정사각형의 한변의 길이를 통해서 탐색합니다. 가장 왼쪽지점을 기준으로 처리합니다. 분할 후도 같게 생각합니다.</li><li>3가지 경우의수: 특정 범위가 모두 '0’인 경우, 특정 범위가 모두 ‘1’ 인경우, 그게 아닌경우를 찾아냅니다.<br>이것들을 DFS로 처리하여 (x,y),(x+size,y), (x,y+size),(x+size,y+size) 총 네가지경우로 나누어서 생각을 합니다.</li><li>값을 절반씩 나누어가면서 처리하면서 진행합니다.</li></ol><p>1 0 0 0<br>0 1 0 0<br>1 1 1 0<br>1 1 0 0</p><p>테스트케이스로 다음과 같이 주어졌다고 가정하겠습니다.</p><p>1번 사각형 왼쪽 상단: (x , y) , SIZE / 2<br>2번 사각형 오른쪽 상단: (x , y + SIZE / 2) , SIZE / 2<br>3번 사각형 왼쪽 하단: (x + K / 2 , y) , SIZE / 2<br>4번 사각형 오른쪽 하단: (x + K / 2 , y + SIZE / 2) , SIZE / 2<br>의 경우로 나타낼 수 있습니다.</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 가장왼쪽위의 좌표를 기준으로 현재 탐색하고자 하는 정사각형의 한변의 길이를 통해서 탐색</span></span><br><span class="line"><span class="comment">// 3가지 경우의수: 특정 범위가 모두 '0'인 경우, 특정 범위가 모두 '1' 인경우, 그게 아닌경우</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> 쿼드압축후개수세기 </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[] answer;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[][] arr) &#123;</span><br><span class="line">        answer = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        dfs(<span class="number">0</span>,<span class="number">0</span>,arr.length,arr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : answer) &#123;</span><br><span class="line">            System.out.println(<span class="string">"i = "</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 현재 범위의 가장 왼쪽 위의 좌표, 현재 범위의 정사각형의 한 변의 길이</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> squareSize, <span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> isOneCheck = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">boolean</span> isZeroCheck = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=x; i&lt;x+squareSize; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=y; j&lt;y+squareSize; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i][j] == <span class="number">0</span>) isOneCheck = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">if</span>(arr[i][j] == <span class="number">1</span>) isZeroCheck = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(isZeroCheck)&#123;</span><br><span class="line">            answer[<span class="number">0</span>]++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(isOneCheck)&#123;</span><br><span class="line">            answer[<span class="number">1</span>]++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(x,y,squareSize/<span class="number">2</span>, arr);</span><br><span class="line">        dfs(x,y+squareSize/<span class="number">2</span>,squareSize/<span class="number">2</span>, arr);</span><br><span class="line">        dfs(x+squareSize/<span class="number">2</span>,y,squareSize/<span class="number">2</span>, arr);</span><br><span class="line">        dfs(x+squareSize/<span class="number">2</span>,y+squareSize/<span class="number">2</span>,squareSize/<span class="number">2</span>, arr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;kweodeuabcug-hu-gaesu-segi&quot;&gt;&lt;a href=&quot;#kweodeuabcug-hu-gaesu-segi&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#쿼
      
    
    </summary>
    
    
      <category term="Programmers" scheme="http://gwanhyeon.github.io/categories/programmers/"/>
    
    
      <category term="쿼드압축" scheme="http://gwanhyeon.github.io/tags/%EC%BF%BC%EB%93%9C%EC%95%95%EC%B6%95/"/>
    
  </entry>
  
  <entry>
    <title>CleanCode 01 깨끗한코드</title>
    <link href="http://gwanhyeon.github.io/CleanCode-20210319-chapter01-%EA%B9%A8%EB%81%97%ED%95%9C%EC%BD%94%EB%93%9C/"/>
    <id>http://gwanhyeon.github.io/CleanCode-20210319-chapter01-%EA%B9%A8%EB%81%97%ED%95%9C%EC%BD%94%EB%93%9C/</id>
    <published>2021-03-19T11:21:25.000Z</published>
    <updated>2021-03-19T17:31:25.455Z</updated>
    
    <content type="html"><![CDATA[<h1 id="kodeuga-jonjaeharira"><a href="#kodeuga-jonjaeharira" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#코드가-존재하리라"></a> 코드가 존재하리라</h1><p>코드는 요구사항을 표현하는 언어라는 사실을 알아야하고 요구사항에 더욱 가까운 언어를 만들수도 있고, 요구사항에서 정형 구조를 뽑아내는 도구를 만들 수도 있다. 하지만 어느순간에는 정밀한 표현이 필요하다.</p><h1 id="nabbeun-kodeu"><a href="#nabbeun-kodeu" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#나쁜-코드"></a> 나쁜 코드</h1><p>좋은 코드의 중요성은 오랫동안 나쁜 코드에 시달려왔다. 출시에 바빠 코드를 마구짜지 말아야 한다. <code>회사가 망하는 지름길은 나쁜코드이다.</code></p><p>여러가지 바쁘다는 핑계, 상사에 치여서 나쁜코드를 작성하는 경우가 많다. 나중에 돌아와 이것을 다시 손보겠다는 망상을 하는데 <code>나중은 결코 오지 않는다.</code></p><h1 id="nabbeun-kodeuga-cireuneun-daega"><a href="#nabbeun-kodeuga-cireuneun-daega" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#나쁜-코드가-치르는-대가"></a> 나쁜 코드가 치르는 대가</h1><p>나쁜코드는 개발 속도를 크게 떨어뜨린다. 나쁜 코드가 쌓일수록 팀 생산성을 떨어진다. 그러다가 마침내 0에 근접한다.</p><h2 id="weondaehan-jaeseolgyeyi-ggum"><a href="#weondaehan-jaeseolgyeyi-ggum" class="header-anchor">3.1. </a><a class="markdownIt-Anchor" href="#원대한-재설계의-꿈"></a> 원대한 재설계의 꿈</h2><p>팀이 반기를 들고 관리층에게 설계를 요구하는데 생산성이 바닥이라는 사실을 부인하지 않는다. 기존 시스템을 따라잡을 즈음이면 새로운 팀원들이 새 시스템을 설계하자고하며 현재 시스템을 다시 갈아엎기를 요구한다. <code>깨끗한 코드는 비용을 절감하는 것 뿐만 아니라 전문가로 살아남는 길이라는 사실을 인정하리라.</code></p><h2 id="taedo"><a href="#taedo" class="header-anchor">3.2. </a><a class="markdownIt-Anchor" href="#태도"></a> 태도</h2><p>코드가 정말 엉망이라 업무가 배로 들어날 수 있는 상황이 있다. 일정이 촉박해 제대로 할 시간이 없다면서 한탄을 시작하며 전문가 답지 못한 모습을 보일때가 있다.</p><p>일정이 촉박하다는것은 전문가 답지못한 행동이다. 프로젝트의 실패는 우리에게도 커다란 책임이 있고 특히 나쁜 코드가 초래하는 실패에는 더더욱 책임감이 크다.</p><p>나쁜 코드의 위험을 이해하지 못하는 관리자 말을 그대로 따르는 행동은 전문가 답지 못하다.</p><h2 id="weoncojeog-nanje"><a href="#weoncojeog-nanje" class="header-anchor">3.3. </a><a class="markdownIt-Anchor" href="#원초적-난제"></a> 원초적 난제</h2><p>누구나 나쁜코드가 업무속도를 늦춘다는 사실을 익히 안다. 모든 프로그래머가 기한을 맞추려면 나쁜 코드를 양산하면 기한을 맞추지못한다. 기한을 맞추는 유일한 방법은 언제나 코드를 깨끗하게 유지하는 습관이다</p><h2 id="ggaeggeushan-kodeuraneun-yesul"><a href="#ggaeggeushan-kodeuraneun-yesul" class="header-anchor">3.4. </a><a class="markdownIt-Anchor" href="#깨끗한-코드라는-예술"></a> 깨끗한 코드라는 예술?</h2><p>나쁜 코드가 심각한 장애물이라는 사실을 납득했다고 가정하면 깨끗한 코드를 어떻게 작성할까?</p><p>깨끗한 코드를 구현하는 행위는 그림을 그리는 행위와 비슷하다. 깨끗한 코드와 나쁜코드를 구분 할 줄 안다고 깨끗한 코드를 작성할줄 아는 뜻은 아니다.</p><p>열쇠는 '코드 감각’이다. '코드감각’이 있으면 좋은 코드와 나쁜 코드를 구분한다. 그뿐만 아니라, 절제와 규울을 적용해 나쁜 코드를 좋은 코드로 바꾸는 전략도 파악한다.<br>깨끗한 코드를 작성하는 프로그래머는 빈 캔퍼스를 우아한 작품으로 바꿔가는 화가와 같다.</p><h2 id="ggaeggeushan-kodeuran"><a href="#ggaeggeushan-kodeuran" class="header-anchor">3.5. </a><a class="markdownIt-Anchor" href="#깨끗한-코드란"></a> 깨끗한 코드란?</h2><blockquote><p>비야네 스트롭스트롭 Bjame stroustrup(c++ 창시자)</p></blockquote><p>우아하고 효율적인 코드를 좋아한다. 논리가 간단해야 버그가 숨어들지 못한다. 성능을 최적으로 유지해야 사람들이 원칙 없는 최적화로 코드를 망치려는 유혹에 빠지지 않는다. 깨끗한 코드는 한 가지를 제대로 한다.</p><p>비야네는 ‘우아한’ 이라는 단어를 사용한다. 깨끗한 코드는 보는 사람들에게 즐거움을 선사해야 한다는 뜻이다.</p><p>CPU자원을 낭비하는 코드도 우아하지 못하며 보기에도 즐겁지 못하다고 말한다. 나쁜 코드는 나쁜 코드를 유혹한다. 흔히 나쁜 코드를 고치면서 오히려 더 나쁜 코드를 만든다는 뜻이다.</p><p>비야네는 철저한 오류 처리도 언급한다. 세세한 사항까지 꼼꼼하게 신경 쓰라는 말이다. 프로그래머들이 대충 넘어가는 부분 중 하나가 오류 처리이다.</p><p>메모리 누수, 경쟁 상태, 일관성 없는 명명법이 또 다른 예다. 한마디로 요약하면 깨끗한 코드는 세세한 사항까지 꼼꼼하게 처리하는 코드다.</p><p>비야네는 마지막으로 깨끗한 코드란 한 가지를 잘 한다고 단언한다. 수많은 소프트웨어 설계 원칙이 이 간단한 교훈 하나로 귀결된다는 사실은 우연이 아니다.</p><p>나쁜 코드는 너무 많은 일을 하려 애쓰다가 뒤섞이고 목적이 흐려진다. 깨끗한 코드는 한 가지에 '집중’한다.<br>각 함수와 클래스와 모듈은 주변 상황에 현혹되거나 오염되지 않은 채 한길만 걷는다.</p><blockquote><p>그레디 부치 Grady Booch</p></blockquote><p>깨끗한 코드는 단순하고 직접적이다. 깨끗한 코드는 잘 쓴 문장처럼 읽힌다. 깨끗한 코드는 결코 설계자의 의도를 숨기지 않습니다. 오히려 명쾌한 추상화와 단순한 제어문으로 가득하다.</p><blockquote><p>큰 데이브 토마스 Dave Thomas</p></blockquote><p>깨끗한 코드는 작성자가 아닌 사람도 읽기 쉽고 고치기 쉽다. 단위 테스트 케이스와 인수 테스트 케이스가 존재한다. 깨끗한 코드에는 의미있는 이름이 붙는다. 특정 목적을 달성하는 방법은 여러가지가 아니라 하나만 제공한다.</p><p>의존성은 최소이며 각 의존성을 명확히 정의한다. API는 명확하며 최소로 줄였다. 언어에 따라 필요한 모든 정보를 코드만으로 명확히 표현할 수 없기에 코드는 문학적으로 표현해야 마땅하다.</p><p>실제로 읽기 쉬운 코드와 고치기 쉬운 코드는 엄연히 다르다.</p><blockquote><p>마이클 페더스 Michael Feathers</p></blockquote><p>깨끗한 코드의 특징은 많지만 그중에서도 모두를 아우르는 특징이 하나 있다. 깨끗한 코드는 언제나 누군가 주의 깊게 짯다는 느낌을 준다. 고치려고 살펴봐도 딱히 손 댈곳이 없다. 작성자가 이미 모든 사항을 고려했으므로 고칠 궁리를 하다보면 언제나 제자리로 돌아온다. 그리고는 누군가 남겨준 코드, 누군가 주의 깊게 짜놓은 작품에 감사를 느낀다.</p><blockquote><p>론 제프리스 Ron Jeffries</p></blockquote><p>론은 스트레티직 에어 커맨드 사에서 포트란으로 프로그래밍을 시작한 이래 거의 모든 플랫폼에서 거의 모든 언어로 코드를 구현해왔다. 그러므로 그의 의견은 신중하게 고려할 가치가 있다.</p><ol><li>모든 테스트를 통과한다.</li><li>중복이 없다.</li><li>시스템 내 모든 설계 아이디어를 표현한다.</li><li>클래스, 메서드, 함수 등을 최대한 줄인다.</li></ol><p>중복에 집중한다. 같은 작업을 여러 차례 반복한다면 코드가 아이디어를 제대로 표현하지 못한다는 증거다.<br>나는 문제의 아이디어를 찾아내 좀 더 명확하게 표현하려 애쓴다.</p><p>중복 줄이기, 표현력 높이기, 초반부터 간단한 추상화 고려하기, 내게는 이 세가지가 깨긋한 코드를 만드는 비결이다.<br><strong>중복을 피하라, 한가지 기능만 수행하라, 제대로 표현하라, 작게 추상화하라</strong></p><blockquote><p>워드 커닝햄(Ward Cunningham)</p></blockquote><p>위키 창시자, 피트 창시자, 익스트림 프로그래밍 공동 창시자, 디자인 패턴을 뒤에서 움직이는 전문가, 스몰토크와 객체지향의 정신적 지도자, 코드를 사랑하는 프로그래머들의 대부분 코드를 읽으면서 짐작했던 기능을 각 루틴이 그대로 수행한다면 깨끗한 코드라 불러도 되겠다. 코드가 그 문제를 풀기 위한 언어처럼 보인다면 아름다운 코드라 불러도 되겠다.</p><p>깨끗한 코드는 읽으면서 놀랄 일이 없어야 한다고 위드는 말한다. 읽으면서 짐작한 대로 돌아가는 코드가 깨끗한 코드이다.</p><p><em>코드가 그 문제를 풀기위한 언어처럼 보인다면</em> 아름다운 코드라 말한다. 언어를 단순하게 보이도록 만드는 책임이 우리에게 있다는 뜻과 같다.<br>언어를 단순하게 보이도록 만드는 열쇠는 프로그래머이다.</p><h1 id="urideulyi-saenggag"><a href="#urideulyi-saenggag" class="header-anchor">4. </a><a class="markdownIt-Anchor" href="#우리들의-생각"></a> 우리들의 생각</h1><p>코드를 읽는 시간 대 코드를 짜는 시간 비율이 10대 1을 훌쩍 넘는다. 새 코드를 짜면서 우리는 끊임없이 기존 코드를 읽는다.</p><p>비율이 이렇게 높으므로 읽기 쉬운 코드가 매우 중요하다. 비록 읽기 쉬운 코드를 짜기 쉽지는 않더라도 말이다. 하지만 기존 코드를 읽어야 새 코드를 짜므로 읽기 쉽게 만들면 사실은 짜기도 쉬워진다.<br>주변 코드를 읽지 않으면 새 코드를 짜지 못한다. 주변 코드가 읽기 쉬우면 새 코드를 짜기도 쉽다. 주변 코드가 어려우면 새 코드를 짜기도 어렵다. 그러므로 급하다면, 서둘러 끝내려면, 쉽게 짜려면 읽기 쉽게 만들면 된다.</p><h1 id="boiseukauteu-gyucig"><a href="#boiseukauteu-gyucig" class="header-anchor">5. </a><a class="markdownIt-Anchor" href="#보이스카우트-규칙"></a> 보이스카우트 규칙</h1><p>잘 짠 코드가 전부는 아니다. 시간이 지나도 언제나 깨끗하게 유지해야 한다. 시간이 지나면서 엉망으로 전락하는 코드가 한둘이 아니다. 그러므로 우리는 적극적으로 코드의 퇴보를 막아야한다.</p><p>체크아웃할때 보다 좀 더 깨끗한 코드를 체크인한다면 코드는 절대 나빠지지 않는다. 한꺼번에 많은 시간과 노력을 투자해 코드를 정리할 필요가 없다. 변수 이름 하나를 개선하고, 조금 긴 함수를 분할하고 약간의 중복을 제거하고 복잡한 if문 하나를 정리하면 충분하다.</p><p>시간이 지날수록 코드가 좋아지는 프로젝트에서 작업을 한다고 상상해보면 지속적인 개선이야 말로 전문가 정신의 본질이다.</p><h1 id="peurikweolgwa-weoncig"><a href="#peurikweolgwa-weoncig" class="header-anchor">6. </a><a class="markdownIt-Anchor" href="#프리퀄과-원칙"></a> 프리퀄과 원칙</h1><p>2002에 출판한 PPP의 프리퀄의 책은 객체 지향 설계의 원칙을 설명하고 전문 개발자들이 사용하는 실무 기법을 소개한다. PPP를 읽지 않았다면 PPP에서 표명한 의견을 여기서 코드로 재 발견하리라.</p><h1 id="gyeolron"><a href="#gyeolron" class="header-anchor">7. </a><a class="markdownIt-Anchor" href="#결론"></a> 결론</h1><p>예술에 대한 책을 읽는다고 예술가가 된다는 보장이 없다. 책은 단지 다른 예술가가 사용하는 도구와 기법, 그리고 생각하는 방식을 소개할 뿐이다. 예술에 대한 책과 마찬가지로 이 책 역시 세세한 정보로 가득하다. 코드도 많다. 좋은 코드도 소개하고 나쁜 코드도 소개한다.</p><p>나쁜 코드를 좋은 코드로 바꾸는 방법도 소개한다. 다양한 경험적 교훈과 체계와 절차와 기법도 열거한다.</p><p><strong>연습해 연습!</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;kodeuga-jonjaeharira&quot;&gt;&lt;a href=&quot;#kodeuga-jonjaeharira&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#코드가-존재하리라&quot;&gt;&lt;/
      
    
    </summary>
    
    
      <category term="CleanCode" scheme="http://gwanhyeon.github.io/categories/cleancode/"/>
    
    
      <category term="cleancode" scheme="http://gwanhyeon.github.io/tags/cleancode/"/>
    
      <category term="깨끗한코드" scheme="http://gwanhyeon.github.io/tags/%EA%B9%A8%EB%81%97%ED%95%9C%EC%BD%94%EB%93%9C/"/>
    
  </entry>
  
  <entry>
    <title>릿코드 Partition Labels</title>
    <link href="http://gwanhyeon.github.io/Leetcode-20210315-leetcode-partitionlabels/"/>
    <id>http://gwanhyeon.github.io/Leetcode-20210315-leetcode-partitionlabels/</id>
    <published>2021-03-15T14:05:05.000Z</published>
    <updated>2021-03-15T14:07:21.122Z</updated>
    
    <content type="html"><![CDATA[<h1 id="partition-labels"><a href="#partition-labels" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#partition-labels"></a> <a href="https://leetcode.com/problems/partition-labels/" target="_blank" rel="noopener">partition labels</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>(1)LastIdx[알파벳을 아스키코드로 표현된 값] = 현재 위치의 값을 구해줍니다.<br>예) ‘c’ 일 경우 LastIdx[‘c’-‘a’=2] = 현재 위치(i)<br>(2) S문자열을 모두 수행하면서 나오는 알파벳들의 위치와 비교하여 최대로 위치해있는 인덱스값을 구해줍니다.<br>(3) 만약 S문자열값을 모두 수행하면서 진행되는값이 S문자열에 최대로 위치해있는 인덱스값과 같을 경우<br>파티셔닝 포인터를 현재 진행되는값+1로 갱신해줍니다. 이것이 뜻하는 바는 하나의 파티션이 생성되어 다음 파티션의 첫번째 인덱스값으로 초기화 시켜주는것을 뜻합니다.<br>그리고, 현재까지 진행된 i번째 위치에서 - 파티션된 위치 + 1 을 처리합니다. 이렇게 처리하면 현재까지 하나의 파티션의 길이값을 구할 수 있습니다.<br>즉, (최대로 진행된 위치 - 시작된 위치) + 1를 뜻합니다.<br>(4) 2,3번을 차례대로 진행하면 해당되는 최대길이의 파티션을 나눌 수 있게됩니다.</p><blockquote><p>시간복잡도</p></blockquote><p>O(N)</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">leetcode_PartitionLabels_kgh</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        partitionLabels(<span class="string">"ababcbacadefegdehijhklij"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> List&lt;Integer&gt; <span class="title">partitionLabels</span><span class="params">(String S)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] lastIdx = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="comment">// 문자의 마지막인덱스에 해당하는값을 구해줍니다. 소문자의 갯수는 26개이므로 알파벳의 위치가 idx가 되고, 값이 몇번째 인덱스의 값인지를 넣어줍니다.</span></span><br><span class="line">        <span class="comment">// lastIdx[a-z 알파벳의 인덱스] = 몇번째 위치에 해당되는지</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; S.length(); i++) &#123;</span><br><span class="line">            lastIdx[S.charAt(i) - <span class="string">'a'</span>] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> maxIdx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> partitionPoint = <span class="number">0</span>;</span><br><span class="line">        List&lt;Integer&gt; arrList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; S.length(); i++) &#123;</span><br><span class="line">            maxIdx = Math.max(maxIdx, lastIdx[S.charAt(i) - <span class="string">'a'</span>]);</span><br><span class="line">            <span class="comment">// i가 파티션의 끝에 있는 경우 해당 i 인덱스의 값에서 파티셔닝 시작값을 빼주면 해당되는 길이가 리턴됩니다. +1을 해주는 이유는 인덱스가 0부터 시작하기 때문입니다.</span></span><br><span class="line">            <span class="keyword">if</span> (i == maxIdx) &#123;</span><br><span class="line">                <span class="comment">// 최대 위치 - 시작 위치 + 1</span></span><br><span class="line">                arrList.add(i-partitionPoint+<span class="number">1</span>);</span><br><span class="line">                <span class="comment">// 하나의 파티션이 생성되었으므로 파티션 포인터값을 그 다음 파티션의 첫번째값으로 갱신합니다.</span></span><br><span class="line">                partitionPoint = i + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arrList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;partition-labels&quot;&gt;&lt;a href=&quot;#partition-labels&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#partition-labels&quot;&gt;&lt;/a
      
    
    </summary>
    
    
      <category term="Leetcode" scheme="http://gwanhyeon.github.io/categories/leetcode/"/>
    
    
      <category term="Leetcode" scheme="http://gwanhyeon.github.io/tags/leetcode/"/>
    
      <category term="그리디" scheme="http://gwanhyeon.github.io/tags/%EA%B7%B8%EB%A6%AC%EB%94%94/"/>
    
  </entry>
  
  <entry>
    <title>03 클라우드네이티브의 이해(CI/CD, Docker, Container)</title>
    <link href="http://gwanhyeon.github.io/MSA-20210310-03-cloud-native/"/>
    <id>http://gwanhyeon.github.io/MSA-20210310-03-cloud-native/</id>
    <published>2021-03-10T03:34:51.000Z</published>
    <updated>2021-03-10T04:41:03.888Z</updated>
    
    <content type="html"><![CDATA[<h1 id="keulraudeu-neitibeu-cloud-native-ran"><a href="#keulraudeu-neitibeu-cloud-native-ran" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#클라우드-네이티브cloud-native란"></a> 클라우드 네이티브(Cloud Native)란?</h1><p>클라우드 환경에서 Application, Architecture, Infrastructure 등의 환경을 뜻합니다.<br>클라우드 네이티브 애플리케이션은 환경 변화에 민첩하고 능동적으로 대응하기 위해서 네이티브 환경에서 Saas(Software as a service)나 Faas(Function as a Service)형태로 서비스 되는 애플리케이션을 뜻합니다.</p><p>마이크로서비스는 2주안에 독립적으로 개발해서 배포할 수 있는 정도의 크기를 권고하여 개발 및 배포가 요청에 따라 적절히 확장되는 구조를 가질 수 있습니다.</p><blockquote><p>SaaS(Software as a service)</p></blockquote><p>특정 기간 혹은 특정기간만 필요한 만큼 구매하여 사용하는 주문형 소포트웨어 서비스</p><blockquote><p>12팩터</p></blockquote><p>SaaS가 가져야할 특성과 지켜야할 패턴들에 대한 경험을 정리하는것을 뜻하며 클라우드 애플리케이션 플랫폼인 헤로쿠(Heroku)에 등록하여 사용한 애플리케이션의 활용을 12가지로 정리한 문서입니다.</p><blockquote><p>12팩터 종류</p></blockquote><ol><li><p><em>코드베이스</em><br>원본소스를 뜻하며 소스코드 저장소 내의 원천소스를 하나 가집니다.</p></li><li><p><em>종속성</em><br>프로그램에 사용하는 라이브러리들은 암묵적인 종속성을 가지면 안됩니다.</p></li><li><p><em>환경설정</em><br>코드에서 사용하는 환경설정 정보는 코드가 완전히 분리되어 관리되어야합니다.<br>data connection info, hostname, back-end 등</p></li><li><p><em>백엔드 서비스</em><br>백엔드 서비스는 모두 리소스로 취급하며 Database나 메시지큐가 대표적입니다. 즉, 리소스 식별자 URI(User Resource Identifier)로 접근</p></li><li><p><em>빌드,릴리즈 및 실행</em><br>소스코드는 빌드 릴리즈,실행단계로 격리되어 운영됩니다.</p></li><li><p><em>프로세스</em><br>프로세스(process)는 무상태(Stateless)로 실행되며 상태정보를 공유하지 않아야합니다.</p></li><li><p><em>포트바인딩</em><br>하나의 독립된 서비스로 동작할 수 있고 외부에서 접속할 수 있어야합니다.</p></li><li><p><em>동시성(concurrency)</em></p></li></ol><p>특정 시스템에 부하가 발생시 하드웨어 스케일업을 진행하며 수용 용량보다는 프로세스의 Workload를 수평으로 확장하여 수평적 확장(scale-out)이 가능한 프로세스 모델 형태를 가져야합니다.</p><ol start="9"><li><p><em>폐기가능(disposability)</em><br>graceful shutdown이 보장되어야 하며 비정상적인 프로세스의 종료에도 실행 중이던 작업은 안전하게 종료되어야 합니다.</p></li><li><p><em>개발,테스트,운영환경의 일관성</em><br>개발환경은 테스트나 운영 환경과도 같아야합니다. 개발에서 운영까지 배포되는 시간, 담당자, 도구의 차이로 발생하는 문제를 최소하고 지속적인 배포가 될 수 있는 환경이 되어야합니다.</p></li><li><p><em>로그</em><br>로그는 Stream Event로 취급하여 애플리케이션에서 로그처리에 관여하거나 가공 및 관리하려 해서는 안됩니다.</p></li><li><p><em>일회성 프로세스</em><br>일회성 작업은 구분하여 별도의 프로세스로 구성합니다. 예를 들면, 관리자 관련 작업이나 유지 보수 관련 작업으로 생겨나는 프로세스들은 별도로 분리하여 구성합니다.</p></li></ol><h1 id="keulraudeu-neitibeu-akitegcyeo"><a href="#keulraudeu-neitibeu-akitegcyeo" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#클라우드-네이티브-아키텍쳐"></a> 클라우드 네이티브 아키텍쳐</h1><h2 id="hwagjangganeunghan-akitegceo"><a href="#hwagjangganeunghan-akitegceo" class="header-anchor">2.1. </a><a class="markdownIt-Anchor" href="#확장가능한-아키텍처"></a> 확장가능한 아키텍처</h2><p>클라우드에 최적화된 애플리케이션을 개발하고 운영할 수 있는 아키텍처를 제공합니다. 모놀리스 시스템 아키텍처 구조에서는 하나의 인스턴스에서 애플리케이션이 실행됩니다. (화면, 비즈니스로직, 데이터 처리)</p><h2 id="tanryeogjeog-akitegceo"><a href="#tanryeogjeog-akitegceo" class="header-anchor">2.2. </a><a class="markdownIt-Anchor" href="#탄력적-아키텍처"></a> 탄력적 아키텍처</h2><p>Resliense Architecture란 서비스 생성-통합-배포, 비즈니스 환경 변화에 대응 시간을 단축, 오류를 예측하고 적절히 대응할 수 있는 아키텍처 구조입니다. 분산 병렬처리, 수평적 확장, 무상태 통신방식, 오류를 예측하여 실행 상태를 유지하기 위한 자동 복원 능력이 지원되어야 합니다.</p><blockquote><p>장애 격리<br>Fault isolation은 오류 및 장애에 대한 격리이며 특정 서비스의 오류로 인해 다른 서비스까지 영향이 도달하는 것을 없애는 것입니다.</p></blockquote><h1 id="keulraudeu-neitibeu-inpeura"><a href="#keulraudeu-neitibeu-inpeura" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#클라우드-네이티브-인프라"></a> 클라우드 네이티브 인프라</h1><blockquote><p>컨테이너 기반 패키지(Container based package)란?<br>컨테이너 단위의 패키지입니다. 패키지 단위가 시스템 단위일 수도 있고, 서비스 애플리케이션 단위일 수도 있습니다. 컨테이너로 패키지된 단위가 실행 단위입니다.</p></blockquote><p>즉, 컨테이너 단위로 독립적인 인터페이스와 물리적으로 접속이 가능한 IP와 포트를 가집니다.</p><p>리눅스 컨테이너 기술을 응용한 도커 컨테이너는 PasS(Platform as a Service) 영역에 큰 변화와 발전을 가져왔다고 해도 과언이 아닙니다. 보통 jar,war 형태로 배포를 처리했지만, 이제는 도커이미지로 컨테이너를 실행하면 쉽게 배포가 가능합니다.</p><blockquote><p>동적 관리<br>시스템은 서비스와 추가와 삭제를 자동으로 감지하여 새롭게 추가된 서비스로 서비스 요청을 라우팅할 수 있습니다.</p></blockquote><h1 id="jisogjeog-tonghabgwa-baepo"><a href="#jisogjeog-tonghabgwa-baepo" class="header-anchor">4. </a><a class="markdownIt-Anchor" href="#지속적-통합과-배포"></a> 지속적 통합과 배포</h1><blockquote><p>CI(Continuous Integration)<br>소스코드의 지속적인 통합과 배포는 클라우드 네이티브환경 구축을 위하여 중요한 요소입니다. 지속적 통합은 개발 환경에서 개발 중인 코드를 통합하고 필요에 따라 테스트로 병행 수행하는 일련의 프로세스를 발합니다.</p></blockquote><p>주로, CI(Continuous Integration) 서버, 소스 관리(SCM, Soruce Code Managemet), 빌드도구(tool), 테스트 도구가 있으며 CI 서버는 빌드 프로세스가 관리하는 서버입니다. 예를 들면, 젠킨스를 들 수 있습니다.</p><p>소스 저장소는 소스코드의 형상을 관리하는 시스템으로 Git을 들 수 있습니다.</p><blockquote><p>지속적 배포</p></blockquote><p>지속적 배포에는 Continuous Delivery와 Continous Deployment 두가지 유형으로 나뉘고 실행 환경으로 배포하기 직전상태인 배포형태와 실행환경까지 자동으로 배포하는 환경입니다.</p><blockquote><p>카나리배포와 블루그린배포</p></blockquote><p>빌드된 소스를 릴리스하는 데에는 카나리(Canary) 배포와 블루그린(Blue-Green) 배포의 두가지 대표적인 유형이 있습니다.</p><p>카나리 배포같은 경우 새 버전의 서비스를 일부 사용자들에게만 배포하여 정상 유무를 확인하는 전략이고, 블루그린 배포는 운영과 같은 환경이 하나 더 있고 한쪽 새로운 버전을 배포하여 사용자의 연결 요청을 새버전 서비스로 라우팅을 유도하여 문제가 없으면 이전 환경의 사용을 중지하는 방식입니다.</p><h1 id="debeu-obseu-devops"><a href="#debeu-obseu-devops" class="header-anchor">5. </a><a class="markdownIt-Anchor" href="#데브-옵스devops"></a> 데브 옵스(DevOps)</h1><p>데브옵스(DevOps)는 애플리케이션과 서비스의 개발에서 배포 운영까지 바르게 제공되는 조직의 협업문화를 뜻합니다.</p><h1 id="keonteineo-container"><a href="#keonteineo-container" class="header-anchor">6. </a><a class="markdownIt-Anchor" href="#컨테이너container"></a> 컨테이너(Container)</h1><p>컨테이너(Container)는 운엉체제상에서 독립된 공간을 할당하고 독립된 공간끼리는 서로 격리되어 독립된 자원을 할당받고 프로세스 간 간섭이 없다면 애플리케이션 입장에서는 자신만의 공간을 가지게 되고 용도에 맞게 안전하게 실행됩니다.</p><p>즉, 마이크로서비스는 컨테이너를 단위로 묶어서 즉시 필요한 시점에 배포할 수 있는 장점을 가지고 있습니다.</p><blockquote><p>프로세스 격리</p></blockquote><p>격리된 공간에서 수행하는 프로세스는 다른 공간에서 동작하는 프로세스의 영향을 받지 않습니다. 네트워크자원을 분할하면 별도의 IP 어드레스를 할당하여 액세스가 가능합니다.</p><blockquote><p>가상화와 컨테이너</p></blockquote><p>가상화는 하이퍼바이저(Hypervisor)라는 소프트웨어를 이용하여 하나의 시스템에서 여러 개의 운영체제를 사용할 수 있게 지원하는 기술입니다. 반면에 컨테이너는 하이퍼바이저 없이 컨테이너 엔진을 통해서 가상의 격리된 공간을 생성하는 기술입니다.</p><h1 id="rinugseu-keonteineo"><a href="#rinugseu-keonteineo" class="header-anchor">7. </a><a class="markdownIt-Anchor" href="#리눅스-컨테이너"></a> 리눅스 컨테이너</h1><p>리눅스 컨테이너는 컨테이너 기술을 적용하고 잇고, 하나의 호스트 운영체제 위에 여러개의 격리된 시스템 환경을 구성할 수 있는 운영체제 수준의 가상화 기술입니다.<br>네임스페이스(namespace), 컨트롤그룹(cgroups)이라는 커널기능을 사용하여 격리된 공간을 관리합니다.</p><h1 id="neimseupeiseu"><a href="#neimseupeiseu" class="header-anchor">8. </a><a class="markdownIt-Anchor" href="#네임스페이스"></a> 네임스페이스</h1><p>네임스페이스는 컨테이너별로 격리된 공간을 가질 수 있도록 지원하는 기술입니다.<br>“PID”,“NET”, “MNT”, “UID”, “UTS”, “IPC” 여섯가지의 네임스페이스를 제공합니다.</p><p>PID(Process ID): 각 프로세스에 할당된 고유한 ID<br>NET(NETWORK): 네트워크 디바이스(device), IP, 포트(port), IP 테이블(table) 등<br>MNT(Mount): 컴퓨터 시스템에 접속되어 있는 디바이스 정보를 운영체제로 인식<br>UID: 네임스페이스별로 userID, group ID를 할당<br>UTS: 네임스페이스별로 호스트명(host name)과 도메인(domain)을 독자적으로 가집니다.<br>IPC(Inter Process Communication): 프로세스간 통신객체(Object)를 네임스페이스별로 할당합니다.</p><h1 id="dokeo-keonteineo"><a href="#dokeo-keonteineo" class="header-anchor">9. </a><a class="markdownIt-Anchor" href="#도커-컨테이너"></a> 도커 컨테이너</h1><p>도커 이미지(docker image)는 하나 혹은 여러개의 이미지 레이어로 구성되어있고 도커엔진에서 사용하는 기본 단위입니다. 도커 컨테이너를 생성하는 요소로 가상 머신의 이미지 파일과 비슷하다고 생각하면됩니다.</p><p>도커는 이미지와 컨테이너라는 개념을 제시하고 있으며 이미지는 베이스 이미지(base iamge)와 도커 이미지로 개념적으로 구분할 수 있습니다.</p><blockquote><p>도커 컨테이너</p></blockquote><p>도커 컨테이너(docker container)는 도커 이미지를 독립된 공간을 할당하여 실행한 런타임 개체(runtime object)입니다. 도커 엔진(docker engine)위에서 기동되며 가상의 IP와 포트, 이름을 가질 수 있습니다.</p><blockquote><p>도커 레지스트리</p></blockquote><p>도커 레지스트리(docker registry)는 도커 이미지를 관리 할 수 있게 제공된 저장공간입니다.</p><blockquote><p>도커 네트워크</p></blockquote><p>도커 네트워크(docker network)는 도커 컨테이너 단위로 서비스 할 수 있도록 네트워크 환경을 제공하는 가상의 네트워크 환경입니다. 이를 가능하게 하는것은 가상의 브릿지인 docker()가 담당하며 도커 데몬이(docker demon)이 가동된후 ip가 할당되고, 도커 컨테이너별로 컨테이너별 eth()에 IP가 자동으로 할당됩니다. NIC(eth0)는 도커 내부 네트워크와 브리지 역할을 하는 docker()와 연결됩니다.</p><p>docker()은 도커 내부 컨테이너들의 가상의 NIC(veth)와 연결되어 접속할 수 있습니다. 도커 내부 컨테이너들은 각자 가상의 eth()에 IP가 자동으로 할당되어서 docker()에서는 컨테이너의 IP를 확인하여 연결 할 수 있습니다.</p><p>도커 네트워크는 NAPT(Network Address Port Translation) 기능을 사용합니다.</p><blockquote><p>NAPT란?</p></blockquote><p>하나의 IP를 가지고 가상의 여러 IP 및 포트와 변환하는 기능입니다. NAT(Network Address Translation)과 차이를 가지고 있는데, NAT는 공용 IP와 사설 IP와의 관계, 즉 public IP : Private IP 관계가 1:1로 변환하는 방식이라면 NAPT는 포트까지 변환하여 1:N으로 변환하는 방식입니다.</p><blockquote><p>서비스 요청이 컨테이너까지 전달되는 과정</p></blockquote><p>사용자 <a href="http://www.kgh.com:8080" target="_blank" rel="noopener">http://www.kgh.com:8080</a> -&gt; eth0 8080 -&gt; docker() -&gt; 컨테이너 1번(80 port)</p><p>도커 컨테이너가 80번 포트로 서비스 되고 있는데 NAPT 8080 -&gt; 80 으로 변환하는 설정이 되어 있다면 외부 사용자의 요청을 8080 호출은 NAPT 설정에 의해 80 도커 컨테이너에 연결하여 결과를 반환해줄 것입니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;keulraudeu-neitibeu-cloud-native-ran&quot;&gt;&lt;a href=&quot;#keulraudeu-neitibeu-cloud-native-ran&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdow
      
    
    </summary>
    
    
      <category term="MSA" scheme="http://gwanhyeon.github.io/categories/msa/"/>
    
    
      <category term="MSA" scheme="http://gwanhyeon.github.io/tags/msa/"/>
    
  </entry>
  
  <entry>
    <title>Network Header 개요 및 쿠키 세션</title>
    <link href="http://gwanhyeon.github.io/Network-20210309-network-10-header-summary/"/>
    <id>http://gwanhyeon.github.io/Network-20210309-network-10-header-summary/</id>
    <published>2021-03-09T08:44:05.000Z</published>
    <updated>2021-03-10T04:45:54.855Z</updated>
    
    <content type="html"><![CDATA[<h1 id="http-hedeo"><a href="#http-hedeo" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#http-헤더"></a> HTTP 헤더</h1><p>HTTP 헤더의 구성은 다음과 같이 구성됩니다.<br>header-field = field-name “:” OWS field-value OWS<br>보통 fieldname은 대소문자 구분을 따로 하지않으며 OWS(optional whitespace)는 띄어쓰기를 허용시킵니다.</p><blockquote><p>reference RFC7230</p></blockquote><p><a href="http://www.bizcoder.com/everything-you-need-to-know-about-http-header-syntax-but-were-afraid-to-ask" target="_blank" rel="noopener">HTTP RFC7230 </a></p><blockquote><p>Request Header</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /search?q=hello&amp;hl=ko HTTP/1.1</span><br><span class="line">Host: www.google.com</span><br></pre></td></tr></table></figure><blockquote><p>Response Header</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html;charset=UTF-8</span><br><span class="line">Content-Length: 3423</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>...<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="http-hedeoneun-museun-yeoghaleul-haneungeosilggayo"><a href="#http-hedeoneun-museun-yeoghaleul-haneungeosilggayo" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#http-헤더는-무슨-역할을-하는것일까요"></a> HTTP 헤더는 무슨 역할을 하는것일까요?</h2><p>HTTP 헤더는 HTTP전송에 필요한 모든 부가정보들을 담고있습니다. 예를 들면, 메시지 바디 크기, 압축, 인증, 요청 클라이언트, 서버 정보, 캐시 관리 정보등을 가지고 있습니다.(표준헤더의 수는 방대합니다.)<br>직접 사용자가 HTTP 헤더를 사용할 수 있기때문에 추가를 할 수 있습니다.</p><h2 id="hedeoyi-bunryu"><a href="#hedeoyi-bunryu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#헤더의-분류"></a> 헤더의 분류</h2><ol><li>General Header : 메시지 전체에 적용되는 정보를 담고 있으며 연결정보를 가지고 있습니다.</li><li>Request Header: 요청 정보-User-Agent와 같은 정보를 가지고 있습니다.</li><li>Response Header: 응답 정보, 아파치</li><li>Entity Header: Entity Body 정보 Content-Type:text/html, Content-Length: 3423</li></ol><h2 id="hedeoyi-yeogsa"><a href="#hedeoyi-yeogsa" class="header-anchor">1.3. </a><a class="markdownIt-Anchor" href="#헤더의-역사"></a> 헤더의 역사</h2><p>1999년 RFC2616버전에서 2014년 RFC7230~7235가 등장하게 됩니다.<br>RFC7230 최신 버전으로 오게되면서 메시지 본문을 통해 표현 데이터들을 전달하게 됩니다.</p><p>메시지본문을 payload라고 일컫는데, 표현은 요청이나 응답에서 전달할 실제 데이터입니다.<br>표현 헤더는 표현 데이터를 해석할 수 있는 정보를 제공합니다. (HTML,JSON,데이터정보)</p><h1 id="hedeoyi-teugjing"><a href="#hedeoyi-teugjing" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#헤더의-특징"></a> 헤더의 특징</h1><blockquote><p>Representation Header</p></blockquote><p>HTTP/1.1 200OK<br>Content-Type:text/html;charset=UTF-8</p><blockquote><p>Representation Data</p></blockquote><html> <body> </body> </html><blockquote><p>Representation</p></blockquote><ol><li>Content-Type: 표현 데이터형식<br>미디어 타입, 문자 인코딩 형식(text/html; charset=utf-8, application/json, image/png)</li><li>Content-Encoding: 표현 데이터의 압축 방식<br>표현 데이터를 압축하기 위해 사용되며 인코딩 헤더의 정보로 압축을 해제합니다.<br>(gzip, deflate, identity)</li><li>Content-Language: 표현 데이터의 자연언어<br>표현 데이터의 자연언어를 표현합니다.(ko,en,en-US)</li><li>Content-Length: 표현 데이터의 길이<br>바이트 단위로 이루어져있으며 Transfer-Encoding 을 사용하면 Content-Length사용을 하면 안됩니다.<br>동일정보가 들어가있기때문입니다.</li></ol><p>표현헤더는 전송과 응답에 모두 사용됩니다.</p><blockquote><p>Content negotiation</p></blockquote><ol><li>Accept: 클라이언트가 선호하는 미디어 타입 전달</li><li>Accept-Charset: 클라이언트가 선호하는 문자 인코딩</li><li>Accept-Encoding: 클라이언트가 선호하는 압축 인코딩</li><li>Accept-Language: 클라이언트가 선호하는 자연 언어</li></ol><p>클라이언트가 요청을 하는것이다. 만약 해당되는 Accept가 없을 경우 우선순위를 부여합니다.<br>우선순위는 (0-1)까지 우선순위로 처리할 수 있습니다. 그리고, Quality Values를 사용하면 구체적인것들을 먼저 처리합니다.<br>(1.text/plain;format=flowed, 2.<em>/</em>) 우선순위가 더 높은것을 사용합니다.</p><blockquote><p>전송방식</p></blockquote><p>Transfer-Encoding, Range, Content-Range</p><p>전송 방식 4가지</p><ol><li>단순전송<br>Content-Length를 전송합니다.</li><li>압축전송<br>Content-Encoding을 전송합니다.</li><li>분할전송<br>Transfer-Encoding을 전송합니다. (transfer-Encoding: chunked) 바이트를 쪼개서 전송</li><li>범위전송<br>바이트 범위를 설정하여 전송합니다. (Range: bytes=500-1000) 해당 바이트만큼 쪼개서 전송받음.</li></ol><blockquote><p>일반정보</p></blockquote><ol><li>From: User Agent E-Mail<br>검색엔진, 요청</li><li>Referer: 이전 웹 페이지 주소<br>이전 웹 페이지 주소 A-&gt; B요청시 Referer 선언후 A포함해서 요청(중요), 유입경로 분석</li><li>User-Agent: 유저 에이전트 애플리케이션 정보<br>웹 브라우저 정보, 특정 브라우저 장애발생시 통계 정보 추출</li><li>Server: 요청을 처리하는 오리진 서버의 소프트웨어 정보<br>요청을 처리하는 Origin 서버의 소프트웨어 정보(nginx)</li><li>Date: 메시지가 생성된 날짜<br>메시지 발생 날짜 시간, 응답에 사용</li><li>Host: 요청한 호스트 정보(도메인) - 요청 필수값</li><li>Location: 페이지 리다이렉션<br>응답의 결과에 Location 헤더가 있으면, Location 위치로 자동 이동(리다이렉트)</li><li>Allow: 허용 가능한 HTTP 메서드<br>Allow값을 다음과 같이 설정하여 허용가능한 메소드를 설정합니다.(GET, HEAD, PUT)</li><li>Retry-After: 유저 에이전트가 다음 요청을 하기까지 기다려야 하는 시간<br>서비스가 언제까지 불능인지 처리하기</li></ol><blockquote><p>인증</p></blockquote><ol><li>Authorization: 클라이언트 인증 정보를 서버에 전달합니다.</li><li>WWW-Authenticate: 리소스 접근시 필요한 인증 방법 정의합니다.</li><li>Set-Cookie: 서버에서 클라이언트로 쿠키 전달하고 응답을 처리합니다.</li><li>Cookie: 클라이언트가 서버에서 받은 쿠키를 저장하고, HTTP 요청시 서버로 전달합니다.</li></ol><h1 id="kuki-cookies-vs-sesyeon-session"><a href="#kuki-cookies-vs-sesyeon-session" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#쿠키cookies-vs-세션session"></a> 쿠키(Cookies) VS 세션(Session)</h1><p>이번에 살펴볼 내용은 &quot;세션&quot;과 &quot; 쿠키&quot;입니다.</p><blockquote><ol><li>쿠키, 세션 이란?<br>인터넷을 사용하시다 보면 흔히 접했던 말입니다. 가끔 홈페이지 접속이 되지 않거나, 에러가 나는 경우</li></ol></blockquote><p>&quot; 인터넷 옵션에 들어가서 쿠키를 삭제하고 다시 시도해보시길 바랍니다. &quot;</p><p>혹은, 로그인을 하였는데 아이디와 비밀번호를 저장하시겠습니까? 라는 글을 보셨을 겁니다.</p><blockquote><p>쿠키 세션 왜 써요?</p></blockquote><p>서버와 클라이언트가 통신을 할 때 통신이 연속적으로 이어지지 않고 한 번 통신이 되면 끊어진다. 따라서 서버는 클라이언트가 누구인지 계속 인증을 해주어야 하는데, 여기서 쿠키와 세션을 이용하여 인증을 하게 된다.</p><blockquote><p>쿠키란?</p></blockquote><p>클라이언트 웹 브라우저에서 관리 되는 작은 기록의 텍스트 파일(정보 파일) 입니다. 특정 시간 동안에 유효한 시간을 설정하여, 브라우저를 다시 재부팅하여도 인증이 되는 경우 입니다.</p><blockquote><p>쿠키 동작 방식</p></blockquote><ol><li><p>클라이언트가 로그인을 하기 위해 웹 페이지를 요청합니다.</p></li><li><p>쿠키는 HTTP 통신 헤더에서 전송 됩니다. 따라서, 통신 헤더에 쿠키값이 들어가게 되며, 응답 헤더에 쿠키 값을 웹 서버에 전송 시킵니다.</p></li><li><p>이제, 웹 서버에서 쿠키를 생성 시킵니다.</p></li><li><p>현재 HTTP 헤더에는 쿠키값을 가지고 있기 때문에, 나중에 로그인을 다시 요청하여도 그 값을 읽어 이전상태의 정보를 변경 시킵니다.</p></li><li><p>쿠키 값을 새로 발급 받거나 변화가 있을 경우 새로운 쿠키 값을 HTTP 헤더에 포함시켜 응답하게 됩니다.</p></li></ol><blockquote><p>쿠키 사용 예제</p></blockquote><ol><li>티스토리 블로그를 방문하였다고 가정 할때, 로그인을 하고 나면 아이디와 비밀번호르 저장하시겠습니까? 라는 문구를 확인 할 수 있습니다.</li><li>E-commerce b2c 플랫폼인 쇼핑몰이나 전자상거래 사이트등에서 장바구나 같은것들을 예로 들 수 있겠습니다.</li></ol><p>쿠키는 모든 요청에 쿠키 정보를 자동으로 포함시킵니다.<br>예) Cookie: user=kgh</p><p>쿠키는 생명 주기를 가지고 있습니다. expires를 지정하여 만료일이 되면 쿠키를 삭제할 수 있습니다. 아니면 max-age=3600초를 주어서 쿠키를 처리할 수 있습니다.</p><p>쿠키 도메인은 보통 명시한 문서기준의 도메인과 서브도메인을 포함합니다.<br>domain = kgh.org를 지정하여 쿠키를 생성합니다.</p><p>쿠키의 경로는 이당 경로를 포함한 하위 경로 페이지만 쿠키에 접근이 가능하고 보통 path를 root로 처리하는 경우가 많습니다.</p><p>쿠키는 http, https를 구분하지 않고 전송하며 Secure시에만 https인 경우에만 전송하게 됩니다. http만 접근이 가능하게 하여 XSS공격을 방지할 수 있습니다. 그리고 요청된 도메인과 쿠키에 설정된 도메인이 같은 경우에만 쿠키를 전송하게 합니다.(XSRF 방지)</p><blockquote><p>세션이란?<br>세션이라고 하는것은, 쿠키 값을 이용하여 사용자 정보 파일을 서버측에서 관리 하게 됩니다.<br>쿠키와의 차이점은 쿠키는 클라이언트쪽에서 관리를 하였습니다. 쿠키 값을 이용한 세션 값들이 서버측에 저장되어 그 값을 이용하여 사용자 인증을 받는 구조입니다.</p></blockquote><blockquote><p>세션 동작 방식</p></blockquote><ol><li>클라이언트가 서버에 접속 시 세션 ID 값을 발급을 받게 됩니다.</li><li>그 이후에 서버에서는 발급 받은 세션 ID값을 이용하여 쿠키를 사용해서 세션을 저장하게 됩니다.</li><li>로그인을 진행한다면, 클라이언트쪽에서 요청 받은 경로에 대한 세션 ID 값을 다시 전달하여 인증하는 방식입니다.</li></ol><blockquote><p>세션의 특징</p></blockquote><ol><li>각 클라이언트에게 고유 ID를 부여 시킨다.</li><li>보안면에서 쿠키보다 우수합니다(서버측면에서 관리하기 때문)</li><li>세션 ID값으로 클라이언트를 구별 할 수 있습니다.</li><li>쿠키와 다르게, 서버측에서 메모리를 관리하기 때문에 서버측에서 용량의 과부하가 생길 수 있습니다.</li><li>이것을 해결하기 위해서 나온것이 JWT(JSON WEB TOKEN)방식 입니다. 추후에 따로 포스팅 할 계획이오니, 확인해주시면 되겠습니다.</li></ol><blockquote><p>쿠키와 세션의 차이?<br>쿠키와 세션의 큰 차이점은</p></blockquote><ol><li></li></ol><p>쿠키 = 클라이언트(웹 브라우저)<br>세션 = 서버(웹 서버)</p><ol start="2"><li><p>보안측면에 대해서는 쿠키 값 보다 세션이 조금 더 유리합니다. 이것에 대해서 추후에 자세히 설명 드리도록 하겠습니다.</p></li><li><p>쿠키와 세션의 메모리 용량에 대한 차이점입니다. 세션은 쿠키에 비해 서버쪽에서 메모리를 차지하고 있기 때문에 문제가 과부하가 걸릴 가능성이 있습니다.</p></li></ol><p>덧붙여 얘기하면, 쿠키는 사용자 로그인 세션을 관리하고 광고정보를 트래킹할 수 있습니다. 또한, 쿠키 정보는 항상 서버에 전송되기 때문에 네트워크 트래픽을 유발할 수 있으며 최소한의 정보를 사용해야합니다. 만약 서버에 저장하고 싶지 않다면, 웹 브라우저 내부에 웹 스토리지를 사용합니다(LocalStorage, sessionStorage)</p><h1 id="mamuri"><a href="#mamuri" class="header-anchor">4. </a><a class="markdownIt-Anchor" href="#마무리"></a> 마무리</h1><p>이렇게 쿠키와 세션에 대한 개념들을 알아보는 시간을 가졌고, 이러한 쿠키와 세션 방식을 대체하기 위한 방식들이 많이 나오고 있습니다.</p><p>예를 들어, 위에서 말씀드린 JWT 토큰 인증 방식이라던지, OAuth2.0 방식(Facebook, Google, Slack) 등을 사용할 수 있습니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;http-hedeo&quot;&gt;&lt;a href=&quot;#http-hedeo&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#http-헤더&quot;&gt;&lt;/a&gt; HTTP 헤더&lt;/h1&gt;
&lt;p&gt;HTT
      
    
    </summary>
    
    
      <category term="Network" scheme="http://gwanhyeon.github.io/categories/network/"/>
    
    
      <category term="Network" scheme="http://gwanhyeon.github.io/tags/network/"/>
    
      <category term="Header" scheme="http://gwanhyeon.github.io/tags/header/"/>
    
  </entry>
  
  <entry>
    <title>프로그래머스 외벽점검</title>
    <link href="http://gwanhyeon.github.io/Programmers-20210309-programmers-%EC%99%B8%EB%B2%BD%EC%A0%90%EA%B2%80/"/>
    <id>http://gwanhyeon.github.io/Programmers-20210309-programmers-%EC%99%B8%EB%B2%BD%EC%A0%90%EA%B2%80/</id>
    <published>2021-03-08T16:47:40.000Z</published>
    <updated>2021-03-08T16:54:42.269Z</updated>
    
    <content type="html"><![CDATA[<h1 id="peurogeuraemeoseu-oebyeogjeomgeom"><a href="#peurogeuraemeoseu-oebyeogjeomgeom" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#프로그래머스-외벽점검"></a> <a href="https://programmers.co.kr/learn/courses/30/lessons/60062" target="_blank" rel="noopener">프로그래머스 외벽점검</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>(1) 취약점의 출발지를 설정하고 취약지점을 평면으로 생각하여 해당 N범위를 넘어갈 것을 대비하여 취약지점+N까지 값들을 넣어줍니다.<br>(2) 출발점과 다음 취약점의 거리가 사용 가능한 친구의 시간보다 크면 더이상 진행할 수 없는것이므로 다음값으로 갱신하여 진행<br>즉, 현재 친구의 시간으로 모든 외벽을 점검할 수 없다는 뜻이 됩니다.<br>(3) 만약 친구의 시간이 더 클 경우<br>점검이 가능하기 때문에 다음취약점으로 다시 점검을 체크합니다.<br>(4) 만약 모든 친구를 사용하지 않고도 투입이 가능하다면 최솟값을 갱신하여 진행합니다.<br>(5) 친구를 모두 투입했지만 성공하지 못하였으면 -1을 리턴해줍니다. 즉, 최솟값을 구하기 위해 설정한 Integer.MAX_VALUE 값과 같은지를 확인합니다.</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">programmers_</span>외벽점검<span class="title">_kgh</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">boolean</span>[] check;</span><br><span class="line">    <span class="keyword">static</span> List&lt;Integer&gt; circleWeakList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; friendDistList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> answer = Integer.MAX_VALUE;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">12</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">10</span>&#125;,<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] weak, <span class="keyword">int</span>[] dist)</span> </span>&#123;</span><br><span class="line">        check = <span class="keyword">new</span> <span class="keyword">boolean</span>[dist.length];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 취약지점 넣어주기</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;weak.length; i++)&#123;</span><br><span class="line">            circleWeakList.add(weak[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 원형을 평면으로 생각하여 +n만큼 더 진행</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;weak.length; i++)&#123;</span><br><span class="line">            circleWeakList.add(weak[i]+n);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(<span class="number">0</span>,weak,dist);</span><br><span class="line">        answer = (answer == Integer.MAX_VALUE) ? -<span class="number">1</span> : answer;</span><br><span class="line">        <span class="comment">// System.out.println("answer =&gt; " + answer);</span></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cnt, <span class="keyword">int</span>[] weak, <span class="keyword">int</span>[] dist)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cnt == dist.length)&#123;</span><br><span class="line">            distCheck(weak);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 친구가 투입되는 거리의 조합 예: 1,2,3,4 -&gt; 2,3,4,1 ... 해당거리만큼을 먼저 방문해야하는지를 체크를 진행</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;dist.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(check[i])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            check[i] = <span class="keyword">true</span>;</span><br><span class="line">            friendDistList.add(dist[i]);</span><br><span class="line">            dfs(cnt+<span class="number">1</span>, weak, dist);</span><br><span class="line">            friendDistList.removeLast();</span><br><span class="line">            check[i] = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">distCheck</span><span class="params">(<span class="keyword">int</span>[] weak)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;weak.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">boolean</span> friendSizeCheck = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">int</span> startPoint = circleWeakList.get(i);</span><br><span class="line">            <span class="comment">// 들어가있는 취약지점을 하나씩 밀면서 처리하기 예: 123456</span></span><br><span class="line">            <span class="comment">// 123456 -&gt; 23456 -&gt; 3456 -&gt; 456 ....</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;i+weak.length; j++)&#123;</span><br><span class="line">                <span class="comment">// 두점 사이의 거리가 검사 가능한 친구거리보다 크다면 더이상 진행이 불가능하므로 갱신</span></span><br><span class="line">                <span class="keyword">if</span>(friendDistList.get(idx) &lt; circleWeakList.get(j) - startPoint)&#123;</span><br><span class="line">                    startPoint = circleWeakList.get(j);</span><br><span class="line">                    idx++;</span><br><span class="line">                    <span class="comment">// 모든친구를 방문하였을 경</span></span><br><span class="line">                    <span class="keyword">if</span>(idx == friendDistList.size())&#123;</span><br><span class="line">                        friendSizeCheck = <span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 모든 친구를 사용하지 않고도 투입이 가능한 경우</span></span><br><span class="line">            <span class="keyword">if</span>(!friendSizeCheck)&#123;</span><br><span class="line">                answer = Math.min(answer, idx+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;peurogeuraemeoseu-oebyeogjeomgeom&quot;&gt;&lt;a href=&quot;#peurogeuraemeoseu-oebyeogjeomgeom&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-An
      
    
    </summary>
    
    
      <category term="Programmers" scheme="http://gwanhyeon.github.io/categories/programmers/"/>
    
    
      <category term="DFS" scheme="http://gwanhyeon.github.io/tags/dfs/"/>
    
  </entry>
  
  <entry>
    <title>프로그래머스 야근지수</title>
    <link href="http://gwanhyeon.github.io/Programmers-20210305-programmers-%EC%95%BC%EA%B7%BC%EC%A7%80%EC%88%98/"/>
    <id>http://gwanhyeon.github.io/Programmers-20210305-programmers-%EC%95%BC%EA%B7%BC%EC%A7%80%EC%88%98/</id>
    <published>2021-03-05T05:22:52.000Z</published>
    <updated>2021-03-05T05:34:49.150Z</updated>
    
    <content type="html"><![CDATA[<h1 id="peurogeuraemeoseu-yageun-jisu-level03"><a href="#peurogeuraemeoseu-yageun-jisu-level03" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#프로그래머스-야근-지수-level03"></a> <a href="https://programmers.co.kr/learn/courses/30/lessons/12927" target="_blank" rel="noopener">프로그래머스 야근 지수 Level03</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>priorityQueue를 사용하여 가장 야근이 많은것부터 하나씩 처리합니다.1시간당 1의 일을 소모하니 가장높은것부터 -1을 처리해줍니다.</li><li>TestCase03의 경우 처리한값중에 -1 0보다 작은 값이 존재할 경우 가장 최솟값이 0이되기 때문에 조건을 걸어 해당 로직을 빠져나오게 하였습니다.</li><li>PriorityQueue의 Collections.reverseOrder()를 사용하면 가장 높은 우선순위부터 처리할 수 있습니다.</li></ol><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> 야근지수 </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//solution(4, new int[]&#123;4,3,3&#125;);</span></span><br><span class="line">        solution(<span class="number">3</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">long</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] works)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> answer = <span class="number">0</span>;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; pq = <span class="keyword">new</span> PriorityQueue(Collections.reverseOrder());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> work : works) &#123;</span><br><span class="line">            pq.add(work);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!pq.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(cnt == n)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pq.add(pq.poll()-<span class="number">1</span>);</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Integer value : pq) &#123;</span><br><span class="line">            <span class="keyword">if</span>(value &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                answer = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            answer += Math.pow(value, <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;peurogeuraemeoseu-yageun-jisu-level03&quot;&gt;&lt;a href=&quot;#peurogeuraemeoseu-yageun-jisu-level03&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markd
      
    
    </summary>
    
    
      <category term="Programmers" scheme="http://gwanhyeon.github.io/categories/programmers/"/>
    
    
      <category term="프로그래머스" scheme="http://gwanhyeon.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"/>
    
      <category term="힙" scheme="http://gwanhyeon.github.io/tags/%ED%9E%99/"/>
    
  </entry>
  
  <entry>
    <title>OS 트랜잭션(transaction), 격리수준(Isolation Level)</title>
    <link href="http://gwanhyeon.github.io/OS-20210303-os-transaction/"/>
    <id>http://gwanhyeon.github.io/OS-20210303-os-transaction/</id>
    <published>2021-03-03T09:12:15.000Z</published>
    <updated>2021-03-03T09:35:45.280Z</updated>
    
    <content type="html"><![CDATA[<h1 id="transaction-teuraenjaegsyeon"><a href="#transaction-teuraenjaegsyeon" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#transaction트랜잭션"></a> Transaction(트랜잭션)</h1><blockquote><p>트랜잭션의 성질</p></blockquote><ol><li><p>원자성(Atomicity)</p><p>한 트랜잭션 내에서 실행한 작업들을 하나로 간주한다. 즉, 모두 성공 또는 실패를 뜻합니다.</p></li><li><p>일관성(Consistency)</p><p>트랜잭션은 일관성 있는 데이터베이스 상태를 유지합니다. (Data Integrity)</p></li><li><p>격리성(Isolation)</p><p>동시에 실행되는 트랜잭션들이 서로 영향을 미치지 않도록 격리해야합니다.</p></li><li><p>지속성(Durability)</p><p>트랜잭션을 성공적으로 마치면 결과가 항상 저장되어야 합니다.</p></li></ol><blockquote><p>트랜잭션이란 무엇인가?</p></blockquote><p>스프링에서는 트랜잭션을 처리를 지원하는데 그 중 어노테이션 방식으로 @Transcational을 선언하여 사용하는 방법이 일반적입니다. 즉, 선언적 트랜잭션이라 불리어옵니다.</p><p>클래스나 메서드 위에서 @Transaction이 추가되면, 이 클래스에 트랜잭션 기능이 적용된 프록시 객체가 생성됩니다.</p><p>이 프록시 객체는 @Transcation이 포함된 메소드가 호출 될 경우, PlatformTranscationManager를 사용하여 트랜잭션을 시작하고, 정상 여부에 따라 Commit or Rollback을 진행합니다.</p><h1 id="teuraenjaegsyeon-gyeongjaengsi-munjejeom"><a href="#teuraenjaegsyeon-gyeongjaengsi-munjejeom" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#트랜잭션-경쟁시-문제점"></a> 트랜잭션 경쟁시 문제점</h1><p>다수의 트랜잭션이 동시에 실행되는 상황에서는 트랜잭션 처리방식을 고려해야합니다.</p><h3 id="munje-1dirty-read"><a href="#munje-1dirty-read" class="header-anchor">2.1. </a><a class="markdownIt-Anchor" href="#문제-1dirty-read"></a> 문제 1Dirty Read</h3><p>트랜잭션 A가 어떤 값을 1에서 2로 변경하고 아직 커밋되지 않은 상황에서 트랜잭션 B가 같은 값을 읽는 경우 트랜잭션 B는 2가 조회됩니다.</p><p>트랜잭션 B가 2를 조회한 후 A가 롤백이 된다면 결국 트랜잭션 B는 잘못된 값을 읽게됩니다. 즉, 트랜잭션이 완료되지 않은 시점에서 데이터에 접근을 허용할 경우 발생할 수 있는 데이터 불일치가 발생할 수 있습니다.</p><h3 id="munje-2-non-repeatable-read"><a href="#munje-2-non-repeatable-read" class="header-anchor">2.2. </a><a class="markdownIt-Anchor" href="#문제-2-non-repeatable-read"></a> 문제 2 Non Repeatable Read</h3><p>트랜잭션 A가 어떤값을 1을 읽은후 A는 같은 쿼리를 또 실행할 예정이면 그 사이에 트랜잭션 B가 값 1을 2로 바꾸고 커밋해버리면서 A가 같은 쿼리 두번을 날리는 사이 두 쿼리의 결과가 다르게 되어버립니다.</p><p>즉, 트랜잭션에서 같은 쿼리를 두번 실행했을 때 발생할 수 있는 데이터 불일치 입니다.</p><p>Dirty Read에 비해서 발생할 확률은 적습니다.</p><h3 id="munje-3-phantom-read"><a href="#munje-3-phantom-read" class="header-anchor">2.3. </a><a class="markdownIt-Anchor" href="#문제-3-phantom-read"></a> 문제 3 Phantom Read</h3><p>트랜잭션 A가 어떤 조건을 사용하여 특정 범위의 값 [0,1,2,3,4]를 읽었을 때, 이후 A가 같은 쿼리를 실행예정이라면 그 사이에 트랜잭션 B가 같은 테이블에 값[5,6,7]을 추가해버리면 A가 같은 쿼리 두번을 날리는 사이에 두 쿼리의 결과가 다르게 되어버립니다.</p><p>즉, 한 트랜잭션에서  일정 범위의 레코드를 두번 이상 읽을 때 발생하는 데이터 불일치라고 할 수 있습니다.</p><h1 id="teuraenjaegsyeon-gyeogri-sujun"><a href="#teuraenjaegsyeon-gyeogri-sujun" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#트랜잭션-격리-수준"></a> 트랜잭션 격리 수준</h1><p>격리수준이란 일관성이 없는 데이터를 허용하는 수준을 말합니다.</p><h3 id="default"><a href="#default" class="header-anchor">3.1. </a><a class="markdownIt-Anchor" href="#default"></a> DEFAULT</h3><p>기본 격리수준을 뜻하며 기본값을 뜻합니다. = Database의 Isolation Level을 따릅니다.</p><h3 id="read-uncommited-level-01"><a href="#read-uncommited-level-01" class="header-anchor">3.2. </a><a class="markdownIt-Anchor" href="#read_uncommitedlevel-01"></a> READ_UNCOMMITED(level 01)</h3><p>커밋되지 않은(트랜잭션  처리)중인 데이터에 대한 읽기를 허용</p><p>즉 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 B라는 아직 완료되지 않은(Uncommited 혹은 Dirty) 데이터 B를 읽을 수 있습니다.</p><p>Problem1 - Dirty Read가 발생할 수 있습니다.</p><p>Transaction 레벨을 허용하지 않아[ READ_COMMITTED와 SERIALIZABLE만이 적합한 트랜잭션 레벨입니다 ] 라는 오류가 발생한다. 다른 옵션들은 문제 발생하지 않습니다.</p><h3 id="read-commited-level01"><a href="#read-commited-level01" class="header-anchor">3.3. </a><a class="markdownIt-Anchor" href="#read_commitedlevel01"></a> READ_COMMITED(Level01)</h3><p>트랜잭션 커밋이 된 확정 데이터만 읽기를 허용합니다. 그리고 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른사용자는 해당 데이터에 접근할 수 없습니다.</p><p>Problem1 - Dirty Read방지</p><h3 id="repeatable-read-level02"><a href="#repeatable-read-level02" class="header-anchor">3.4. </a><a class="markdownIt-Anchor" href="#repeatable_readlevel02"></a> REPEATABLE_READ(Level02)</h3><p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능합니다.</p><p>선행 트랜잭션이 읽은 데이터는 트랜잭션이 종료될 때까지 후행 트랜잭션이 갱신하거나 삭제가 불가능 하기때문에 같은 데이터를 두 번 쿼리했을 때 일관성 있는 결과를 리턴합니다.</p><p>Problems2 - Non Repeatable Read 방지</p><h3 id="serializable-level-03"><a href="#serializable-level-03" class="header-anchor">3.5. </a><a class="markdownIt-Anchor" href="#serializablelevel-03"></a> SERIALIZABLE(Level 03)</h3><p>데이터의 일관성 및 동시성을 위해 MVCC(Multi Version COncurrency Control)을 사용하지 않습니다.</p><p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다.</p><p>problem3 - phantom READ 방지</p><blockquote><p>주의 할점</p></blockquote><p>격리 수준이 올라갈 수록 성능 저하의 우려를 가지고 있습니다.</p><blockquote><p>MVCC?</p></blockquote><p>MVCC는 다중 사용자 데이터베이스 성능을 위한 기술로 데이터 조회시 LOCK을 사용하지 않고 데이터의 버전을 관리해 데이터의 일관성 및 동시성을 높이는 기술입니다.</p><p>트랜잭션이 완료 될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다.</p><blockquote><p>REFERENCE</p></blockquote><p><a href="https://goddaehee.tistory.com/167" target="_blank" rel="noopener">https://goddaehee.tistory.com/167</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;transaction-teuraenjaegsyeon&quot;&gt;&lt;a href=&quot;#transaction-teuraenjaegsyeon&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href
      
    
    </summary>
    
    
      <category term="OS" scheme="http://gwanhyeon.github.io/categories/os/"/>
    
    
      <category term="트랜잭션" scheme="http://gwanhyeon.github.io/tags/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98/"/>
    
      <category term="Transaction" scheme="http://gwanhyeon.github.io/tags/transaction/"/>
    
  </entry>
  
  <entry>
    <title>Codility FrogRiverOne</title>
    <link href="http://gwanhyeon.github.io/Codility-20210302-codility-frogriverone/"/>
    <id>http://gwanhyeon.github.io/Codility-20210302-codility-frogriverone/</id>
    <published>2021-03-02T09:26:18.000Z</published>
    <updated>2021-03-02T09:32:37.777Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-frogriverone"><a href="#codility-frogriverone" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-frogriverone"></a> <a href="https://app.codility.com/programmers/lessons/4-counting_elements/frog_river_one/" target="_blank" rel="noopener">Codility FrogRiverOne</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>해당 문제는 개구리가 강 반대편으로 점프할 수 있는 가장 빠른 시간을 찾아야 합니다. 즉, 1-X까지의 값이 모두 주여졌을때의 현재 인덱스값을 반환하면 되는 문제였습니다.</p><ol><li>set을 사용하여 모든 개구리가 점프하는 시간들을 담아줍니다.</li><li>시간들이1-X까지의 값 즉, set.size()값이 같은경우에 현재 해당하는 idx값을 리턴시켜줍니다.</li></ol><p>처음에 문제를 제대로 이해를 하지못하여 시간을 쓴 문제였습니다…</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FrogRiverOne_lesson04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">5</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Set&lt;Integer&gt; s = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> answer = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            s.add(A[i]);</span><br><span class="line">            <span class="keyword">if</span>(s.size() == X)&#123;</span><br><span class="line">                answer = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-frogriverone&quot;&gt;&lt;a href=&quot;#codility-frogriverone&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-fr
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
  </entry>
  
  <entry>
    <title>Codility PermMissingElem</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-permmissingelem/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-permmissingelem/</id>
    <published>2021-02-28T10:56:15.000Z</published>
    <updated>2021-02-28T10:58:35.541Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-permmissingelem"><a href="#codility-permmissingelem" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-permmissingelem"></a> <a href="https://app.codility.com/programmers/lessons/3-time_complexity/perm_missing_elem/" target="_blank" rel="noopener">codility PermMissingElem</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>check변수를 선언하여 나온 elements를 모두 체크를 시켜줍니다.</li><li>값은 1부터 range까지 진행되므로 1부터 진행하여 check값까지 진행하면서 false인값일때 해당 엘리먼트의 값을 반환시켜줍니다.</li></ol><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermMissingElem_lesson03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        Arrays.sort(A);</span><br><span class="line">        <span class="keyword">boolean</span>[] check = <span class="keyword">new</span> <span class="keyword">boolean</span>[A.length+<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// 0, 1, 2, 3</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            check[A[i]] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=check.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!check[i])&#123;</span><br><span class="line">                answer = i;</span><br><span class="line">                System.out.println(answer);</span><br><span class="line">                <span class="keyword">return</span> answer;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-permmissingelem&quot;&gt;&lt;a href=&quot;#codility-permmissingelem&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codil
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="TimeComplexity" scheme="http://gwanhyeon.github.io/tags/timecomplexity/"/>
    
  </entry>
  
  <entry>
    <title>Codility Frog Jump</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-frog-jump/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-frog-jump/</id>
    <published>2021-02-28T07:39:43.000Z</published>
    <updated>2021-02-28T07:48:36.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-frog-jump"><a href="#codility-frog-jump" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-frog-jump"></a> <a href="https://app.codility.com/programmers/lessons/3-time_complexity/frog_jmp/" target="_blank" rel="noopener">Codility frog jump</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>최대한 Y의 범위까지 몇번을 점프할 수 있는지를 확인하는 문제입니다.<br>처음에 range를 제대로 보지못하고 while문으로 처리를 하였는데 시간초과가 나왔습니다.<br>이분탐색으로 풀어야하나라는 생각을 했지만 단순히 생각하면 매우 간단한 문제였습니다.</li><li>전체 범위 - 현재 위치를 빼주고 해당 점프의 value만큼을 나누어주면 몇번뛰었는지 개수를 알 수 있습니다.<br>즉, Y-X -&gt; Y-X / D 의 값으로 나눈값을 처리하였습니다. 나머지가 0이면 해당점프까지만 진행할 수 있고, 나머지가 그것보다 크다면 그것보다 한번더 점프가 가능합니다.</li></ol><blockquote><p>시간복잡도</p></blockquote><p>O(1)</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">frogjmp_lesson03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">10</span>,<span class="number">85</span>,<span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span> Y, <span class="keyword">int</span> D)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        <span class="comment">// 단순히 반복문으로 터지는 로직</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        int jump = X;</span></span><br><span class="line"><span class="comment">        int answer = 0;</span></span><br><span class="line"><span class="comment">        while(jump &lt; Y)&#123;</span></span><br><span class="line"><span class="comment">            jump += D;</span></span><br><span class="line"><span class="comment">            answer++;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        System.out.println("answer = " + answer);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">int</span> jumpValue = Y-X;</span><br><span class="line">        <span class="keyword">int</span> jumpSize = jumpValue / D;</span><br><span class="line">        <span class="keyword">int</span> answer = (jumpSize % D) == <span class="number">0</span>? jumpSize : jumpSize+<span class="number">1</span>;</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-frog-jump&quot;&gt;&lt;a href=&quot;#codility-frog-jump&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-frog-jum
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="TimeComplexity" scheme="http://gwanhyeon.github.io/tags/timecomplexity/"/>
    
  </entry>
  
  <entry>
    <title>Codility Odd Occurrences In Array</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-oddoccurrencesinarray/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-oddoccurrencesinarray/</id>
    <published>2021-02-28T07:08:00.000Z</published>
    <updated>2021-02-28T07:11:24.109Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-oddoccurrencesinarray"><a href="#codility-oddoccurrencesinarray" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-oddoccurrencesinarray"></a> <a href="https://app.codility.com/programmers/lessons/2-arrays/" target="_blank" rel="noopener">Codility OddOccurrencesInArray </a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>map을 사용하여 짝을 이루는지 안이루는지 value를 설정합니다.<br>만약 동일한 값이 존재하면 value+1, 그게 아니면 1</li><li>map에 존재하는 value중에서 홀수인 값의 key값을 리턴해주면 정답이 됩니다.<br>저 같은 경우 홀수값이 아닌 반드시 1의 값일 경우로 조건을 걸었다가 68%에서 터져서 다시 살펴보니 문제를 잘못읽어 홀수에 대한 처리를 정확하게 하지 못했습니다.</li></ol><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OddOccurrencesInArray_lesson02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>&#125;);</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">9</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">9</span>&#125;);</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">42</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; m = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Arrays.sort(A);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!m.containsKey(A[i]))&#123;</span><br><span class="line">                m.put(A[i], <span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> mValue = m.get(A[i]);</span><br><span class="line">                m.put(A[i], mValue+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Integer key :  m.keySet())&#123;</span><br><span class="line">            <span class="keyword">int</span> value = m.get(key);</span><br><span class="line">            <span class="keyword">if</span>(value % <span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">                answer = key;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"answer = "</span> + answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-oddoccurrencesinarray&quot;&gt;&lt;a href=&quot;#codility-oddoccurrencesinarray&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; 
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="Array" scheme="http://gwanhyeon.github.io/tags/array/"/>
    
  </entry>
  
  <entry>
    <title>Codility CycleRotation</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-cycle-rotation/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-cycle-rotation/</id>
    <published>2021-02-28T06:31:06.000Z</published>
    <updated>2021-02-28T08:01:03.156Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-cyclerotation"><a href="#codility-cyclerotation" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-cyclerotation"></a> <a href="https://app.codility.com/programmers/lessons/2-arrays/" target="_blank" rel="noopener">Codility CycleRotation</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ul><li>linkedlist를 사용하여 뒤에있는값들을 shift해주면 간단하게 풀리는 문제.</li><li>만약 배열이 빈값이 들어올 경우 들어온 값을 그대로 리턴해주면 됩니다. 케이스하나에 걸려버렸습니다.</li></ul><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicRotation_lesson02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">6</span>&#125;,<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        LinkedList&lt;Integer&gt; linkedList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(A.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> A;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            linkedList.add(A[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> last = linkedList.removeLast();</span><br><span class="line">            linkedList.addFirst(last);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[linkedList.size()];</span><br><span class="line">        <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer integer : linkedList) &#123;</span><br><span class="line">            answer[idx++] = integer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-cyclerotation&quot;&gt;&lt;a href=&quot;#codility-cyclerotation&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="linkedlist" scheme="http://gwanhyeon.github.io/tags/linkedlist/"/>
    
      <category term="Array" scheme="http://gwanhyeon.github.io/tags/array/"/>
    
  </entry>
  
  <entry>
    <title>Codility Binarygap</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-binary-gap/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-binary-gap/</id>
    <published>2021-02-28T05:52:46.000Z</published>
    <updated>2021-02-28T08:00:51.694Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-binary-gap"><a href="#codility-binary-gap" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-binary-gap"></a> <a href="https://app.codility.com/programmers/lessons/2-arrays/" target="_blank" rel="noopener">Codility Binary Gap</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>이진수를 활용하여 이진수의 1의 위치에서 가장 최댓값을 구하는 간단한 문제였습니다. 약 20분정도 소요된 문제입니다. 처음에는 Integer.binaryString() 함수를 사용하지 않고 직접 구현을 하였는데, 불 필요해보였습니다. reverse()도 따로해줘야하고 시간복잡도면에서 뛰어나지 않다고 생각을 하게 되었습니다.</p><ol><li>N의 값 이진수로 변환합니다.</li><li>이진수로 변환후 1의 위치를 리스트에 저장합니다.</li><li>리스트에 담긴 위치별로 substring을 사용하여 값에 대한 length를 체크하여 최댓값을 구해줍니다.</li></ol><p>시간복잡도: O(N)</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">binaryGap_lesson01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">9</span>);</span><br><span class="line">        solution(<span class="number">1162</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        <span class="comment">/* 직접 구현하기 이진수로 변경</span></span><br><span class="line"><span class="comment">        List&lt;Integer&gt; arrList = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">                while(N &gt; 0)&#123;</span></span><br><span class="line"><span class="comment">                    int div = N % 2;</span></span><br><span class="line"><span class="comment">                    N = N / 2;</span></span><br><span class="line"><span class="comment">                    arrList.add(div);</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">                Collections.reverse(arrList);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        String binaryStr = Integer.toBinaryString(N);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        List&lt;Integer&gt; arrList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;binaryStr.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(binaryStr.charAt(i) == <span class="string">'1'</span>)&#123;</span><br><span class="line">                cnt++;</span><br><span class="line">                arrList.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(cnt &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrList.size() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                String subStr = binaryStr.substring(arrList.get(i), arrList.get(i+<span class="number">1</span>));</span><br><span class="line">                answer = Math.max(answer, subStr.length()-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//System.out.println("answer = " + answer);</span></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-binary-gap&quot;&gt;&lt;a href=&quot;#codility-binary-gap&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-binary
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="binary" scheme="http://gwanhyeon.github.io/tags/binary/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Bucket Aggregation(버켓 어그리게이션)</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-bucket-aggregation/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-bucket-aggregation/</id>
    <published>2021-02-19T07:00:40.000Z</published>
    <updated>2021-02-19T08:13:04.879Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutigseoci-bucket-aggregation"><a href="#elk-elraseutigseoci-bucket-aggregation" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱서치-bucket-aggregation"></a> ELK  엘라스틱서치 Bucket Aggregation</h1><blockquote><p>Bucket Aggregation이란?</p></blockquote><p>집계는 데이터를 그룹화하고 통계치를 얻는 기능입니다. SQL GROUP BY 및 SQL 집계 기능과 대략 같다고 보면 가장 쉽게 이해할 수 있습니다. Elasticsearch에서는 하나의 응답에서 검색 적중을 반환하는 검색을 실행함과 동시에 그와는 별도로 집계 결과를 반환할 수 있습니다. 즉 간결한 API를 사용하여 쿼리와 여러 집계를 실행하고 두 작업(또는 둘 중 하나)의 결과를 한꺼번에 얻어 네트워크 왕복을 피할 수 있다는 점에서 강력하고 효율적입니다.</p><p>요약하면, 평균을 구할때는 Matrix Aggregation을 사용하고 Bucket Aggregation은 그룹 및 통계치 기능하는 종류중 하나입니다.</p><blockquote><p>AGGREGATIONS STRUCTURE(어그리게이션 구조)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GET &lt;인덱스명&gt;/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    … &lt;쿼리 구문&gt; …</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"&lt;임의의 aggregation 1&gt;"</span>: &#123;</span><br><span class="line">      <span class="string">"&lt;aggregation 종류&gt;"</span>: &#123;</span><br><span class="line">        … &lt;aggreagation 구문&gt; …</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"&lt;임의의 aggregation 2&gt;"</span>: &#123;</span><br><span class="line">      <span class="string">"&lt;aggregation 종류&gt;"</span>: &#123;</span><br><span class="line">        … &lt;aggreagation 구문&gt; …</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Aggregation 에는 크게 Metrics 그리고 Bucket 두 종류가 있습니다. Aggregations 구문이나 옵션에 metrics 이거나 bucket 이라고 따로 명시를 하지는 않습니다. Aggregation 종류들 중 숫자 또는 날짜 필드의 값을 가지고 계산을 하는 aggregation 들을 metrics aggregation 이라고 분류하고, 범위나 keyword 값 등을 가지고 도큐먼트들을 그룹화 하는 aggregation 들을 bucket aggregation 이라고 분류 합니다.</p><blockquote><p>basketball 인덱스 생성</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT -H &apos;Content-Type:application/json&apos; localhost:9200/basketball</span><br><span class="line">&#123;&quot;acknowledged&quot;:true,&quot;shards_acknowledged&quot;:true,&quot;index&quot;:&quot;basketball&quot;&#125;%</span><br></pre></td></tr></table></figure><blockquote><p>baseketball 인덱스 매핑 조회<br>해당 basketball_mapping JSON값들을 확인해보겠습니다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vi</span> basketball_mapping.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  2     <span class="string">"record"</span> : &#123;</span><br><span class="line">  3         <span class="string">"properties"</span> : &#123;</span><br><span class="line">  4             <span class="string">"team"</span> : &#123;</span><br><span class="line">  5                 <span class="string">"type"</span> : <span class="string">"text"</span>,</span><br><span class="line">  6                 <span class="string">"fielddata"</span> : <span class="literal">true</span></span><br><span class="line">  7             &#125;,</span><br><span class="line">  8             <span class="string">"name"</span> : &#123;</span><br><span class="line">  9                 <span class="string">"type"</span> : <span class="string">"text"</span>,</span><br><span class="line"> 10                 <span class="string">"fielddata"</span> : <span class="literal">true</span></span><br><span class="line"> 11             &#125;,</span><br><span class="line"> 12             <span class="string">"points"</span> : &#123;</span><br><span class="line"> 13                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 14             &#125;,</span><br><span class="line"> 15             <span class="string">"rebounds"</span> : &#123;</span><br><span class="line"> 16                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 17             &#125;,</span><br><span class="line"> 18             <span class="string">"assists"</span> : &#123;</span><br><span class="line"> 19                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 20             &#125;,</span><br><span class="line"> 21             <span class="string">"blocks"</span> : &#123;</span><br><span class="line"> 22                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 23             &#125;,</span><br><span class="line"> 24             <span class="string">"submit_date"</span> : &#123;</span><br><span class="line"> 25                 <span class="string">"type"</span> : <span class="string">"date"</span>,</span><br><span class="line"> 26                 <span class="string">"format"</span> : <span class="string">"yyyy-MM-dd"</span></span><br><span class="line"> 27             &#125;</span><br><span class="line"> 28         &#125;</span><br><span class="line"> 29     &#125;</span><br><span class="line"> 30 &#125;</span><br><span class="line">~</span><br></pre></td></tr></table></figure><blockquote><p>baseketball 매핑 타입 삽입</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/basketball/record/_mapping&amp;include_type_name=true'</span> -d @basketball_mapping.json</span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"_mapping&amp;include_type_name=true"</span>,<span class="string">"_version"</span>:5,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:12,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p><strong>의미</strong></p><p>basketball: Index<br>record: Type<br>_mapping: Mapping<br>-d: direct</p><blockquote><p>baseketball documents 삽입</p></blockquote><p><strong>twoteam_basketball.json</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"1"</span> &#125;     &#125;</span><br><span class="line"> 2 &#123;<span class="string">"team"</span> : <span class="string">"Chicago"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>, <span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> :     3,<span class="string">"assists"</span> : 4, <span class="string">"blocks"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;</span><br><span class="line"> 3 &#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"2"</span> &#125;     &#125;</span><br><span class="line"> 4 &#123;<span class="string">"team"</span> : <span class="string">"Chicago"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,<span class="string">"points"</span> : 20,<span class="string">"rebounds"</span> :     5,<span class="string">"assists"</span> : 8, <span class="string">"blocks"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"1996-10-13"</span>&#125;</span><br><span class="line"> 5 &#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"3"</span> &#125;     &#125;</span><br><span class="line"> 6 &#123;<span class="string">"team"</span> : <span class="string">"LA"</span>,<span class="string">"name"</span> : <span class="string">"Kobe Bryant"</span>,<span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> : 2,<span class="string">"assis    ts"</span> : 8, <span class="string">"blocks"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2014-10-13"</span>&#125;</span><br><span class="line"> 7 &#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"4"</span> &#125;     &#125;</span><br><span class="line"> 8 &#123;<span class="string">"team"</span> : <span class="string">"LA"</span>,<span class="string">"name"</span> : <span class="string">"Kobe Bryant"</span>,<span class="string">"points"</span> : 40,<span class="string">"rebounds"</span> : 4,<span class="string">"assis    ts"</span> : 8, <span class="string">"blocks"</span> : 6, <span class="string">"submit_date"</span> : <span class="string">"2014-11-13"</span>&#125;</span><br></pre></td></tr></table></figure><p><strong>document삽입</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_bulk'</span> --data-binary @twoteam_basketball.json</span><br><span class="line">&#123;<span class="string">"took"</span>:411,<span class="string">"errors"</span>:<span class="literal">false</span>,<span class="string">"items"</span>:[&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:1,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"2"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:2,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"3"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:3,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"4"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:4,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;]&#125;%</span><br></pre></td></tr></table></figure><blockquote><p>Term Aggregation(GROUP BY TEAM)</p></blockquote><p><strong>terms_aggs.json 데이터 확인</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vi terms_aggs.json</span><br><span class="line"></span><br><span class="line">1 &#123;</span><br><span class="line">2     <span class="string">"size"</span> : 0,</span><br><span class="line">3     <span class="string">"aggs"</span> : &#123;</span><br><span class="line">4         <span class="string">"players"</span> : &#123;</span><br><span class="line">5             <span class="string">"terms"</span> : &#123;</span><br><span class="line">6                 <span class="string">"field"</span> : <span class="string">"team"</span></span><br><span class="line">7             &#125;</span><br><span class="line">8         &#125;</span><br><span class="line">9     &#125;</span><br><span class="line">10 &#125;</span><br></pre></td></tr></table></figure><p><strong>terms_aggs.json 조회</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$curl -XGET -H &apos;Content-Type:application/json&apos; &apos;localhost:9200/_search?pretty&apos; --data-binary @terms_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;took&quot; : 880,</span><br><span class="line">  &quot;timed_out&quot; : false,</span><br><span class="line">  &quot;_shards&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : 7,</span><br><span class="line">    &quot;successful&quot; : 6,</span><br><span class="line">    &quot;skipped&quot; : 0,</span><br><span class="line">    &quot;failed&quot; : 1,</span><br><span class="line">    &quot;failures&quot; : [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;shard&quot; : 0,</span><br><span class="line">        &quot;index&quot; : &quot;basketball&quot;,</span><br><span class="line">        &quot;node&quot; : &quot;gsruIbFGTQmlTUIk7jr1Aw&quot;,</span><br><span class="line">        &quot;reason&quot; : &#123;</span><br><span class="line">          &quot;type&quot; : &quot;illegal_argument_exception&quot;,</span><br><span class="line">          &quot;reason&quot; : &quot;Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [team] in order to load field data by uninverting the inverted index. Note that this can use significant memory.&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;hits&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : &#123;</span><br><span class="line">      &quot;value&quot; : 48,</span><br><span class="line">      &quot;relation&quot; : &quot;eq&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;max_score&quot; : null,</span><br><span class="line">    &quot;hits&quot; : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;aggregations&quot; : &#123;</span><br><span class="line">    &quot;players&quot; : &#123;</span><br><span class="line">      &quot;doc_count_error_upper_bound&quot; : 0,</span><br><span class="line">      &quot;sum_other_doc_count&quot; : 0,</span><br><span class="line">      &quot;buckets&quot; : [ ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Aggregation을 조회해온것을 확인할 수 있습니다.</p><blockquote><p>AGGS(STATS GROUP BT TEAM)</p></blockquote><p><strong>vi stats_by_team.json 데이터확인</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vi</span> stat_by_team.json</span><br><span class="line">1 &#123;</span><br><span class="line"> 2     <span class="string">"size"</span> : 0,</span><br><span class="line"> 3     <span class="string">"aggs"</span> : &#123;</span><br><span class="line"> 4         <span class="string">"team_stats"</span> : &#123;</span><br><span class="line"> 5             <span class="string">"terms"</span> : &#123;</span><br><span class="line"> 6                 <span class="string">"field"</span> : <span class="string">"team"</span></span><br><span class="line"> 7             &#125;,</span><br><span class="line"> 8             <span class="string">"aggs"</span> : &#123;</span><br><span class="line"> 9                 <span class="string">"stats_score"</span> : &#123;</span><br><span class="line">10                     <span class="string">"stats"</span> : &#123;</span><br><span class="line">11                         <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">12                     &#125;</span><br><span class="line">13                 &#125;</span><br><span class="line">14             &#125;</span><br><span class="line">15         &#125;</span><br><span class="line">16     &#125;</span><br><span class="line">17 &#125;</span><br></pre></td></tr></table></figure><blockquote><p>Aggregation 내용 확인하기</p></blockquote><p>size는 보기편하기위해서 넣어준 속성이되고, 팀별로 documents들을 묶고, 나머지 어그리제이션을 사용하여 점수별로 Stat를 한번 표시해라 라는 의미가 됩니다. 각 팀별로 통계분석을 도출하면 되는 뜻입니다.</p><p><strong>AGGS(STATS GROUP BT TEAM)조회</strong></p><blockquote><p>결과값 데이터가 제대로 들어가지않은부분이 있어서 다시 수정 필요.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?q=points&amp;pretty'</span> --data-binary @stats_by_team.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 44,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 6,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 1,</span><br><span class="line">    <span class="string">"failures"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"shard"</span> : 0,</span><br><span class="line">        <span class="string">"index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"node"</span> : <span class="string">"gsruIbFGTQmlTUIk7jr1Aw"</span>,</span><br><span class="line">        <span class="string">"reason"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"illegal_argument_exception"</span>,</span><br><span class="line">          <span class="string">"reason"</span> : <span class="string">"Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [team] in order to load field data by uninverting the inverted index. Note that this can use significant memory."</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 0,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"team_stats"</span> : &#123;</span><br><span class="line">      <span class="string">"doc_count_error_upper_bound"</span> : 0,</span><br><span class="line">      <span class="string">"sum_other_doc_count"</span> : 0,</span><br><span class="line">      <span class="string">"buckets"</span> : [ ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Reference</p></blockquote><p><a href="https://esbook.kimjmin.net/08-aggregations/8.2-bucket-aggregations" target="_blank" rel="noopener">https://esbook.kimjmin.net/08-aggregations/8.2-bucket-aggregations</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutigseoci-bucket-aggregation&quot;&gt;&lt;a href=&quot;#elk-elraseutigseoci-bucket-aggregation&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;mar
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="Aggregation" scheme="http://gwanhyeon.github.io/tags/aggregation/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Metric Aggregation(메트릭 어그리게이션)</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-metric-aggregation/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-metric-aggregation/</id>
    <published>2021-02-19T06:12:31.000Z</published>
    <updated>2021-02-19T07:11:37.435Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation"><a href="#elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#엘라스틱서치-metric-어그리게이션metric-aggregation"></a> 엘라스틱서치 Metric 어그리게이션(Metric Aggregation)</h1><blockquote><p>Aggregation ?</p></blockquote><p>Elasticsearch 는 검색엔진으로 개발되었지만 지금은 로그분석을 비롯해 다양한 목적의데이터 시스템으로 사용되고 있습니다. Elasticsearch가 이렇게 다양한 용도로 활용이 될 수 있는 이유는 데이터를 단순히 검색만 하는 것이 아니라 여러가지 연산을 할 수 있는 Aggregation 기능이 있기 때문입니다</p><blockquote><p>메트릭 어그리게이션(Metric Aggregation)?<br>가장 흔하게 사용되는 metrics aggregations 은 min, max, sum, avg aggregation 입니다. 순서대로 명시한 필드의 최소, 최대, 합, 평균 값을 가져오는 aggregation 입니다.<br>엘라스틱서치안에 있는 Document안에 있는 값을 조합을 통하여 값을 핸들링할때 사용하는 컨셉이라고 할 수 있습니다.</p></blockquote><blockquote><p>메트릭 어그리게이션(Metric Aggregation) 구조</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET my_stations/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: 0,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"all_passangers"</span>: &#123;</span><br><span class="line">      <span class="string">"sum"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"passangers"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Data</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"1"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>, <span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> : 3,<span class="string">"assists"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"2"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,<span class="string">"points"</span> : 20,<span class="string">"rebounds"</span> : 5,<span class="string">"assists"</span> : 8, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Data Insert</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_bulk'</span> --data-binary @simple_basketball.json</span><br><span class="line">&#123;<span class="string">"took"</span>:58,<span class="string">"errors"</span>:<span class="literal">false</span>,<span class="string">"items"</span>:[&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:2,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:2,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:200&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"2"</span>,<span class="string">"_version"</span>:2,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:3,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:200&#125;&#125;]&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같은 데이터를 -XPOST 옵션과 --data-binary를 통해 넣어주겠습니다.<br>평균값을 넣어주는 json파일의 형식을 조회해오면 다음과 같은 값들을 넣을 수 있습니다.</p><blockquote><p>평균값 json 조회</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET localhost:9200/_search\?pretty --data-binary @avg_point_aggs.json</span><br></pre></td></tr></table></figure><blockquote><p>평균값 json 조회 결과</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @avg_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 21,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"avg_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 25.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 평균값을 구한것을 확인할 수 있습니다.</p><blockquote><p>최댓값 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"max_score"</span> : &#123;</span><br><span class="line">            <span class="string">"max"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>최댓값 조회</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @max_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 36,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"max_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 30.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 최댓값을 구한것을 확인할 수 있습니다.</p><blockquote><p>최솟값 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"min_score"</span> : &#123;</span><br><span class="line">            <span class="string">"min"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>최솟값 조회</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @min_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 268,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"min_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 20.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 최솟값을 구한것을 확인할 수 있습니다.</p><blockquote><p>모든합(SUM) 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"sum_score"</span> : &#123;</span><br><span class="line">            <span class="string">"sum"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>모든합 조회</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @sum_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 17,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"sum_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 모든합을 구한것을 확인할 수 있습니다.</p><blockquote><p>모든값 목록 (STAT) 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"stats_score"</span> : &#123;</span><br><span class="line">            <span class="string">"stats"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>모든값 목록 (STAT) 구하기</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @stat_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 66,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"stats_score"</span> : &#123;</span><br><span class="line">      <span class="string">"count"</span> : 2,</span><br><span class="line">      <span class="string">"min"</span> : 20.0,</span><br><span class="line">      <span class="string">"max"</span> : 30.0,</span><br><span class="line">      <span class="string">"avg"</span> : 25.0,</span><br><span class="line">      <span class="string">"sum"</span> : 50.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 모든 연사결과의 목록을 구한것을 확인할 수 있습니다.</p><blockquote><p>Reference</p></blockquote><p><a href="https://esbook.kimjmin.net/08-aggregations/8.1-metrics-aggregations" target="_blank" rel="noopener">https://esbook.kimjmin.net/08-aggregations/8.1-metrics-aggregations</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation&quot;&gt;&lt;a href=&quot;#elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation&quot; clas
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="MetricAggregation" scheme="http://gwanhyeon.github.io/tags/metricaggregation/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Search Function</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-search-function/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-search-function/</id>
    <published>2021-02-19T05:54:27.000Z</published>
    <updated>2021-02-19T08:15:05.171Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutig-seoci-searchfunction"><a href="#elk-elraseutig-seoci-searchfunction" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱-서치-searchfunction"></a> ELK 엘라스틱 서치 SearchFunction</h1><p>이번에 포스팅에서는 ELK의 SearchFunction에 대해서 살펴보겠습니다.</p><blockquote><p>Data</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_bulk'</span> --dat</span><br><span class="line">a-binary @simple_basketball.json</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">"took"</span>:1391,<span class="string">"errors"</span>:<span class="literal">false</span>,<span class="string">"items"</span>:[&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:0,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"2"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:1,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;]&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같은 데이터를 가지고 확인을 해보겠습니다. 그러면 두개의 Document가 삽입되게 됩니다.</p><blockquote><p>Search</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET localhost:9200/basketball/record/_search\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 80,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 1,</span><br><span class="line">    <span class="string">"successful"</span> : 1,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 2,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : 1.0,</span><br><span class="line">    <span class="string">"hits"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"record"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"_score"</span> : 1.0,</span><br><span class="line">        <span class="string">"_source"</span> : &#123;</span><br><span class="line">          <span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,</span><br><span class="line">          <span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,</span><br><span class="line">          <span class="string">"points"</span> : 30,</span><br><span class="line">          <span class="string">"rebounds"</span> : 3,</span><br><span class="line">          <span class="string">"assists"</span> : 4,</span><br><span class="line">          <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"record"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"2"</span>,</span><br><span class="line">        <span class="string">"_score"</span> : 1.0,</span><br><span class="line">        <span class="string">"_source"</span> : &#123;</span><br><span class="line">          <span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,</span><br><span class="line">          <span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,</span><br><span class="line">          <span class="string">"points"</span> : 20,</span><br><span class="line">          <span class="string">"rebounds"</span> : 5,</span><br><span class="line">          <span class="string">"assists"</span> : 8,</span><br><span class="line">          <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 데이터가 정상적으로 들어가고 Documents가 조회되는것들을 확인할 수 있습니다.</p><blockquote><p>SEARCH -URI</p></blockquote><p>-URI 옵션을 사용하여 제가 조회할 데이터들을 조회할 수 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET <span class="string">'localhost:9200/basketball/record/_search?q=points:30&amp;pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 18,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 1,</span><br><span class="line">    <span class="string">"successful"</span> : 1,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 1,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : 1.0,</span><br><span class="line">    <span class="string">"hits"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"record"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"_score"</span> : 1.0,</span><br><span class="line">        <span class="string">"_source"</span> : &#123;</span><br><span class="line">          <span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,</span><br><span class="line">          <span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,</span><br><span class="line">          <span class="string">"points"</span> : 30,</span><br><span class="line">          <span class="string">"rebounds"</span> : 3,</span><br><span class="line">          <span class="string">"assists"</span> : 4,</span><br><span class="line">          <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SEARCH - REQUEST BODY</p></blockquote><p>이번에 살펴볼 옵션은 -REQUEST BODY옵션입니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> localhost:9200/basketball/record/_search -d <span class="string">'</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">"query" : &#123;</span></span><br><span class="line"><span class="string">"term" : &#123;"points" : 30&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;'</span></span><br><span class="line">&#123;<span class="string">"took"</span>:16,<span class="string">"timed_out"</span>:<span class="literal">false</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:1,<span class="string">"successful"</span>:1,<span class="string">"skipped"</span>:0,<span class="string">"failed"</span>:0&#125;,<span class="string">"hits"</span>:&#123;<span class="string">"total"</span>:&#123;<span class="string">"value"</span>:1,<span class="string">"relation"</span>:<span class="string">"eq"</span>&#125;,<span class="string">"max_score"</span>:1.0,<span class="string">"hits"</span>:[&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_score"</span>:1.0,<span class="string">"_source"</span>:&#123;<span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>, <span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> : 3,<span class="string">"assists"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;&#125;]&#125;&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같이 직접 REQUEST BODY를 사용하여 값을 조회해오는모습을 볼 수 있습니다.<br>-d는 Direct로 처리하기 위한 옵션입니다.</p><blockquote><p>참고사항</p></blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-body.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-body.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutig-seoci-searchfunction&quot;&gt;&lt;a href=&quot;#elk-elraseutig-seoci-searchfunction&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownI
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="SearchFunction" scheme="http://gwanhyeon.github.io/tags/searchfunction/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱 서치 Mapping</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-mapping/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-mapping/</id>
    <published>2021-02-19T05:11:20.000Z</published>
    <updated>2021-02-19T05:39:44.746Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutigseoci-mapping"><a href="#elk-elraseutigseoci-mapping" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱서치-mapping"></a> ELK 엘라스틱서치 MAPPING</h1><p>ELK에서 말하는 개념은 RDS에서 스키마와 동일한 의미를 가지고 있습니다.<br>Mapping없이 ELK 데이터를 넣는것은 상당히 위험하고 Document Mapping이 되어있지않다면 Date, String과 같은 구별이 가지않을 수 있습니다.</p><p>잘못지정된 타입같은 경우 Kibana를 사용하여 데이터를 분리하여 보여주고 싶거나 데이터값의 평균값을 구할때 제대로된 계산이 처리되지 않을 수 있습니다.</p><blockquote><p>Mapping JSON</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"class"</span> : &#123;</span><br><span class="line">        <span class="string">"properties"</span> : &#123;</span><br><span class="line">            <span class="string">"title"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"professor"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"major"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"semester"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"student_count"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"unit"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"rating"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"submit_date"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"date"</span>,</span><br><span class="line">                <span class="string">"format"</span>: <span class="string">"yyyy-MM-dd"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"school_location"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"geo_point"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>현재 Mapping 관계를 사용해보기 위해서 사용해볼 json형식은 다음과 같습니다.<br>Type:geo_point 같은 경우 Kibana Data시각화할때, 지도위에서 학교위치를 직접 표시할 수 있습니다. Type이 Date Format을 사용할경우 날짜별로 시각화를 처리할 수도 있습니다.</p><p>이제 다음과 같이 이전에 사용하였던 classes인덱스를 삭제해주고 다시 classes라는 인덱스를 재생성하여 Mapping 처리를  알아 보도록 하겠습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XDELETE http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;%</span><br><span class="line"> kgh  ~</span><br><span class="line"><span class="variable">$curl</span> -XPUT http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>,<span class="string">"shards_acknowledged"</span>:<span class="literal">true</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;%</span><br><span class="line"> kgh  ~</span><br><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"classes"</span> : &#123;</span><br><span class="line">    <span class="string">"aliases"</span> : &#123; &#125;,</span><br><span class="line">    <span class="string">"mappings"</span> : &#123; &#125;,</span><br><span class="line">    <span class="string">"settings"</span> : &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"routing"</span> : &#123;</span><br><span class="line">          <span class="string">"allocation"</span> : &#123;</span><br><span class="line">            <span class="string">"include"</span> : &#123;</span><br><span class="line">              <span class="string">"_tier_preference"</span> : <span class="string">"data_content"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"number_of_shards"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"provided_name"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"creation_date"</span> : <span class="string">"1613711830633"</span>,</span><br><span class="line">        <span class="string">"number_of_replicas"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"uuid"</span> : <span class="string">"q99TJFowRqu7LFB1DjowZQ"</span>,</span><br><span class="line">        <span class="string">"version"</span> : &#123;</span><br><span class="line">          <span class="string">"created"</span> : <span class="string">"7110199"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 인덱스를 삭제하고 재 생성한것을 보실 수 있습니다. 여기서 중요한점은<br>mapping이 현재 비어져있다는것입니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT -H <span class="string">'Content-Type:application/json'</span> <span class="string">'http://localhost:9200/classes/class/_mapping?include_type_name=true'</span> -d @classesRating_mapping.json</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;%</span><br></pre></td></tr></table></figure><p>Elasticsearch 6.0 will show this error. 가 발생하였는데, 제가 지금쓰고 있는 버전은 7.11버전을 사용중입니다.<br>즉, elasticsearch 7.x 버전부터는 curl 리퀘스트에서 헤더를 명확히 설정해주어야하고 또 mappign을 생성할 때에는 include_type_name을 true로 설정해주어야합니다.<br>이에 대해서 원인을 찾아보니 elasticsearch가 mapping 타입 중 string을 삭제하고 text로 변경하여 사용하고있다고 합니다.</p><p>버전별로 생기는 미세한 차이점을 잘 체크하면서 변경된 사항을 잘 확인해야될 것 같습니다.</p><p><a href="https://stackoverflow.com/questions/47452770/no-handler-for-type-string-declared-on-field-name" target="_blank" rel="noopener">https://stackoverflow.com/questions/47452770/no-handler-for-type-string-declared-on-field-name</a></p><blockquote><p>이제 다음과 같이 ELK 매핑이 되었는지 확인을 해보겠습니다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"classes"</span> : &#123;</span><br><span class="line">    <span class="string">"aliases"</span> : &#123; &#125;,</span><br><span class="line">    <span class="string">"mappings"</span> : &#123;</span><br><span class="line">      <span class="string">"properties"</span> : &#123;</span><br><span class="line">        <span class="string">"major"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"professor"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"rating"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"school_location"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"geo_point"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"semester"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"student_count"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"submit_date"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"date"</span>,</span><br><span class="line">          <span class="string">"format"</span> : <span class="string">"yyyy-MM-dd"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"title"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"unit"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"settings"</span> : &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"routing"</span> : &#123;</span><br><span class="line">          <span class="string">"allocation"</span> : &#123;</span><br><span class="line">            <span class="string">"include"</span> : &#123;</span><br><span class="line">              <span class="string">"_tier_preference"</span> : <span class="string">"data_content"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"number_of_shards"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"provided_name"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"creation_date"</span> : <span class="string">"1613711830633"</span>,</span><br><span class="line">        <span class="string">"number_of_replicas"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"uuid"</span> : <span class="string">"q99TJFowRqu7LFB1DjowZQ"</span>,</span><br><span class="line">        <span class="string">"version"</span> : &#123;</span><br><span class="line">          <span class="string">"created"</span> : <span class="string">"7110199"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이제 이런식으로 매핑을 진행하면 시각화에서 조금더 유연하게 처리가 가능하게 됩니다.다시 Document에 값을 집어 넣어보도록 하겠습니다.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H 'Content-Type:application/json' http://localhost:9200/_bulk\?pretty --data-binary @Classes.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"took"</span> : <span class="number">1703</span>,</span><br><span class="line">  <span class="attr">"errors"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"items"</span> : [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"2"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"3"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"5"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">3</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"6"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">4</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"7"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"8"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">6</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"9"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">7</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"10"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">8</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"11"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">9</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"12"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">10</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"13"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">11</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"14"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">12</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"15"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">13</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"16"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">14</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"17"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">15</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"18"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">16</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"19"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">17</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"20"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">18</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"21"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">19</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"22"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">20</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"23"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">21</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"24"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">22</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"25"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">23</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>최종 출력</p></blockquote><p>이제 제대로 값들이 들어간것을 확인할 수 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 1,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 0,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [</span><br><span class="line">      <span class="string">"spring"</span>,</span><br><span class="line">      <span class="string">"fall"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5,</span><br><span class="line">    <span class="string">"submit_date"</span> : <span class="string">"2016-01-02"</span>,</span><br><span class="line">    <span class="string">"school_location"</span> : &#123;</span><br><span class="line">      <span class="string">"lat"</span> : 36.0,</span><br><span class="line">      <span class="string">"lon"</span> : -120.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutigseoci-mapping&quot;&gt;&lt;a href=&quot;#elk-elraseutigseoci-mapping&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="Mapping" scheme="http://gwanhyeon.github.io/tags/mapping/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 BULK</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-bulk/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-bulk/</id>
    <published>2021-02-19T04:57:51.000Z</published>
    <updated>2021-02-19T05:08:19.227Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutigseoci-bulk"><a href="#elk-elraseutigseoci-bulk" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱서치-bulk"></a> ELK 엘라스틱서치 BULK</h1><blockquote><p>Elastic BULK란 무엇일까요?</p></blockquote><p>간단히 말해 여러개의 Document를 한번에 ElasticSearch에 넣는 방식을 말합니다.</p><p>그러면 바로 실습으로 알아보도록 하겠습니다.</p><p>제가 사용할 실습 json파일은 다음과 같습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"1"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,<span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 100,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-01-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"2"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Network"</span>,<span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-02-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"3"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Operating System"</span>,<span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-03-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"5"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 40,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-04-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.00, <span class="string">"lon"</span> : -112.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"6"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Network"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"summer"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-02-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"7"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Operating System"</span>,<span class="string">"Professor"</span> : <span class="string">"Jeniffer Anderson"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 1, <span class="string">"submit_date"</span> : <span class="string">"2016-11-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"8"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Algorithm"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 80,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-10-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"9"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Data Structure"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-07-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"10"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Computer Graphic"</span>,<span class="string">"Professor"</span> : <span class="string">"Jeniffer Anderson"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 60,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"11"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Music Fundamental"</span>,<span class="string">"Professor"</span> : <span class="string">"Jay Z"</span>,<span class="string">"major"</span> : <span class="string">"Music"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 100,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-05-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"12"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Vocal Techniques"</span>,<span class="string">"Professor"</span> : <span class="string">"Beyonce"</span>,<span class="string">"major"</span> : <span class="string">"Music"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-11-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"13"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Guitar Techiniques"</span>,<span class="string">"Professor"</span> : <span class="string">"Eric Clapton"</span>,<span class="string">"major"</span> : <span class="string">"Music"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-03-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"14"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Finance"</span>,<span class="string">"Professor"</span> : <span class="string">"Bill Gates"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-01-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"15"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Marketing"</span>,<span class="string">"Professor"</span> : <span class="string">"Bill Gates"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 60,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-01-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"16"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Accounting Information Systems"</span>,<span class="string">"Professor"</span> : <span class="string">"Tom Cruise"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 100,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 1, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"17"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Individual Taxation"</span>,<span class="string">"Professor"</span> : <span class="string">"Tom Cruise"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 1,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-08-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.32, <span class="string">"lon"</span> : -94.74&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"18"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Auditing"</span>,<span class="string">"Professor"</span> : <span class="string">"Victoria Park"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-09-13"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.32, <span class="string">"lon"</span> : -94.74&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"19"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Cell Biology"</span>,<span class="string">"Professor"</span> : <span class="string">"Anjella Kim"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 40,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-02-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.32, <span class="string">"lon"</span> : -94.74&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"20"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Physiology"</span>,<span class="string">"Professor"</span> : <span class="string">"Jack Berk"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"summer"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 32.69, <span class="string">"lon"</span> : -99.44&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"21"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Neuroscience"</span>,<span class="string">"Professor"</span> : <span class="string">"Jihee Yang"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-06-03"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 32.69, <span class="string">"lon"</span> : -99.44&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"22"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Immunology"</span>,<span class="string">"Professor"</span> : <span class="string">"Meredith Lee"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-06-21"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 32.69, <span class="string">"lon"</span> : -99.44&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"23"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Genetics"</span>,<span class="string">"Professor"</span> : <span class="string">"David Pollack"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-06-30"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 28.22, <span class="string">"lon"</span> : -81.87&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"24"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Biochemistry"</span>,<span class="string">"Professor"</span> : <span class="string">"John Miller"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-01-11"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 28.22, <span class="string">"lon"</span> : -81.87&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"25"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Anatomy"</span>,<span class="string">"Professor"</span> : <span class="string">"Tom Johnson"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 28.22, <span class="string">"lon"</span> : -81.87&#125;&#125;</span><br></pre></td></tr></table></figure><p>Bulk 파일을 보면 Meta Information의 형식으로 가지고 있습니다.</p><blockquote><p>Bulk를 사용하여 값들을 Document에 삽입해보도록 하겠습니다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> http://localhost:9200/_bulk/\?pretty --data-binary @classes.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 591,</span><br><span class="line">  <span class="string">"errors"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"items"</span> : [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 7,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"updated"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 6,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 200</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"2"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 7,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"3"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 8,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"5"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 9,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"6"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 10,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"7"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 11,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"8"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 12,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"9"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 13,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"10"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 14,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"11"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 15,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"12"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 16,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"13"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 17,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"14"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 18,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"15"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 19,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"16"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 20,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"17"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 21,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"18"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 22,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"19"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 23,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"20"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 24,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"21"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 25,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"22"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 26,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"23"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 27,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"24"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 28,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"25"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 29,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같은형식으로 bulk파일들이 정상적으로 document에 들어간것을 확인할 수 있습니다</p><blockquote><p>Bulk Document 조회</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 7,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 6,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [</span><br><span class="line">      <span class="string">"spring"</span>,</span><br><span class="line">      <span class="string">"fall"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5,</span><br><span class="line">    <span class="string">"submit_date"</span> : <span class="string">"2016-01-02"</span>,</span><br><span class="line">    <span class="string">"school_location"</span> : &#123;</span><br><span class="line">      <span class="string">"lat"</span> : 36.0,</span><br><span class="line">      <span class="string">"lon"</span> : -120.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 첫번째에 들어있는 document값을 정상적으로 조회한것을 확인할 수 있습니다.<br>여기서 주의할점은 pretty연산을 진행하기전에 앞에 \를 붙여실행해야 정상적으로 원하는 결과를 볼 수 있습니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutigseoci-bulk&quot;&gt;&lt;a href=&quot;#elk-elraseutigseoci-bulk&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#elk-엘
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="BULK" scheme="http://gwanhyeon.github.io/tags/bulk/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Data CRUD</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-crud/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-crud/</id>
    <published>2021-02-19T04:18:53.000Z</published>
    <updated>2021-02-19T08:13:15.888Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-delete"><a href="#elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-delete" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#엘라스틱서치-데이터-입력-조회-삭제-get-post-put-delete"></a> 엘라스틱서치 데이터 입력 조회 삭제 (GET, POST, PUT, DELETE)</h1><p>이번 시간에 살펴볼 내용은 엘라스틱서치에서 Data CRUD를 실습해보는 시간을 가져보겠습니다.</p><p>그전에 엘라스틱서피와 RDS와의 차이점을 살펴보겠습니다.</p><blockquote><p>ELASTIC SEARCH VS RDS</p></blockquote><table><thead><tr><th>Elastic Search</th><th style="text-align:center">RDS</th></tr></thead><tbody><tr><td><code>Index</code></td><td style="text-align:center">Database</td></tr><tr><td><code>Type</code></td><td style="text-align:center">Table</td></tr><tr><td><code>Document</code></td><td style="text-align:center">Row</td></tr><tr><td><code>Field</code></td><td style="text-align:center">Column</td></tr><tr><td><code>Mapping</code></td><td style="text-align:center">Schema</td></tr></tbody></table><p>엘라스틱서치에서는 REST API를 사용합니다.</p><table><thead><tr><th>Elastic Search</th><th style="text-align:center">RDS</th><th style="text-align:center">CRUD</th></tr></thead><tbody><tr><td><code>GET</code></td><td style="text-align:center">Select</td><td style="text-align:center">Read</td></tr><tr><td><code>PUT</code></td><td style="text-align:center">Update</td><td style="text-align:center">Update</td></tr><tr><td><code>POST</code></td><td style="text-align:center">Insert</td><td style="text-align:center">Create</td></tr><tr><td><code>DELETE</code></td><td style="text-align:center">Delete</td><td style="text-align:center">Delete</td></tr></tbody></table><p>다음과 같이 표를 보면 CRUD의 역할과 동일하게 처리한다라고 생각을 하면됩니다.</p><blockquote><p>GET 조회시</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"error"</span>:&#123;<span class="string">"root_cause"</span>:[&#123;<span class="string">"type"</span>:<span class="string">"index_not_found_exception"</span>,<span class="string">"reason"</span>:<span class="string">"no such index [classes]"</span>,<span class="string">"resource.type"</span>:<span class="string">"index_or_alias"</span>,<span class="string">"resource.id"</span>:<span class="string">"classes"</span>,<span class="string">"index_uuid"</span>:<span class="string">"_na_"</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;],<span class="string">"type"</span>:<span class="string">"index_not_found_exception"</span>,<span class="string">"reason"</span>:<span class="string">"no such index [classes]"</span>,<span class="string">"resource.type"</span>:<span class="string">"index_or_alias"</span>,<span class="string">"resource.id"</span>:<span class="string">"classes"</span>,<span class="string">"index_uuid"</span>:<span class="string">"_na_"</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;,<span class="string">"status"</span>:404&#125;%</span><br></pre></td></tr></table></figure><p>curl의 -XGET 옵션을 통하여 엘라스틱서치의 9200번 포트로 접근해줍니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes</span><br><span class="line"></span><br><span class="line">http://localhost:9200 - 엘라스틱서치 주소</span><br><span class="line">classes - Index</span><br></pre></td></tr></table></figure><blockquote><p>GET 조회시 깔끔하게 보고싶다면?</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classe\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"error"</span> : &#123;</span><br><span class="line">    <span class="string">"root_cause"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"type"</span> : <span class="string">"index_not_found_exception"</span>,</span><br><span class="line">        <span class="string">"reason"</span> : <span class="string">"no such index [classe]"</span>,</span><br><span class="line">        <span class="string">"resource.type"</span> : <span class="string">"index_or_alias"</span>,</span><br><span class="line">        <span class="string">"resource.id"</span> : <span class="string">"classe"</span>,</span><br><span class="line">        <span class="string">"index_uuid"</span> : <span class="string">"_na_"</span>,</span><br><span class="line">        <span class="string">"index"</span> : <span class="string">"classe"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"type"</span> : <span class="string">"index_not_found_exception"</span>,</span><br><span class="line">    <span class="string">"reason"</span> : <span class="string">"no such index [classe]"</span>,</span><br><span class="line">    <span class="string">"resource.type"</span> : <span class="string">"index_or_alias"</span>,</span><br><span class="line">    <span class="string">"resource.id"</span> : <span class="string">"classe"</span>,</span><br><span class="line">    <span class="string">"index_uuid"</span> : <span class="string">"_na_"</span>,</span><br><span class="line">    <span class="string">"index"</span> : <span class="string">"classe"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"status"</span> : 404</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 JSON 포멧으로 깔끔하게 결과값들을 확인할 수 있습니다.</p><blockquote><p>인덱스 생성 PUT</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XPUT http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>,<span class="string">"shards_acknowledged"</span>:<span class="literal">true</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같이 인덱스가 정상적으로 생성된것을 확인할 수 있습니다.</p><blockquote><p>인덱스 삭제 DELETE</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XDELETE http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 엘라스틱서치의 인덱스값이 삭제된것을 확인할 수 있습니다.</p><blockquote><p>Document 생성하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type: application/json'</span> http://localhost:9200/classes/class/1/ -d <span class="string">'&#123;"title" : "Algorithm", "professor" : "John"&#125;'</span></span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:0,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p><strong>주의사항</strong><br>curl -XPOSt <a href="http://localhost:9200/classes/class/1/" target="_blank" rel="noopener">http://localhost:9200/classes/class/1/</a> -d ‘{“title” : “Algorithm”, “professor” : “John”}’ 입력 시 www-form-urlencoded is not supported status 406 에러가 발생합니다. 높은 버전에선 -H ‘Content-Type: application/json’ 를 사용해주어야합니다.</p><blockquote><p>참고링크<br><a href="https://www.elastic.co/kr/blog/strict-content-type-checking-for-elasticsearch-rest-requests" target="_blank" rel="noopener">https://www.elastic.co/kr/blog/strict-content-type-checking-for-elasticsearch-rest-requests</a></p></blockquote><p><strong>Starting from Elasticsearch 6.0, all REST requests that include a body must also provide the correct content-type for that body.</strong></p><blockquote><p>Document 생성된것 확인하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes/class/1/\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 1,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 0,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Algorithm"</span>,</span><br><span class="line">    <span class="string">"professor"</span> : <span class="string">"John"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>파일을 사용하여 Document 생성하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type: application/json'</span> http://localhost:9200/classes/class/1/ -d @class.json</span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:2,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:1,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p>@기호를 사용하여 class.json 파일안에 있는 json 데이터를 통하여 Document를 생성하였습니다. JSON내용은 다음과같습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Document 조회해보기</p></blockquote><p>이제 정상적으로 파일에서 가져온 Document값을 조회해보도록 하겠습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes/class/1/\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 2,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 1,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [</span><br><span class="line">      <span class="string">"spring"</span>,</span><br><span class="line">      <span class="string">"fall"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이렇게 정상적으로 파일에 들어가있는 값들을 통하여 document로 정상적으로 구성되었습니다.</p><blockquote><p>Data Update</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> http://localhost:9200/classes/class/1/_update -d <span class="string">'</span></span><br><span class="line"><span class="string">&#123;"doc":&#123;"unit":1&#125;&#125;'</span></span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:4,<span class="string">"result"</span>:<span class="string">"noop"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:0,<span class="string">"successful"</span>:0,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:3,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p>_update를 뒤에 붙여주면서 진행을 하면 해당 unit값이 업데이트된것을 확인할 수 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 5,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 4,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Algorithm"</span>,</span><br><span class="line">    <span class="string">"professor"</span> : <span class="string">"John"</span>,</span><br><span class="line">    <span class="string">"unit"</span> : 2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>script를 이용하여 업데이트하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XPOST -H <span class="string">'Content-Type:application/json'</span> http://localhost:9200/classes/class/1/_update -d <span class="string">'</span></span><br><span class="line"><span class="string">quote&gt; &#123;"script":"ctx._source.unit += 5"&#125; '</span></span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:6,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:5,<span class="string">"_primary_term"</span>:1&#125;%</span><br><span class="line"> kgh  ~</span><br><span class="line"> </span><br><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 6,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 5,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Algorithm"</span>,</span><br><span class="line">    <span class="string">"professor"</span> : <span class="string">"John"</span>,</span><br><span class="line">    <span class="string">"unit"</span> : 7</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>{“script”:“ctx._source.unit += 5”} 과 같이 script문을 사용하면 다음과같이 정상적으로 데이터가 업데이트를 쉽게 처리할 수 있습니다.</p><blockquote><p>Reference</p></blockquote><p><a href="https://github.com/minsuk-heo/BigData" target="_blank" rel="noopener">https://github.com/minsuk-heo/BigData</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-delete&quot;&gt;&lt;a href=&quot;#elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-de
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="CRUD" scheme="http://gwanhyeon.github.io/tags/crud/"/>
    
  </entry>
  
</feed>
