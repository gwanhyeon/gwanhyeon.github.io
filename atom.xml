<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="https://www.w3.org/2005/Atom">
  <title>GWAN IT Blog</title>
  
  <subtitle>GWAN IT Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://gwanhyeon.github.io/"/>
  <updated>2021-03-10T04:41:03.888Z</updated>
  <id>http://gwanhyeon.github.io/</id>
  
  <author>
    <name>gwanhyeon Kim</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>03 클라우드네이티브의 이해(CI/CD, Docker, Container)</title>
    <link href="http://gwanhyeon.github.io/MSA-20210310-03-cloud-native/"/>
    <id>http://gwanhyeon.github.io/MSA-20210310-03-cloud-native/</id>
    <published>2021-03-10T03:34:51.000Z</published>
    <updated>2021-03-10T04:41:03.888Z</updated>
    
    <content type="html"><![CDATA[<h1 id="keulraudeu-neitibeu-cloud-native-ran"><a href="#keulraudeu-neitibeu-cloud-native-ran" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#클라우드-네이티브cloud-native란"></a> 클라우드 네이티브(Cloud Native)란?</h1><p>클라우드 환경에서 Application, Architecture, Infrastructure 등의 환경을 뜻합니다.<br>클라우드 네이티브 애플리케이션은 환경 변화에 민첩하고 능동적으로 대응하기 위해서 네이티브 환경에서 Saas(Software as a service)나 Faas(Function as a Service)형태로 서비스 되는 애플리케이션을 뜻합니다.</p><p>마이크로서비스는 2주안에 독립적으로 개발해서 배포할 수 있는 정도의 크기를 권고하여 개발 및 배포가 요청에 따라 적절히 확장되는 구조를 가질 수 있습니다.</p><blockquote><p>SaaS(Software as a service)</p></blockquote><p>특정 기간 혹은 특정기간만 필요한 만큼 구매하여 사용하는 주문형 소포트웨어 서비스</p><blockquote><p>12팩터</p></blockquote><p>SaaS가 가져야할 특성과 지켜야할 패턴들에 대한 경험을 정리하는것을 뜻하며 클라우드 애플리케이션 플랫폼인 헤로쿠(Heroku)에 등록하여 사용한 애플리케이션의 활용을 12가지로 정리한 문서입니다.</p><blockquote><p>12팩터 종류</p></blockquote><ol><li><p><em>코드베이스</em><br>원본소스를 뜻하며 소스코드 저장소 내의 원천소스를 하나 가집니다.</p></li><li><p><em>종속성</em><br>프로그램에 사용하는 라이브러리들은 암묵적인 종속성을 가지면 안됩니다.</p></li><li><p><em>환경설정</em><br>코드에서 사용하는 환경설정 정보는 코드가 완전히 분리되어 관리되어야합니다.<br>data connection info, hostname, back-end 등</p></li><li><p><em>백엔드 서비스</em><br>백엔드 서비스는 모두 리소스로 취급하며 Database나 메시지큐가 대표적입니다. 즉, 리소스 식별자 URI(User Resource Identifier)로 접근</p></li><li><p><em>빌드,릴리즈 및 실행</em><br>소스코드는 빌드 릴리즈,실행단계로 격리되어 운영됩니다.</p></li><li><p><em>프로세스</em><br>프로세스(process)는 무상태(Stateless)로 실행되며 상태정보를 공유하지 않아야합니다.</p></li><li><p><em>포트바인딩</em><br>하나의 독립된 서비스로 동작할 수 있고 외부에서 접속할 수 있어야합니다.</p></li><li><p><em>동시성(concurrency)</em></p></li></ol><p>특정 시스템에 부하가 발생시 하드웨어 스케일업을 진행하며 수용 용량보다는 프로세스의 Workload를 수평으로 확장하여 수평적 확장(scale-out)이 가능한 프로세스 모델 형태를 가져야합니다.</p><ol start="9"><li><p><em>폐기가능(disposability)</em><br>graceful shutdown이 보장되어야 하며 비정상적인 프로세스의 종료에도 실행 중이던 작업은 안전하게 종료되어야 합니다.</p></li><li><p><em>개발,테스트,운영환경의 일관성</em><br>개발환경은 테스트나 운영 환경과도 같아야합니다. 개발에서 운영까지 배포되는 시간, 담당자, 도구의 차이로 발생하는 문제를 최소하고 지속적인 배포가 될 수 있는 환경이 되어야합니다.</p></li><li><p><em>로그</em><br>로그는 Stream Event로 취급하여 애플리케이션에서 로그처리에 관여하거나 가공 및 관리하려 해서는 안됩니다.</p></li><li><p><em>일회성 프로세스</em><br>일회성 작업은 구분하여 별도의 프로세스로 구성합니다. 예를 들면, 관리자 관련 작업이나 유지 보수 관련 작업으로 생겨나는 프로세스들은 별도로 분리하여 구성합니다.</p></li></ol><h1 id="keulraudeu-neitibeu-akitegcyeo"><a href="#keulraudeu-neitibeu-akitegcyeo" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#클라우드-네이티브-아키텍쳐"></a> 클라우드 네이티브 아키텍쳐</h1><h2 id="hwagjangganeunghan-akitegceo"><a href="#hwagjangganeunghan-akitegceo" class="header-anchor">2.1. </a><a class="markdownIt-Anchor" href="#확장가능한-아키텍처"></a> 확장가능한 아키텍처</h2><p>클라우드에 최적화된 애플리케이션을 개발하고 운영할 수 있는 아키텍처를 제공합니다. 모놀리스 시스템 아키텍처 구조에서는 하나의 인스턴스에서 애플리케이션이 실행됩니다. (화면, 비즈니스로직, 데이터 처리)</p><h2 id="tanryeogjeog-akitegceo"><a href="#tanryeogjeog-akitegceo" class="header-anchor">2.2. </a><a class="markdownIt-Anchor" href="#탄력적-아키텍처"></a> 탄력적 아키텍처</h2><p>Resliense Architecture란 서비스 생성-통합-배포, 비즈니스 환경 변화에 대응 시간을 단축, 오류를 예측하고 적절히 대응할 수 있는 아키텍처 구조입니다. 분산 병렬처리, 수평적 확장, 무상태 통신방식, 오류를 예측하여 실행 상태를 유지하기 위한 자동 복원 능력이 지원되어야 합니다.</p><blockquote><p>장애 격리<br>Fault isolation은 오류 및 장애에 대한 격리이며 특정 서비스의 오류로 인해 다른 서비스까지 영향이 도달하는 것을 없애는 것입니다.</p></blockquote><h1 id="keulraudeu-neitibeu-inpeura"><a href="#keulraudeu-neitibeu-inpeura" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#클라우드-네이티브-인프라"></a> 클라우드 네이티브 인프라</h1><blockquote><p>컨테이너 기반 패키지(Container based package)란?<br>컨테이너 단위의 패키지입니다. 패키지 단위가 시스템 단위일 수도 있고, 서비스 애플리케이션 단위일 수도 있습니다. 컨테이너로 패키지된 단위가 실행 단위입니다.</p></blockquote><p>즉, 컨테이너 단위로 독립적인 인터페이스와 물리적으로 접속이 가능한 IP와 포트를 가집니다.</p><p>리눅스 컨테이너 기술을 응용한 도커 컨테이너는 PasS(Platform as a Service) 영역에 큰 변화와 발전을 가져왔다고 해도 과언이 아닙니다. 보통 jar,war 형태로 배포를 처리했지만, 이제는 도커이미지로 컨테이너를 실행하면 쉽게 배포가 가능합니다.</p><blockquote><p>동적 관리<br>시스템은 서비스와 추가와 삭제를 자동으로 감지하여 새롭게 추가된 서비스로 서비스 요청을 라우팅할 수 있습니다.</p></blockquote><h1 id="jisogjeog-tonghabgwa-baepo"><a href="#jisogjeog-tonghabgwa-baepo" class="header-anchor">4. </a><a class="markdownIt-Anchor" href="#지속적-통합과-배포"></a> 지속적 통합과 배포</h1><blockquote><p>CI(Continuous Integration)<br>소스코드의 지속적인 통합과 배포는 클라우드 네이티브환경 구축을 위하여 중요한 요소입니다. 지속적 통합은 개발 환경에서 개발 중인 코드를 통합하고 필요에 따라 테스트로 병행 수행하는 일련의 프로세스를 발합니다.</p></blockquote><p>주로, CI(Continuous Integration) 서버, 소스 관리(SCM, Soruce Code Managemet), 빌드도구(tool), 테스트 도구가 있으며 CI 서버는 빌드 프로세스가 관리하는 서버입니다. 예를 들면, 젠킨스를 들 수 있습니다.</p><p>소스 저장소는 소스코드의 형상을 관리하는 시스템으로 Git을 들 수 있습니다.</p><blockquote><p>지속적 배포</p></blockquote><p>지속적 배포에는 Continuous Delivery와 Continous Deployment 두가지 유형으로 나뉘고 실행 환경으로 배포하기 직전상태인 배포형태와 실행환경까지 자동으로 배포하는 환경입니다.</p><blockquote><p>카나리배포와 블루그린배포</p></blockquote><p>빌드된 소스를 릴리스하는 데에는 카나리(Canary) 배포와 블루그린(Blue-Green) 배포의 두가지 대표적인 유형이 있습니다.</p><p>카나리 배포같은 경우 새 버전의 서비스를 일부 사용자들에게만 배포하여 정상 유무를 확인하는 전략이고, 블루그린 배포는 운영과 같은 환경이 하나 더 있고 한쪽 새로운 버전을 배포하여 사용자의 연결 요청을 새버전 서비스로 라우팅을 유도하여 문제가 없으면 이전 환경의 사용을 중지하는 방식입니다.</p><h1 id="debeu-obseu-devops"><a href="#debeu-obseu-devops" class="header-anchor">5. </a><a class="markdownIt-Anchor" href="#데브-옵스devops"></a> 데브 옵스(DevOps)</h1><p>데브옵스(DevOps)는 애플리케이션과 서비스의 개발에서 배포 운영까지 바르게 제공되는 조직의 협업문화를 뜻합니다.</p><h1 id="keonteineo-container"><a href="#keonteineo-container" class="header-anchor">6. </a><a class="markdownIt-Anchor" href="#컨테이너container"></a> 컨테이너(Container)</h1><p>컨테이너(Container)는 운엉체제상에서 독립된 공간을 할당하고 독립된 공간끼리는 서로 격리되어 독립된 자원을 할당받고 프로세스 간 간섭이 없다면 애플리케이션 입장에서는 자신만의 공간을 가지게 되고 용도에 맞게 안전하게 실행됩니다.</p><p>즉, 마이크로서비스는 컨테이너를 단위로 묶어서 즉시 필요한 시점에 배포할 수 있는 장점을 가지고 있습니다.</p><blockquote><p>프로세스 격리</p></blockquote><p>격리된 공간에서 수행하는 프로세스는 다른 공간에서 동작하는 프로세스의 영향을 받지 않습니다. 네트워크자원을 분할하면 별도의 IP 어드레스를 할당하여 액세스가 가능합니다.</p><blockquote><p>가상화와 컨테이너</p></blockquote><p>가상화는 하이퍼바이저(Hypervisor)라는 소프트웨어를 이용하여 하나의 시스템에서 여러 개의 운영체제를 사용할 수 있게 지원하는 기술입니다. 반면에 컨테이너는 하이퍼바이저 없이 컨테이너 엔진을 통해서 가상의 격리된 공간을 생성하는 기술입니다.</p><h1 id="rinugseu-keonteineo"><a href="#rinugseu-keonteineo" class="header-anchor">7. </a><a class="markdownIt-Anchor" href="#리눅스-컨테이너"></a> 리눅스 컨테이너</h1><p>리눅스 컨테이너는 컨테이너 기술을 적용하고 잇고, 하나의 호스트 운영체제 위에 여러개의 격리된 시스템 환경을 구성할 수 있는 운영체제 수준의 가상화 기술입니다.<br>네임스페이스(namespace), 컨트롤그룹(cgroups)이라는 커널기능을 사용하여 격리된 공간을 관리합니다.</p><h1 id="neimseupeiseu"><a href="#neimseupeiseu" class="header-anchor">8. </a><a class="markdownIt-Anchor" href="#네임스페이스"></a> 네임스페이스</h1><p>네임스페이스는 컨테이너별로 격리된 공간을 가질 수 있도록 지원하는 기술입니다.<br>“PID”,“NET”, “MNT”, “UID”, “UTS”, “IPC” 여섯가지의 네임스페이스를 제공합니다.</p><p>PID(Process ID): 각 프로세스에 할당된 고유한 ID<br>NET(NETWORK): 네트워크 디바이스(device), IP, 포트(port), IP 테이블(table) 등<br>MNT(Mount): 컴퓨터 시스템에 접속되어 있는 디바이스 정보를 운영체제로 인식<br>UID: 네임스페이스별로 userID, group ID를 할당<br>UTS: 네임스페이스별로 호스트명(host name)과 도메인(domain)을 독자적으로 가집니다.<br>IPC(Inter Process Communication): 프로세스간 통신객체(Object)를 네임스페이스별로 할당합니다.</p><h1 id="dokeo-keonteineo"><a href="#dokeo-keonteineo" class="header-anchor">9. </a><a class="markdownIt-Anchor" href="#도커-컨테이너"></a> 도커 컨테이너</h1><p>도커 이미지(docker image)는 하나 혹은 여러개의 이미지 레이어로 구성되어있고 도커엔진에서 사용하는 기본 단위입니다. 도커 컨테이너를 생성하는 요소로 가상 머신의 이미지 파일과 비슷하다고 생각하면됩니다.</p><p>도커는 이미지와 컨테이너라는 개념을 제시하고 있으며 이미지는 베이스 이미지(base iamge)와 도커 이미지로 개념적으로 구분할 수 있습니다.</p><blockquote><p>도커 컨테이너</p></blockquote><p>도커 컨테이너(docker container)는 도커 이미지를 독립된 공간을 할당하여 실행한 런타임 개체(runtime object)입니다. 도커 엔진(docker engine)위에서 기동되며 가상의 IP와 포트, 이름을 가질 수 있습니다.</p><blockquote><p>도커 레지스트리</p></blockquote><p>도커 레지스트리(docker registry)는 도커 이미지를 관리 할 수 있게 제공된 저장공간입니다.</p><blockquote><p>도커 네트워크</p></blockquote><p>도커 네트워크(docker network)는 도커 컨테이너 단위로 서비스 할 수 있도록 네트워크 환경을 제공하는 가상의 네트워크 환경입니다. 이를 가능하게 하는것은 가상의 브릿지인 docker()가 담당하며 도커 데몬이(docker demon)이 가동된후 ip가 할당되고, 도커 컨테이너별로 컨테이너별 eth()에 IP가 자동으로 할당됩니다. NIC(eth0)는 도커 내부 네트워크와 브리지 역할을 하는 docker()와 연결됩니다.</p><p>docker()은 도커 내부 컨테이너들의 가상의 NIC(veth)와 연결되어 접속할 수 있습니다. 도커 내부 컨테이너들은 각자 가상의 eth()에 IP가 자동으로 할당되어서 docker()에서는 컨테이너의 IP를 확인하여 연결 할 수 있습니다.</p><p>도커 네트워크는 NAPT(Network Address Port Translation) 기능을 사용합니다.</p><blockquote><p>NAPT란?</p></blockquote><p>하나의 IP를 가지고 가상의 여러 IP 및 포트와 변환하는 기능입니다. NAT(Network Address Translation)과 차이를 가지고 있는데, NAT는 공용 IP와 사설 IP와의 관계, 즉 public IP : Private IP 관계가 1:1로 변환하는 방식이라면 NAPT는 포트까지 변환하여 1:N으로 변환하는 방식입니다.</p><blockquote><p>서비스 요청이 컨테이너까지 전달되는 과정</p></blockquote><p>사용자 <a href="http://www.kgh.com:8080" target="_blank" rel="noopener">http://www.kgh.com:8080</a> -&gt; eth0 8080 -&gt; docker() -&gt; 컨테이너 1번(80 port)</p><p>도커 컨테이너가 80번 포트로 서비스 되고 있는데 NAPT 8080 -&gt; 80 으로 변환하는 설정이 되어 있다면 외부 사용자의 요청을 8080 호출은 NAPT 설정에 의해 80 도커 컨테이너에 연결하여 결과를 반환해줄 것입니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;keulraudeu-neitibeu-cloud-native-ran&quot;&gt;&lt;a href=&quot;#keulraudeu-neitibeu-cloud-native-ran&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdow
      
    
    </summary>
    
    
      <category term="MSA" scheme="http://gwanhyeon.github.io/categories/msa/"/>
    
    
      <category term="MSA" scheme="http://gwanhyeon.github.io/tags/msa/"/>
    
  </entry>
  
  <entry>
    <title>Network Header 개요 및 쿠키 세션</title>
    <link href="http://gwanhyeon.github.io/Network-20210309-network-10-header-summary/"/>
    <id>http://gwanhyeon.github.io/Network-20210309-network-10-header-summary/</id>
    <published>2021-03-09T08:44:05.000Z</published>
    <updated>2021-03-10T03:15:33.314Z</updated>
    
    <content type="html"><![CDATA[<h1 id="http-hedeo"><a href="#http-hedeo" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#http-헤더"></a> HTTP 헤더</h1><p>HTTP 헤더의 구성은 다음과 같이 구성됩니다.<br>header-field = field-name “:” OWS field-value OWS<br>보통 fieldname은 대소문자 구분을 따로 하지않으며 OWS(optional whitespace)는 띄어쓰기를 허용시킵니다.</p><blockquote><p>reference RFC7230</p></blockquote><p><a href="http://www.bizcoder.com/everything-you-need-to-know-about-http-header-syntax-but-were-afraid-to-ask" target="_blank" rel="noopener">HTTP RFC7230 </a></p><blockquote><p>Request Header</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /search?q=hello&amp;hl=ko HTTP/1.1</span><br><span class="line">Host: www.google.com</span><br></pre></td></tr></table></figure><blockquote><p>Response Header</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html;charset=UTF-8</span><br><span class="line">Content-Length: 3423</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>...<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="http-hedeoneun-museun-yeoghaleul-haneungeosilggayo"><a href="#http-hedeoneun-museun-yeoghaleul-haneungeosilggayo" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#http-헤더는-무슨-역할을-하는것일까요"></a> HTTP 헤더는 무슨 역할을 하는것일까요?</h2><p>HTTP 헤더는 HTTP전송에 필요한 모든 부가정보들을 담고있습니다. 예를 들면, 메시지 바디 크기, 압축, 인증, 요청 클라이언트, 서버 정보, 캐시 관리 정보등을 가지고 있습니다.(표준헤더의 수는 방대합니다.)<br>직접 사용자가 HTTP 헤더를 사용할 수 있기때문에 추가를 할 수 있습니다.</p><h2 id="hedeoyi-bunryu"><a href="#hedeoyi-bunryu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#헤더의-분류"></a> 헤더의 분류</h2><ol><li>General Header : 메시지 전체에 적용되는 정보를 담고 있으며 연결정보를 가지고 있습니다.</li><li>Request Hader: 요청 정보-User-Agent와 같은 정보를 가지고 있습니다.</li><li>Response Header: 응답 정보, 아파치</li><li>Entity Header: Entity Body 정보 Content-Type:text/html, Content-Length: 3423</li></ol><h2 id="hedeoyi-yeogsa"><a href="#hedeoyi-yeogsa" class="header-anchor">1.3. </a><a class="markdownIt-Anchor" href="#헤더의-역사"></a> 헤더의 역사</h2><p>1999년 RFC2616버전에서 2014년 RFC7230~7235가 등장하게 됩니다.<br>RFC7230 최신 버전으로 오게되면서 메시지 본문을 통해 표현 데이터들을 전달하게 됩니다.</p><p>메시지본문을 payload라고 일컫는데, 표현은 요청이나 응답에서 전달할 실제 데이터입니다.<br>표현 헤더는 표현 데이터를 해석할 수 있는 정보를 제공합니다. (HTML,JSON,데이터정보)</p><h1 id="hedeoyi-teugjing"><a href="#hedeoyi-teugjing" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#헤더의-특징"></a> 헤더의 특징</h1><blockquote><p>Representation Header</p></blockquote><p>HTTP/1.1 200OK<br>Content-Type:text/html;charset=UTF-8</p><blockquote><p>Representation Data</p></blockquote><html> <body> </body> </html><blockquote><p>Representation</p></blockquote><ol><li>Content-Type: 표현 데이터형식<br>미디어 타입, 문자 인코딩 형식(text/html; charset=utf-8, application/json, image/png)</li><li>Content-Encoding: 표현 데이터의 압축 방식<br>표현 데이터를 압축하기 위해 사용되며 인코딩 헤더의 정보로 압축을 해제합니다.<br>(gzip, deflate, identity)</li><li>Content-Language: 표현 데이터의 자연언어<br>표현 데이터의 자연언어를 표현합니다.(ko,en,en-US)</li><li>Content-Length: 표현 데이터의 길이<br>바이트 단위로 이루어져있으며 Transfer-Encoding 을 사용하면 Content-Length사용을 하면 안됩니다.<br>동일정보가 들어가있기때문입니다.</li></ol><p>표현헤더는 전송과 응답에 모두 사용됩니다.</p><blockquote><p>Content negotiation</p></blockquote><ol><li>Accept: 클라이언트가 선호하는 미디어 타입 전달</li><li>Accept-Charset: 클라이언트가 선호하는 문자 인코딩</li><li>Accept-Encoding: 클라이언트가 선호하는 압축 인코딩</li><li>Accept-Language: 클라이언트가 선호하는 자연 언어</li></ol><p>클라이언트가 요청을 하는것이다. 만약 해당되는 Accept가 없을 경우 우선순위를 부여합니다.<br>우선순위는 (0-1)까지 우선순위로 처리할 수 있습니다. 그리고, Quality Values를 사용하면 구체적인것들을 먼저 처리합니다.<br>(1.text/plain;format=flowed, 2.<em>/</em>) 우선순위가 더 높은것을 사용합니다.</p><blockquote><p>전송방식</p></blockquote><p>Transfer-Encoding, Range, Content-Range</p><p>전송 방식 4가지</p><ol><li>단순전송<br>Content-Length를 전송합니다.</li><li>압축전송<br>Content-Encoding을 전송합니다.</li><li>분할전송<br>Transfer-Encoding을 전송합니다. (transfer-Encoding: chunked) 바이트를 쪼개서 전송</li><li>범위전송<br>바이트 범위를 설정하여 전송합니다. (Range: bytes=500-1000) 해당 바이트만큼 쪼개서 전송받음.</li></ol><blockquote><p>일반정보</p></blockquote><ol><li>From: User Agent E-Mail<br>검색엔진, 요청</li><li>Referer: 이전 웹 페이지 주소<br>이전 웹 페이지 주소 A-&gt; B요청시 Referer 선언후 A포함해서 요청(중요), 유입경로 분석</li><li>User-Agent: 유저 에이전트 애플리케이션 정보<br>웹 브라우저 정보, 특정 브라우저 장애발생시 통계 정보 추출</li><li>Server: 요청을 처리하는 오리진 서버의 소프트웨어 정보<br>요청을 처리하는 Origin 서버의 소프트웨어 정보(nginx)</li><li>Date: 메시지가 생성된 날짜<br>메시지 발생 날짜 시간, 응답에 사용</li><li>Host: 요청한 호스트 정보(도메인) - 요청 필수값</li><li>Location: 페이지 리다이렉션<br>응답의 결과에 Location 헤더가 있으면, Location 위치로 자동 이동(리다이렉트)</li><li>Allow: 허용 가능한 HTTP 메서드<br>Allow값을 다음과 같이 설정하여 허용가능한 메소드를 설정합니다.(GET, HEAD, PUT)</li><li>Retry-After: 유저 에이전트가 다음 요청을 하기까지 기다려야 하는 시간<br>서비스가 언제까지 불능인지 처리하기</li></ol><blockquote><p>인증</p></blockquote><ol><li>Authorization: 클라이언트 인증 정보를 서버에 전달합니다.</li><li>WWW-Authenticate: 리소스 접근시 필요한 인증 방법 정의합니다.</li><li>Set-Cookie: 서버에서 클라이언트로 쿠키 전달하고 응답을 처리합니다.</li><li>Cookie: 클라이언트가 서버에서 받은 쿠키를 저장하고, HTTP 요청시 서버로 전달합니다.</li></ol><h1 id="kuki-cookies-vs-sesyeon-session"><a href="#kuki-cookies-vs-sesyeon-session" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#쿠키cookies-vs-세션session"></a> 쿠키(Cookies) VS 세션(Session)</h1><p>이번에 살펴볼 내용은 &quot;세션&quot;과 &quot; 쿠키&quot;입니다.</p><blockquote><ol><li>쿠키, 세션 이란?<br>인터넷을 사용하시다 보면 흔히 접했던 말입니다. 가끔 홈페이지 접속이 되지 않거나, 에러가 나는 경우</li></ol></blockquote><p>&quot; 인터넷 옵션에 들어가서 쿠키를 삭제하고 다시 시도해보시길 바랍니다. &quot;</p><p>혹은, 로그인을 하였는데 아이디와 비밀번호를 저장하시겠습니까? 라는 글을 보셨을 겁니다.</p><blockquote><p>쿠키 세션 왜 써요?</p></blockquote><p>서버와 클라이언트가 통신을 할 때 통신이 연속적으로 이어지지 않고 한 번 통신이 되면 끊어진다. 따라서 서버는 클라이언트가 누구인지 계속 인증을 해주어야 하는데, 여기서 쿠키와 세션을 이용하여 인증을 하게 된다.</p><blockquote><p>쿠키란?</p></blockquote><p>클라이언트 웹 브라우저에서 관리 되는 작은 기록의 텍스트 파일(정보 파일) 입니다. 특정 시간 동안에 유효한 시간을 설정하여, 브라우저를 다시 재부팅하여도 인증이 되는 경우 입니다.</p><blockquote><p>쿠키 동작 방식</p></blockquote><ol><li><p>클라이언트가 로그인을 하기 위해 웹 페이지를 요청합니다.</p></li><li><p>쿠키는 HTTP 통신 헤더에서 전송 됩니다. 따라서, 통신 헤더에 쿠키값이 들어가게 되며, 응답 헤더에 쿠키 값을 웹 서버에 전송 시킵니다.</p></li><li><p>이제, 웹 서버에서 쿠키를 생성 시킵니다.</p></li><li><p>현재 HTTP 헤더에는 쿠키값을 가지고 있기 때문에, 나중에 로그인을 다시 요청하여도 그 값을 읽어 이전상태의 정보를 변경 시킵니다.</p></li><li><p>쿠키 값을 새로 발급 받거나 변화가 있을 경우 새로운 쿠키 값을 HTTP 헤더에 포함시켜 응답하게 됩니다.</p></li></ol><blockquote><p>쿠키 사용 예제</p></blockquote><ol><li>티스토리 블로그를 방문하였다고 가정 할때, 로그인을 하고 나면 아이디와 비밀번호르 저장하시겠습니까? 라는 문구를 확인 할 수 있습니다.</li><li>E-commerce b2c 플랫폼인 쇼핑몰이나 전자상거래 사이트등에서 장바구나 같은것들을 예로 들 수 있겠습니다.</li></ol><p>쿠키는 모든 요청에 쿠키 정보를 자동으로 포함시킵니다.<br>예) Cookie: user=kgh</p><p>쿠키는 생명 주기를 가지고 있습니다. expires를 지정하여 만료일이 되면 쿠키를 삭제할 수 있습니다. 아니면 max-age=3600초를 주어서 쿠키를 처리할 수 있습니다.</p><p>쿠키 도메인은 보통 명시한 문서기준의 도메인과 서브도메인을 포함합니다.<br>domain = kgh.org를 지정하여 쿠키를 생성합니다.</p><p>쿠키의 경로는 이당 경로를 포함한 하위 경로 페이지만 쿠키에 접근이 가능하고 보통 path를 root로 처리하는 경우가 많습니다.</p><p>쿠키는 http, https를 구분하지 않고 전송하며 Secure시에만 https인 경우에만 전송하게 됩니다. http만 접근이 가능하게 하여 XSS공격을 방지할 수 있습니다. 그리고 요청된 도메인과 쿠키에 설정된 도메인이 같은 경우에만 쿠키를 전송하게 합니다.(XSRF 방지)</p><blockquote><p>세션이란?<br>세션이라고 하는것은, 쿠키 값을 이용하여 사용자 정보 파일을 서버측에서 관리 하게 됩니다.<br>쿠키와의 차이점은 쿠키는 클라이언트쪽에서 관리를 하였습니다. 쿠키 값을 이용한 세션 값들이 서버측에 저장되어 그 값을 이용하여 사용자 인증을 받는 구조입니다.</p></blockquote><blockquote><p>세션 동작 방식</p></blockquote><ol><li>클라이언트가 서버에 접속 시 세션 ID 값을 발급을 받게 됩니다.</li><li>그 이후에 서버에서는 발급 받은 세션 ID값을 이용하여 쿠키를 사용해서 세션을 저장하게 됩니다.</li><li>로그인을 진행한다면, 클라이언트쪽에서 요청 받은 경로에 대한 세션 ID 값을 다시 전달하여 인증하는 방식입니다.</li></ol><blockquote><p>세션의 특징</p></blockquote><ol><li>각 클라이언트에게 고유 ID를 부여 시킨다.</li><li>보안면에서 쿠키보다 우수합니다(서버측면에서 관리하기 때문)</li><li>세션 ID값으로 클라이언트를 구별 할 수 있습니다.</li><li>쿠키와 다르게, 서버측에서 메모리를 관리하기 때문에 서버측에서 용량의 과부하가 생길 수 있습니다.</li><li>이것을 해결하기 위해서 나온것이 JWT(JSON WEB TOKEN)방식 입니다. 추후에 따로 포스팅 할 계획이오니, 확인해주시면 되겠습니다.</li></ol><blockquote><p>쿠키와 세션의 차이?<br>쿠키와 세션의 큰 차이점은</p></blockquote><ol><li></li></ol><p>쿠키 = 클라이언트(웹 브라우저)<br>세션 = 서버(웹 서버)</p><ol start="2"><li><p>보안측면에 대해서는 쿠키 값 보다 세션이 조금 더 유리합니다. 이것에 대해서 추후에 자세히 설명 드리도록 하겠습니다.</p></li><li><p>쿠키와 세션의 메모리 용량에 대한 차이점입니다. 세션은 쿠키에 비해 서버쪽에서 메모리를 차지하고 있기 때문에 문제가 과부하가 걸릴 가능성이 있습니다.</p></li></ol><p>덧붙여 얘기하면, 쿠키는 사용자 로그인 세션을 관리하고 광고정보를 트래킹할 수 있습니다. 또한, 쿠키 정보는 항상 서버에 전송되기 때문에 네트워크 트래픽을 유발할 수 있으며 최소한의 정보를 사용해야합니다. 만약 서버에 저장하고 싶지 않다면, 웹 브라우저 내부에 웹 스토리지를 사용합니다(LocalStorage, sessionStorage)</p><h1 id="mamuri"><a href="#mamuri" class="header-anchor">4. </a><a class="markdownIt-Anchor" href="#마무리"></a> 마무리</h1><p>이렇게 쿠키와 세션에 대한 개념들을 알아보는 시간을 가졌고, 이러한 쿠키와 세션 방식을 대체하기 위한 방식들이 많이 나오고 있습니다.</p><p>예를 들어, 위에서 말씀드린 JWT 토큰 인증 방식이라던지, OAuth2.0 방식(Facebook, Google, Slack) 등을 사용할 수 있습니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;http-hedeo&quot;&gt;&lt;a href=&quot;#http-hedeo&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#http-헤더&quot;&gt;&lt;/a&gt; HTTP 헤더&lt;/h1&gt;
&lt;p&gt;HTT
      
    
    </summary>
    
    
      <category term="Network" scheme="http://gwanhyeon.github.io/categories/network/"/>
    
    
      <category term="Network" scheme="http://gwanhyeon.github.io/tags/network/"/>
    
      <category term="Header" scheme="http://gwanhyeon.github.io/tags/header/"/>
    
  </entry>
  
  <entry>
    <title>프로그래머스 외벽점검</title>
    <link href="http://gwanhyeon.github.io/Programmers-20210309-programmers-%EC%99%B8%EB%B2%BD%EC%A0%90%EA%B2%80/"/>
    <id>http://gwanhyeon.github.io/Programmers-20210309-programmers-%EC%99%B8%EB%B2%BD%EC%A0%90%EA%B2%80/</id>
    <published>2021-03-08T16:47:40.000Z</published>
    <updated>2021-03-08T16:54:42.269Z</updated>
    
    <content type="html"><![CDATA[<h1 id="peurogeuraemeoseu-oebyeogjeomgeom"><a href="#peurogeuraemeoseu-oebyeogjeomgeom" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#프로그래머스-외벽점검"></a> <a href="https://programmers.co.kr/learn/courses/30/lessons/60062" target="_blank" rel="noopener">프로그래머스 외벽점검</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>(1) 취약점의 출발지를 설정하고 취약지점을 평면으로 생각하여 해당 N범위를 넘어갈 것을 대비하여 취약지점+N까지 값들을 넣어줍니다.<br>(2) 출발점과 다음 취약점의 거리가 사용 가능한 친구의 시간보다 크면 더이상 진행할 수 없는것이므로 다음값으로 갱신하여 진행<br>즉, 현재 친구의 시간으로 모든 외벽을 점검할 수 없다는 뜻이 됩니다.<br>(3) 만약 친구의 시간이 더 클 경우<br>점검이 가능하기 때문에 다음취약점으로 다시 점검을 체크합니다.<br>(4) 만약 모든 친구를 사용하지 않고도 투입이 가능하다면 최솟값을 갱신하여 진행합니다.<br>(5) 친구를 모두 투입했지만 성공하지 못하였으면 -1을 리턴해줍니다. 즉, 최솟값을 구하기 위해 설정한 Integer.MAX_VALUE 값과 같은지를 확인합니다.</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">programmers_</span>외벽점검<span class="title">_kgh</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">boolean</span>[] check;</span><br><span class="line">    <span class="keyword">static</span> List&lt;Integer&gt; circleWeakList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; friendDistList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> answer = Integer.MAX_VALUE;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">12</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">10</span>&#125;,<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] weak, <span class="keyword">int</span>[] dist)</span> </span>&#123;</span><br><span class="line">        check = <span class="keyword">new</span> <span class="keyword">boolean</span>[dist.length];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 취약지점 넣어주기</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;weak.length; i++)&#123;</span><br><span class="line">            circleWeakList.add(weak[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 원형을 평면으로 생각하여 +n만큼 더 진행</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;weak.length; i++)&#123;</span><br><span class="line">            circleWeakList.add(weak[i]+n);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(<span class="number">0</span>,weak,dist);</span><br><span class="line">        answer = (answer == Integer.MAX_VALUE) ? -<span class="number">1</span> : answer;</span><br><span class="line">        <span class="comment">// System.out.println("answer =&gt; " + answer);</span></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cnt, <span class="keyword">int</span>[] weak, <span class="keyword">int</span>[] dist)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cnt == dist.length)&#123;</span><br><span class="line">            distCheck(weak);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 친구가 투입되는 거리의 조합 예: 1,2,3,4 -&gt; 2,3,4,1 ... 해당거리만큼을 먼저 방문해야하는지를 체크를 진행</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;dist.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(check[i])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            check[i] = <span class="keyword">true</span>;</span><br><span class="line">            friendDistList.add(dist[i]);</span><br><span class="line">            dfs(cnt+<span class="number">1</span>, weak, dist);</span><br><span class="line">            friendDistList.removeLast();</span><br><span class="line">            check[i] = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">distCheck</span><span class="params">(<span class="keyword">int</span>[] weak)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;weak.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">boolean</span> friendSizeCheck = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">int</span> startPoint = circleWeakList.get(i);</span><br><span class="line">            <span class="comment">// 들어가있는 취약지점을 하나씩 밀면서 처리하기 예: 123456</span></span><br><span class="line">            <span class="comment">// 123456 -&gt; 23456 -&gt; 3456 -&gt; 456 ....</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;i+weak.length; j++)&#123;</span><br><span class="line">                <span class="comment">// 두점 사이의 거리가 검사 가능한 친구거리보다 크다면 더이상 진행이 불가능하므로 갱신</span></span><br><span class="line">                <span class="keyword">if</span>(friendDistList.get(idx) &lt; circleWeakList.get(j) - startPoint)&#123;</span><br><span class="line">                    startPoint = circleWeakList.get(j);</span><br><span class="line">                    idx++;</span><br><span class="line">                    <span class="comment">// 모든친구를 방문하였을 경</span></span><br><span class="line">                    <span class="keyword">if</span>(idx == friendDistList.size())&#123;</span><br><span class="line">                        friendSizeCheck = <span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 모든 친구를 사용하지 않고도 투입이 가능한 경우</span></span><br><span class="line">            <span class="keyword">if</span>(!friendSizeCheck)&#123;</span><br><span class="line">                answer = Math.min(answer, idx+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;peurogeuraemeoseu-oebyeogjeomgeom&quot;&gt;&lt;a href=&quot;#peurogeuraemeoseu-oebyeogjeomgeom&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-An
      
    
    </summary>
    
    
      <category term="Programmers" scheme="http://gwanhyeon.github.io/categories/programmers/"/>
    
    
      <category term="DFS" scheme="http://gwanhyeon.github.io/tags/dfs/"/>
    
  </entry>
  
  <entry>
    <title>프로그래머스 야근지수</title>
    <link href="http://gwanhyeon.github.io/Programmers-20210305-programmers-%EC%95%BC%EA%B7%BC%EC%A7%80%EC%88%98/"/>
    <id>http://gwanhyeon.github.io/Programmers-20210305-programmers-%EC%95%BC%EA%B7%BC%EC%A7%80%EC%88%98/</id>
    <published>2021-03-05T05:22:52.000Z</published>
    <updated>2021-03-05T05:34:49.150Z</updated>
    
    <content type="html"><![CDATA[<h1 id="peurogeuraemeoseu-yageun-jisu-level03"><a href="#peurogeuraemeoseu-yageun-jisu-level03" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#프로그래머스-야근-지수-level03"></a> <a href="https://programmers.co.kr/learn/courses/30/lessons/12927" target="_blank" rel="noopener">프로그래머스 야근 지수 Level03</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>priorityQueue를 사용하여 가장 야근이 많은것부터 하나씩 처리합니다.1시간당 1의 일을 소모하니 가장높은것부터 -1을 처리해줍니다.</li><li>TestCase03의 경우 처리한값중에 -1 0보다 작은 값이 존재할 경우 가장 최솟값이 0이되기 때문에 조건을 걸어 해당 로직을 빠져나오게 하였습니다.</li><li>PriorityQueue의 Collections.reverseOrder()를 사용하면 가장 높은 우선순위부터 처리할 수 있습니다.</li></ol><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> 야근지수 </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//solution(4, new int[]&#123;4,3,3&#125;);</span></span><br><span class="line">        solution(<span class="number">3</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">long</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] works)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> answer = <span class="number">0</span>;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; pq = <span class="keyword">new</span> PriorityQueue(Collections.reverseOrder());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> work : works) &#123;</span><br><span class="line">            pq.add(work);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!pq.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(cnt == n)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pq.add(pq.poll()-<span class="number">1</span>);</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Integer value : pq) &#123;</span><br><span class="line">            <span class="keyword">if</span>(value &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                answer = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            answer += Math.pow(value, <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;peurogeuraemeoseu-yageun-jisu-level03&quot;&gt;&lt;a href=&quot;#peurogeuraemeoseu-yageun-jisu-level03&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markd
      
    
    </summary>
    
    
      <category term="Programmers" scheme="http://gwanhyeon.github.io/categories/programmers/"/>
    
    
      <category term="프로그래머스" scheme="http://gwanhyeon.github.io/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4/"/>
    
      <category term="힙" scheme="http://gwanhyeon.github.io/tags/%ED%9E%99/"/>
    
  </entry>
  
  <entry>
    <title>OS 트랜잭션(transaction), 격리수준(Isolation Level)</title>
    <link href="http://gwanhyeon.github.io/OS-20210303-os-transaction/"/>
    <id>http://gwanhyeon.github.io/OS-20210303-os-transaction/</id>
    <published>2021-03-03T09:12:15.000Z</published>
    <updated>2021-03-03T09:35:45.280Z</updated>
    
    <content type="html"><![CDATA[<h1 id="transaction-teuraenjaegsyeon"><a href="#transaction-teuraenjaegsyeon" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#transaction트랜잭션"></a> Transaction(트랜잭션)</h1><blockquote><p>트랜잭션의 성질</p></blockquote><ol><li><p>원자성(Atomicity)</p><p>한 트랜잭션 내에서 실행한 작업들을 하나로 간주한다. 즉, 모두 성공 또는 실패를 뜻합니다.</p></li><li><p>일관성(Consistency)</p><p>트랜잭션은 일관성 있는 데이터베이스 상태를 유지합니다. (Data Integrity)</p></li><li><p>격리성(Isolation)</p><p>동시에 실행되는 트랜잭션들이 서로 영향을 미치지 않도록 격리해야합니다.</p></li><li><p>지속성(Durability)</p><p>트랜잭션을 성공적으로 마치면 결과가 항상 저장되어야 합니다.</p></li></ol><blockquote><p>트랜잭션이란 무엇인가?</p></blockquote><p>스프링에서는 트랜잭션을 처리를 지원하는데 그 중 어노테이션 방식으로 @Transcational을 선언하여 사용하는 방법이 일반적입니다. 즉, 선언적 트랜잭션이라 불리어옵니다.</p><p>클래스나 메서드 위에서 @Transaction이 추가되면, 이 클래스에 트랜잭션 기능이 적용된 프록시 객체가 생성됩니다.</p><p>이 프록시 객체는 @Transcation이 포함된 메소드가 호출 될 경우, PlatformTranscationManager를 사용하여 트랜잭션을 시작하고, 정상 여부에 따라 Commit or Rollback을 진행합니다.</p><h1 id="teuraenjaegsyeon-gyeongjaengsi-munjejeom"><a href="#teuraenjaegsyeon-gyeongjaengsi-munjejeom" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#트랜잭션-경쟁시-문제점"></a> 트랜잭션 경쟁시 문제점</h1><p>다수의 트랜잭션이 동시에 실행되는 상황에서는 트랜잭션 처리방식을 고려해야합니다.</p><h3 id="munje-1dirty-read"><a href="#munje-1dirty-read" class="header-anchor">2.1. </a><a class="markdownIt-Anchor" href="#문제-1dirty-read"></a> 문제 1Dirty Read</h3><p>트랜잭션 A가 어떤 값을 1에서 2로 변경하고 아직 커밋되지 않은 상황에서 트랜잭션 B가 같은 값을 읽는 경우 트랜잭션 B는 2가 조회됩니다.</p><p>트랜잭션 B가 2를 조회한 후 A가 롤백이 된다면 결국 트랜잭션 B는 잘못된 값을 읽게됩니다. 즉, 트랜잭션이 완료되지 않은 시점에서 데이터에 접근을 허용할 경우 발생할 수 있는 데이터 불일치가 발생할 수 있습니다.</p><h3 id="munje-2-non-repeatable-read"><a href="#munje-2-non-repeatable-read" class="header-anchor">2.2. </a><a class="markdownIt-Anchor" href="#문제-2-non-repeatable-read"></a> 문제 2 Non Repeatable Read</h3><p>트랜잭션 A가 어떤값을 1을 읽은후 A는 같은 쿼리를 또 실행할 예정이면 그 사이에 트랜잭션 B가 값 1을 2로 바꾸고 커밋해버리면서 A가 같은 쿼리 두번을 날리는 사이 두 쿼리의 결과가 다르게 되어버립니다.</p><p>즉, 트랜잭션에서 같은 쿼리를 두번 실행했을 때 발생할 수 있는 데이터 불일치 입니다.</p><p>Dirty Read에 비해서 발생할 확률은 적습니다.</p><h3 id="munje-3-phantom-read"><a href="#munje-3-phantom-read" class="header-anchor">2.3. </a><a class="markdownIt-Anchor" href="#문제-3-phantom-read"></a> 문제 3 Phantom Read</h3><p>트랜잭션 A가 어떤 조건을 사용하여 특정 범위의 값 [0,1,2,3,4]를 읽었을 때, 이후 A가 같은 쿼리를 실행예정이라면 그 사이에 트랜잭션 B가 같은 테이블에 값[5,6,7]을 추가해버리면 A가 같은 쿼리 두번을 날리는 사이에 두 쿼리의 결과가 다르게 되어버립니다.</p><p>즉, 한 트랜잭션에서  일정 범위의 레코드를 두번 이상 읽을 때 발생하는 데이터 불일치라고 할 수 있습니다.</p><h1 id="teuraenjaegsyeon-gyeogri-sujun"><a href="#teuraenjaegsyeon-gyeogri-sujun" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#트랜잭션-격리-수준"></a> 트랜잭션 격리 수준</h1><p>격리수준이란 일관성이 없는 데이터를 허용하는 수준을 말합니다.</p><h3 id="default"><a href="#default" class="header-anchor">3.1. </a><a class="markdownIt-Anchor" href="#default"></a> DEFAULT</h3><p>기본 격리수준을 뜻하며 기본값을 뜻합니다. = Database의 Isolation Level을 따릅니다.</p><h3 id="read-uncommited-level-01"><a href="#read-uncommited-level-01" class="header-anchor">3.2. </a><a class="markdownIt-Anchor" href="#read_uncommitedlevel-01"></a> READ_UNCOMMITED(level 01)</h3><p>커밋되지 않은(트랜잭션  처리)중인 데이터에 대한 읽기를 허용</p><p>즉 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 B라는 아직 완료되지 않은(Uncommited 혹은 Dirty) 데이터 B를 읽을 수 있습니다.</p><p>Problem1 - Dirty Read가 발생할 수 있습니다.</p><p>Transaction 레벨을 허용하지 않아[ READ_COMMITTED와 SERIALIZABLE만이 적합한 트랜잭션 레벨입니다 ] 라는 오류가 발생한다. 다른 옵션들은 문제 발생하지 않습니다.</p><h3 id="read-commited-level01"><a href="#read-commited-level01" class="header-anchor">3.3. </a><a class="markdownIt-Anchor" href="#read_commitedlevel01"></a> READ_COMMITED(Level01)</h3><p>트랜잭션 커밋이 된 확정 데이터만 읽기를 허용합니다. 그리고 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른사용자는 해당 데이터에 접근할 수 없습니다.</p><p>Problem1 - Dirty Read방지</p><h3 id="repeatable-read-level02"><a href="#repeatable-read-level02" class="header-anchor">3.4. </a><a class="markdownIt-Anchor" href="#repeatable_readlevel02"></a> REPEATABLE_READ(Level02)</h3><p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능합니다.</p><p>선행 트랜잭션이 읽은 데이터는 트랜잭션이 종료될 때까지 후행 트랜잭션이 갱신하거나 삭제가 불가능 하기때문에 같은 데이터를 두 번 쿼리했을 때 일관성 있는 결과를 리턴합니다.</p><p>Problems2 - Non Repeatable Read 방지</p><h3 id="serializable-level-03"><a href="#serializable-level-03" class="header-anchor">3.5. </a><a class="markdownIt-Anchor" href="#serializablelevel-03"></a> SERIALIZABLE(Level 03)</h3><p>데이터의 일관성 및 동시성을 위해 MVCC(Multi Version COncurrency Control)을 사용하지 않습니다.</p><p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다.</p><p>problem3 - phantom READ 방지</p><blockquote><p>주의 할점</p></blockquote><p>격리 수준이 올라갈 수록 성능 저하의 우려를 가지고 있습니다.</p><blockquote><p>MVCC?</p></blockquote><p>MVCC는 다중 사용자 데이터베이스 성능을 위한 기술로 데이터 조회시 LOCK을 사용하지 않고 데이터의 버전을 관리해 데이터의 일관성 및 동시성을 높이는 기술입니다.</p><p>트랜잭션이 완료 될 때까지 SELECT 문장이 사용하는 모든 데이터에 shared lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다.</p><blockquote><p>REFERENCE</p></blockquote><p><a href="https://goddaehee.tistory.com/167" target="_blank" rel="noopener">https://goddaehee.tistory.com/167</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;transaction-teuraenjaegsyeon&quot;&gt;&lt;a href=&quot;#transaction-teuraenjaegsyeon&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href
      
    
    </summary>
    
    
      <category term="OS" scheme="http://gwanhyeon.github.io/categories/os/"/>
    
    
      <category term="트랜잭션" scheme="http://gwanhyeon.github.io/tags/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98/"/>
    
      <category term="Transaction" scheme="http://gwanhyeon.github.io/tags/transaction/"/>
    
  </entry>
  
  <entry>
    <title>Codility FrogRiverOne</title>
    <link href="http://gwanhyeon.github.io/Codility-20210302-codility-frogriverone/"/>
    <id>http://gwanhyeon.github.io/Codility-20210302-codility-frogriverone/</id>
    <published>2021-03-02T09:26:18.000Z</published>
    <updated>2021-03-02T09:32:37.777Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-frogriverone"><a href="#codility-frogriverone" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-frogriverone"></a> <a href="https://app.codility.com/programmers/lessons/4-counting_elements/frog_river_one/" target="_blank" rel="noopener">Codility FrogRiverOne</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>해당 문제는 개구리가 강 반대편으로 점프할 수 있는 가장 빠른 시간을 찾아야 합니다. 즉, 1-X까지의 값이 모두 주여졌을때의 현재 인덱스값을 반환하면 되는 문제였습니다.</p><ol><li>set을 사용하여 모든 개구리가 점프하는 시간들을 담아줍니다.</li><li>시간들이1-X까지의 값 즉, set.size()값이 같은경우에 현재 해당하는 idx값을 리턴시켜줍니다.</li></ol><p>처음에 문제를 제대로 이해를 하지못하여 시간을 쓴 문제였습니다…</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FrogRiverOne_lesson04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">5</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Set&lt;Integer&gt; s = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> answer = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            s.add(A[i]);</span><br><span class="line">            <span class="keyword">if</span>(s.size() == X)&#123;</span><br><span class="line">                answer = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-frogriverone&quot;&gt;&lt;a href=&quot;#codility-frogriverone&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-fr
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
  </entry>
  
  <entry>
    <title>Codility PermMissingElem</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-permmissingelem/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-permmissingelem/</id>
    <published>2021-02-28T10:56:15.000Z</published>
    <updated>2021-02-28T10:58:35.541Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-permmissingelem"><a href="#codility-permmissingelem" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-permmissingelem"></a> <a href="https://app.codility.com/programmers/lessons/3-time_complexity/perm_missing_elem/" target="_blank" rel="noopener">codility PermMissingElem</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>check변수를 선언하여 나온 elements를 모두 체크를 시켜줍니다.</li><li>값은 1부터 range까지 진행되므로 1부터 진행하여 check값까지 진행하면서 false인값일때 해당 엘리먼트의 값을 반환시켜줍니다.</li></ol><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermMissingElem_lesson03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        Arrays.sort(A);</span><br><span class="line">        <span class="keyword">boolean</span>[] check = <span class="keyword">new</span> <span class="keyword">boolean</span>[A.length+<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// 0, 1, 2, 3</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            check[A[i]] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=check.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!check[i])&#123;</span><br><span class="line">                answer = i;</span><br><span class="line">                System.out.println(answer);</span><br><span class="line">                <span class="keyword">return</span> answer;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-permmissingelem&quot;&gt;&lt;a href=&quot;#codility-permmissingelem&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codil
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="TimeComplexity" scheme="http://gwanhyeon.github.io/tags/timecomplexity/"/>
    
  </entry>
  
  <entry>
    <title>Codility Frog Jump</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-frog-jump/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-frog-jump/</id>
    <published>2021-02-28T07:39:43.000Z</published>
    <updated>2021-02-28T07:48:36.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-frog-jump"><a href="#codility-frog-jump" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-frog-jump"></a> <a href="https://app.codility.com/programmers/lessons/3-time_complexity/frog_jmp/" target="_blank" rel="noopener">Codility frog jump</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>최대한 Y의 범위까지 몇번을 점프할 수 있는지를 확인하는 문제입니다.<br>처음에 range를 제대로 보지못하고 while문으로 처리를 하였는데 시간초과가 나왔습니다.<br>이분탐색으로 풀어야하나라는 생각을 했지만 단순히 생각하면 매우 간단한 문제였습니다.</li><li>전체 범위 - 현재 위치를 빼주고 해당 점프의 value만큼을 나누어주면 몇번뛰었는지 개수를 알 수 있습니다.<br>즉, Y-X -&gt; Y-X / D 의 값으로 나눈값을 처리하였습니다. 나머지가 0이면 해당점프까지만 진행할 수 있고, 나머지가 그것보다 크다면 그것보다 한번더 점프가 가능합니다.</li></ol><blockquote><p>시간복잡도</p></blockquote><p>O(1)</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">frogjmp_lesson03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">10</span>,<span class="number">85</span>,<span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span> Y, <span class="keyword">int</span> D)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        <span class="comment">// 단순히 반복문으로 터지는 로직</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        int jump = X;</span></span><br><span class="line"><span class="comment">        int answer = 0;</span></span><br><span class="line"><span class="comment">        while(jump &lt; Y)&#123;</span></span><br><span class="line"><span class="comment">            jump += D;</span></span><br><span class="line"><span class="comment">            answer++;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        System.out.println("answer = " + answer);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">int</span> jumpValue = Y-X;</span><br><span class="line">        <span class="keyword">int</span> jumpSize = jumpValue / D;</span><br><span class="line">        <span class="keyword">int</span> answer = (jumpSize % D) == <span class="number">0</span>? jumpSize : jumpSize+<span class="number">1</span>;</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-frog-jump&quot;&gt;&lt;a href=&quot;#codility-frog-jump&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-frog-jum
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="TimeComplexity" scheme="http://gwanhyeon.github.io/tags/timecomplexity/"/>
    
  </entry>
  
  <entry>
    <title>Codility Odd Occurrences In Array</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-oddoccurrencesinarray/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-oddoccurrencesinarray/</id>
    <published>2021-02-28T07:08:00.000Z</published>
    <updated>2021-02-28T07:11:24.109Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-oddoccurrencesinarray"><a href="#codility-oddoccurrencesinarray" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-oddoccurrencesinarray"></a> <a href="https://app.codility.com/programmers/lessons/2-arrays/" target="_blank" rel="noopener">Codility OddOccurrencesInArray </a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ol><li>map을 사용하여 짝을 이루는지 안이루는지 value를 설정합니다.<br>만약 동일한 값이 존재하면 value+1, 그게 아니면 1</li><li>map에 존재하는 value중에서 홀수인 값의 key값을 리턴해주면 정답이 됩니다.<br>저 같은 경우 홀수값이 아닌 반드시 1의 값일 경우로 조건을 걸었다가 68%에서 터져서 다시 살펴보니 문제를 잘못읽어 홀수에 대한 처리를 정확하게 하지 못했습니다.</li></ol><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OddOccurrencesInArray_lesson02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>&#125;);</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">9</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">9</span>&#125;);</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">42</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; m = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Arrays.sort(A);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!m.containsKey(A[i]))&#123;</span><br><span class="line">                m.put(A[i], <span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> mValue = m.get(A[i]);</span><br><span class="line">                m.put(A[i], mValue+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Integer key :  m.keySet())&#123;</span><br><span class="line">            <span class="keyword">int</span> value = m.get(key);</span><br><span class="line">            <span class="keyword">if</span>(value % <span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">                answer = key;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"answer = "</span> + answer);</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-oddoccurrencesinarray&quot;&gt;&lt;a href=&quot;#codility-oddoccurrencesinarray&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; 
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="Array" scheme="http://gwanhyeon.github.io/tags/array/"/>
    
  </entry>
  
  <entry>
    <title>Codility CycleRotation</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-cycle-rotation/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-cycle-rotation/</id>
    <published>2021-02-28T06:31:06.000Z</published>
    <updated>2021-02-28T08:01:03.156Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-cyclerotation"><a href="#codility-cyclerotation" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-cyclerotation"></a> <a href="https://app.codility.com/programmers/lessons/2-arrays/" target="_blank" rel="noopener">Codility CycleRotation</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><ul><li>linkedlist를 사용하여 뒤에있는값들을 shift해주면 간단하게 풀리는 문제.</li><li>만약 배열이 빈값이 들어올 경우 들어온 값을 그대로 리턴해주면 됩니다. 케이스하나에 걸려버렸습니다.</li></ul><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicRotation_lesson02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">6</span>&#125;,<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        LinkedList&lt;Integer&gt; linkedList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(A.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> A;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;A.length; i++)&#123;</span><br><span class="line">            linkedList.add(A[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> last = linkedList.removeLast();</span><br><span class="line">            linkedList.addFirst(last);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[linkedList.size()];</span><br><span class="line">        <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer integer : linkedList) &#123;</span><br><span class="line">            answer[idx++] = integer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-cyclerotation&quot;&gt;&lt;a href=&quot;#codility-cyclerotation&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="linkedlist" scheme="http://gwanhyeon.github.io/tags/linkedlist/"/>
    
      <category term="Array" scheme="http://gwanhyeon.github.io/tags/array/"/>
    
  </entry>
  
  <entry>
    <title>Codility Binarygap</title>
    <link href="http://gwanhyeon.github.io/Codility-20210228-codility-binary-gap/"/>
    <id>http://gwanhyeon.github.io/Codility-20210228-codility-binary-gap/</id>
    <published>2021-02-28T05:52:46.000Z</published>
    <updated>2021-02-28T08:00:51.694Z</updated>
    
    <content type="html"><![CDATA[<h1 id="codility-binary-gap"><a href="#codility-binary-gap" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#codility-binary-gap"></a> <a href="https://app.codility.com/programmers/lessons/2-arrays/" target="_blank" rel="noopener">Codility Binary Gap</a></h1><h2 id="keompyutingjeog-sago"><a href="#keompyutingjeog-sago" class="header-anchor">1.1. </a><a class="markdownIt-Anchor" href="#컴퓨팅적-사고"></a> 컴퓨팅적 사고</h2><p>이진수를 활용하여 이진수의 1의 위치에서 가장 최댓값을 구하는 간단한 문제였습니다. 약 20분정도 소요된 문제입니다. 처음에는 Integer.binaryString() 함수를 사용하지 않고 직접 구현을 하였는데, 불 필요해보였습니다. reverse()도 따로해줘야하고 시간복잡도면에서 뛰어나지 않다고 생각을 하게 되었습니다.</p><ol><li>N의 값 이진수로 변환합니다.</li><li>이진수로 변환후 1의 위치를 리스트에 저장합니다.</li><li>리스트에 담긴 위치별로 substring을 사용하여 값에 대한 length를 체크하여 최댓값을 구해줍니다.</li></ol><p>시간복잡도: O(N)</p><h2 id="soseukodeu"><a href="#soseukodeu" class="header-anchor">1.2. </a><a class="markdownIt-Anchor" href="#소스코드"></a> 소스코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">binaryGap_lesson01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        solution(<span class="number">9</span>);</span><br><span class="line">        solution(<span class="number">1162</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code in Java SE 8</span></span><br><span class="line">        <span class="comment">/* 직접 구현하기 이진수로 변경</span></span><br><span class="line"><span class="comment">        List&lt;Integer&gt; arrList = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">                while(N &gt; 0)&#123;</span></span><br><span class="line"><span class="comment">                    int div = N % 2;</span></span><br><span class="line"><span class="comment">                    N = N / 2;</span></span><br><span class="line"><span class="comment">                    arrList.add(div);</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">                Collections.reverse(arrList);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        String binaryStr = Integer.toBinaryString(N);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        List&lt;Integer&gt; arrList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;binaryStr.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(binaryStr.charAt(i) == <span class="string">'1'</span>)&#123;</span><br><span class="line">                cnt++;</span><br><span class="line">                arrList.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(cnt &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrList.size() - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                String subStr = binaryStr.substring(arrList.get(i), arrList.get(i+<span class="number">1</span>));</span><br><span class="line">                answer = Math.max(answer, subStr.length()-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//System.out.println("answer = " + answer);</span></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;codility-binary-gap&quot;&gt;&lt;a href=&quot;#codility-binary-gap&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#codility-binary
      
    
    </summary>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/categories/codility/"/>
    
    
      <category term="Codility" scheme="http://gwanhyeon.github.io/tags/codility/"/>
    
      <category term="binary" scheme="http://gwanhyeon.github.io/tags/binary/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Bucket Aggregation(버켓 어그리게이션)</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-bucket-aggregation/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-bucket-aggregation/</id>
    <published>2021-02-19T07:00:40.000Z</published>
    <updated>2021-02-19T08:13:04.879Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutigseoci-bucket-aggregation"><a href="#elk-elraseutigseoci-bucket-aggregation" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱서치-bucket-aggregation"></a> ELK  엘라스틱서치 Bucket Aggregation</h1><blockquote><p>Bucket Aggregation이란?</p></blockquote><p>집계는 데이터를 그룹화하고 통계치를 얻는 기능입니다. SQL GROUP BY 및 SQL 집계 기능과 대략 같다고 보면 가장 쉽게 이해할 수 있습니다. Elasticsearch에서는 하나의 응답에서 검색 적중을 반환하는 검색을 실행함과 동시에 그와는 별도로 집계 결과를 반환할 수 있습니다. 즉 간결한 API를 사용하여 쿼리와 여러 집계를 실행하고 두 작업(또는 둘 중 하나)의 결과를 한꺼번에 얻어 네트워크 왕복을 피할 수 있다는 점에서 강력하고 효율적입니다.</p><p>요약하면, 평균을 구할때는 Matrix Aggregation을 사용하고 Bucket Aggregation은 그룹 및 통계치 기능하는 종류중 하나입니다.</p><blockquote><p>AGGREGATIONS STRUCTURE(어그리게이션 구조)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GET &lt;인덱스명&gt;/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    … &lt;쿼리 구문&gt; …</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"&lt;임의의 aggregation 1&gt;"</span>: &#123;</span><br><span class="line">      <span class="string">"&lt;aggregation 종류&gt;"</span>: &#123;</span><br><span class="line">        … &lt;aggreagation 구문&gt; …</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"&lt;임의의 aggregation 2&gt;"</span>: &#123;</span><br><span class="line">      <span class="string">"&lt;aggregation 종류&gt;"</span>: &#123;</span><br><span class="line">        … &lt;aggreagation 구문&gt; …</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Aggregation 에는 크게 Metrics 그리고 Bucket 두 종류가 있습니다. Aggregations 구문이나 옵션에 metrics 이거나 bucket 이라고 따로 명시를 하지는 않습니다. Aggregation 종류들 중 숫자 또는 날짜 필드의 값을 가지고 계산을 하는 aggregation 들을 metrics aggregation 이라고 분류하고, 범위나 keyword 값 등을 가지고 도큐먼트들을 그룹화 하는 aggregation 들을 bucket aggregation 이라고 분류 합니다.</p><blockquote><p>basketball 인덱스 생성</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT -H &apos;Content-Type:application/json&apos; localhost:9200/basketball</span><br><span class="line">&#123;&quot;acknowledged&quot;:true,&quot;shards_acknowledged&quot;:true,&quot;index&quot;:&quot;basketball&quot;&#125;%</span><br></pre></td></tr></table></figure><blockquote><p>baseketball 인덱스 매핑 조회<br>해당 basketball_mapping JSON값들을 확인해보겠습니다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vi</span> basketball_mapping.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  2     <span class="string">"record"</span> : &#123;</span><br><span class="line">  3         <span class="string">"properties"</span> : &#123;</span><br><span class="line">  4             <span class="string">"team"</span> : &#123;</span><br><span class="line">  5                 <span class="string">"type"</span> : <span class="string">"text"</span>,</span><br><span class="line">  6                 <span class="string">"fielddata"</span> : <span class="literal">true</span></span><br><span class="line">  7             &#125;,</span><br><span class="line">  8             <span class="string">"name"</span> : &#123;</span><br><span class="line">  9                 <span class="string">"type"</span> : <span class="string">"text"</span>,</span><br><span class="line"> 10                 <span class="string">"fielddata"</span> : <span class="literal">true</span></span><br><span class="line"> 11             &#125;,</span><br><span class="line"> 12             <span class="string">"points"</span> : &#123;</span><br><span class="line"> 13                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 14             &#125;,</span><br><span class="line"> 15             <span class="string">"rebounds"</span> : &#123;</span><br><span class="line"> 16                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 17             &#125;,</span><br><span class="line"> 18             <span class="string">"assists"</span> : &#123;</span><br><span class="line"> 19                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 20             &#125;,</span><br><span class="line"> 21             <span class="string">"blocks"</span> : &#123;</span><br><span class="line"> 22                 <span class="string">"type"</span> : <span class="string">"long"</span></span><br><span class="line"> 23             &#125;,</span><br><span class="line"> 24             <span class="string">"submit_date"</span> : &#123;</span><br><span class="line"> 25                 <span class="string">"type"</span> : <span class="string">"date"</span>,</span><br><span class="line"> 26                 <span class="string">"format"</span> : <span class="string">"yyyy-MM-dd"</span></span><br><span class="line"> 27             &#125;</span><br><span class="line"> 28         &#125;</span><br><span class="line"> 29     &#125;</span><br><span class="line"> 30 &#125;</span><br><span class="line">~</span><br></pre></td></tr></table></figure><blockquote><p>baseketball 매핑 타입 삽입</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/basketball/record/_mapping&amp;include_type_name=true'</span> -d @basketball_mapping.json</span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"_mapping&amp;include_type_name=true"</span>,<span class="string">"_version"</span>:5,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:12,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p><strong>의미</strong></p><p>basketball: Index<br>record: Type<br>_mapping: Mapping<br>-d: direct</p><blockquote><p>baseketball documents 삽입</p></blockquote><p><strong>twoteam_basketball.json</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"1"</span> &#125;     &#125;</span><br><span class="line"> 2 &#123;<span class="string">"team"</span> : <span class="string">"Chicago"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>, <span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> :     3,<span class="string">"assists"</span> : 4, <span class="string">"blocks"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;</span><br><span class="line"> 3 &#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"2"</span> &#125;     &#125;</span><br><span class="line"> 4 &#123;<span class="string">"team"</span> : <span class="string">"Chicago"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,<span class="string">"points"</span> : 20,<span class="string">"rebounds"</span> :     5,<span class="string">"assists"</span> : 8, <span class="string">"blocks"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"1996-10-13"</span>&#125;</span><br><span class="line"> 5 &#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"3"</span> &#125;     &#125;</span><br><span class="line"> 6 &#123;<span class="string">"team"</span> : <span class="string">"LA"</span>,<span class="string">"name"</span> : <span class="string">"Kobe Bryant"</span>,<span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> : 2,<span class="string">"assis    ts"</span> : 8, <span class="string">"blocks"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2014-10-13"</span>&#125;</span><br><span class="line"> 7 &#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"4"</span> &#125;     &#125;</span><br><span class="line"> 8 &#123;<span class="string">"team"</span> : <span class="string">"LA"</span>,<span class="string">"name"</span> : <span class="string">"Kobe Bryant"</span>,<span class="string">"points"</span> : 40,<span class="string">"rebounds"</span> : 4,<span class="string">"assis    ts"</span> : 8, <span class="string">"blocks"</span> : 6, <span class="string">"submit_date"</span> : <span class="string">"2014-11-13"</span>&#125;</span><br></pre></td></tr></table></figure><p><strong>document삽입</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_bulk'</span> --data-binary @twoteam_basketball.json</span><br><span class="line">&#123;<span class="string">"took"</span>:411,<span class="string">"errors"</span>:<span class="literal">false</span>,<span class="string">"items"</span>:[&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:1,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"2"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:2,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"3"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:3,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"4"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:4,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;]&#125;%</span><br></pre></td></tr></table></figure><blockquote><p>Term Aggregation(GROUP BY TEAM)</p></blockquote><p><strong>terms_aggs.json 데이터 확인</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vi terms_aggs.json</span><br><span class="line"></span><br><span class="line">1 &#123;</span><br><span class="line">2     <span class="string">"size"</span> : 0,</span><br><span class="line">3     <span class="string">"aggs"</span> : &#123;</span><br><span class="line">4         <span class="string">"players"</span> : &#123;</span><br><span class="line">5             <span class="string">"terms"</span> : &#123;</span><br><span class="line">6                 <span class="string">"field"</span> : <span class="string">"team"</span></span><br><span class="line">7             &#125;</span><br><span class="line">8         &#125;</span><br><span class="line">9     &#125;</span><br><span class="line">10 &#125;</span><br></pre></td></tr></table></figure><p><strong>terms_aggs.json 조회</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$curl -XGET -H &apos;Content-Type:application/json&apos; &apos;localhost:9200/_search?pretty&apos; --data-binary @terms_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;took&quot; : 880,</span><br><span class="line">  &quot;timed_out&quot; : false,</span><br><span class="line">  &quot;_shards&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : 7,</span><br><span class="line">    &quot;successful&quot; : 6,</span><br><span class="line">    &quot;skipped&quot; : 0,</span><br><span class="line">    &quot;failed&quot; : 1,</span><br><span class="line">    &quot;failures&quot; : [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;shard&quot; : 0,</span><br><span class="line">        &quot;index&quot; : &quot;basketball&quot;,</span><br><span class="line">        &quot;node&quot; : &quot;gsruIbFGTQmlTUIk7jr1Aw&quot;,</span><br><span class="line">        &quot;reason&quot; : &#123;</span><br><span class="line">          &quot;type&quot; : &quot;illegal_argument_exception&quot;,</span><br><span class="line">          &quot;reason&quot; : &quot;Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [team] in order to load field data by uninverting the inverted index. Note that this can use significant memory.&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;hits&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : &#123;</span><br><span class="line">      &quot;value&quot; : 48,</span><br><span class="line">      &quot;relation&quot; : &quot;eq&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;max_score&quot; : null,</span><br><span class="line">    &quot;hits&quot; : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;aggregations&quot; : &#123;</span><br><span class="line">    &quot;players&quot; : &#123;</span><br><span class="line">      &quot;doc_count_error_upper_bound&quot; : 0,</span><br><span class="line">      &quot;sum_other_doc_count&quot; : 0,</span><br><span class="line">      &quot;buckets&quot; : [ ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Aggregation을 조회해온것을 확인할 수 있습니다.</p><blockquote><p>AGGS(STATS GROUP BT TEAM)</p></blockquote><p><strong>vi stats_by_team.json 데이터확인</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vi</span> stat_by_team.json</span><br><span class="line">1 &#123;</span><br><span class="line"> 2     <span class="string">"size"</span> : 0,</span><br><span class="line"> 3     <span class="string">"aggs"</span> : &#123;</span><br><span class="line"> 4         <span class="string">"team_stats"</span> : &#123;</span><br><span class="line"> 5             <span class="string">"terms"</span> : &#123;</span><br><span class="line"> 6                 <span class="string">"field"</span> : <span class="string">"team"</span></span><br><span class="line"> 7             &#125;,</span><br><span class="line"> 8             <span class="string">"aggs"</span> : &#123;</span><br><span class="line"> 9                 <span class="string">"stats_score"</span> : &#123;</span><br><span class="line">10                     <span class="string">"stats"</span> : &#123;</span><br><span class="line">11                         <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">12                     &#125;</span><br><span class="line">13                 &#125;</span><br><span class="line">14             &#125;</span><br><span class="line">15         &#125;</span><br><span class="line">16     &#125;</span><br><span class="line">17 &#125;</span><br></pre></td></tr></table></figure><blockquote><p>Aggregation 내용 확인하기</p></blockquote><p>size는 보기편하기위해서 넣어준 속성이되고, 팀별로 documents들을 묶고, 나머지 어그리제이션을 사용하여 점수별로 Stat를 한번 표시해라 라는 의미가 됩니다. 각 팀별로 통계분석을 도출하면 되는 뜻입니다.</p><p><strong>AGGS(STATS GROUP BT TEAM)조회</strong></p><blockquote><p>결과값 데이터가 제대로 들어가지않은부분이 있어서 다시 수정 필요.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?q=points&amp;pretty'</span> --data-binary @stats_by_team.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 44,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 6,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 1,</span><br><span class="line">    <span class="string">"failures"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"shard"</span> : 0,</span><br><span class="line">        <span class="string">"index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"node"</span> : <span class="string">"gsruIbFGTQmlTUIk7jr1Aw"</span>,</span><br><span class="line">        <span class="string">"reason"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"illegal_argument_exception"</span>,</span><br><span class="line">          <span class="string">"reason"</span> : <span class="string">"Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [team] in order to load field data by uninverting the inverted index. Note that this can use significant memory."</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 0,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"team_stats"</span> : &#123;</span><br><span class="line">      <span class="string">"doc_count_error_upper_bound"</span> : 0,</span><br><span class="line">      <span class="string">"sum_other_doc_count"</span> : 0,</span><br><span class="line">      <span class="string">"buckets"</span> : [ ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Reference</p></blockquote><p><a href="https://esbook.kimjmin.net/08-aggregations/8.2-bucket-aggregations" target="_blank" rel="noopener">https://esbook.kimjmin.net/08-aggregations/8.2-bucket-aggregations</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutigseoci-bucket-aggregation&quot;&gt;&lt;a href=&quot;#elk-elraseutigseoci-bucket-aggregation&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;mar
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="Aggregation" scheme="http://gwanhyeon.github.io/tags/aggregation/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Metric Aggregation(메트릭 어그리게이션)</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-metric-aggregation/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-metric-aggregation/</id>
    <published>2021-02-19T06:12:31.000Z</published>
    <updated>2021-02-19T07:11:37.435Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation"><a href="#elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#엘라스틱서치-metric-어그리게이션metric-aggregation"></a> 엘라스틱서치 Metric 어그리게이션(Metric Aggregation)</h1><blockquote><p>Aggregation ?</p></blockquote><p>Elasticsearch 는 검색엔진으로 개발되었지만 지금은 로그분석을 비롯해 다양한 목적의데이터 시스템으로 사용되고 있습니다. Elasticsearch가 이렇게 다양한 용도로 활용이 될 수 있는 이유는 데이터를 단순히 검색만 하는 것이 아니라 여러가지 연산을 할 수 있는 Aggregation 기능이 있기 때문입니다</p><blockquote><p>메트릭 어그리게이션(Metric Aggregation)?<br>가장 흔하게 사용되는 metrics aggregations 은 min, max, sum, avg aggregation 입니다. 순서대로 명시한 필드의 최소, 최대, 합, 평균 값을 가져오는 aggregation 입니다.<br>엘라스틱서치안에 있는 Document안에 있는 값을 조합을 통하여 값을 핸들링할때 사용하는 컨셉이라고 할 수 있습니다.</p></blockquote><blockquote><p>메트릭 어그리게이션(Metric Aggregation) 구조</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET my_stations/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: 0,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"all_passangers"</span>: &#123;</span><br><span class="line">      <span class="string">"sum"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"passangers"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Data</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"1"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>, <span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> : 3,<span class="string">"assists"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"basketball"</span>, <span class="string">"_type"</span> : <span class="string">"record"</span>, <span class="string">"_id"</span> : <span class="string">"2"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,<span class="string">"points"</span> : 20,<span class="string">"rebounds"</span> : 5,<span class="string">"assists"</span> : 8, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Data Insert</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_bulk'</span> --data-binary @simple_basketball.json</span><br><span class="line">&#123;<span class="string">"took"</span>:58,<span class="string">"errors"</span>:<span class="literal">false</span>,<span class="string">"items"</span>:[&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:2,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:2,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:200&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"2"</span>,<span class="string">"_version"</span>:2,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:3,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:200&#125;&#125;]&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같은 데이터를 -XPOST 옵션과 --data-binary를 통해 넣어주겠습니다.<br>평균값을 넣어주는 json파일의 형식을 조회해오면 다음과 같은 값들을 넣을 수 있습니다.</p><blockquote><p>평균값 json 조회</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET localhost:9200/_search\?pretty --data-binary @avg_point_aggs.json</span><br></pre></td></tr></table></figure><blockquote><p>평균값 json 조회 결과</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @avg_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 21,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"avg_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 25.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 평균값을 구한것을 확인할 수 있습니다.</p><blockquote><p>최댓값 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"max_score"</span> : &#123;</span><br><span class="line">            <span class="string">"max"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>최댓값 조회</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @max_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 36,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"max_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 30.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 최댓값을 구한것을 확인할 수 있습니다.</p><blockquote><p>최솟값 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"min_score"</span> : &#123;</span><br><span class="line">            <span class="string">"min"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>최솟값 조회</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @min_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 268,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"min_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 20.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 최솟값을 구한것을 확인할 수 있습니다.</p><blockquote><p>모든합(SUM) 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"sum_score"</span> : &#123;</span><br><span class="line">            <span class="string">"sum"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>모든합 조회</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @sum_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 17,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"sum_score"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 모든합을 구한것을 확인할 수 있습니다.</p><blockquote><p>모든값 목록 (STAT) 구하기</p></blockquote><p><strong>Data</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"size"</span> : 0,</span><br><span class="line">    <span class="string">"aggs"</span> : &#123;</span><br><span class="line">        <span class="string">"stats_score"</span> : &#123;</span><br><span class="line">            <span class="string">"stats"</span> : &#123;</span><br><span class="line">                <span class="string">"field"</span> : <span class="string">"points"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>모든값 목록 (STAT) 구하기</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_search?pretty'</span> --data-binary @stat_points_aggs.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 66,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 7,</span><br><span class="line">    <span class="string">"successful"</span> : 7,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 50,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : null,</span><br><span class="line">    <span class="string">"hits"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggregations"</span> : &#123;</span><br><span class="line">    <span class="string">"stats_score"</span> : &#123;</span><br><span class="line">      <span class="string">"count"</span> : 2,</span><br><span class="line">      <span class="string">"min"</span> : 20.0,</span><br><span class="line">      <span class="string">"max"</span> : 30.0,</span><br><span class="line">      <span class="string">"avg"</span> : 25.0,</span><br><span class="line">      <span class="string">"sum"</span> : 50.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 Metric Aggregation을 사용하여 모든 연사결과의 목록을 구한것을 확인할 수 있습니다.</p><blockquote><p>Reference</p></blockquote><p><a href="https://esbook.kimjmin.net/08-aggregations/8.1-metrics-aggregations" target="_blank" rel="noopener">https://esbook.kimjmin.net/08-aggregations/8.1-metrics-aggregations</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation&quot;&gt;&lt;a href=&quot;#elraseutigseoci-metric-eogeurigeisyeon-metric-aggregation&quot; clas
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="MetricAggregation" scheme="http://gwanhyeon.github.io/tags/metricaggregation/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Search Function</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-search-function/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-search-function/</id>
    <published>2021-02-19T05:54:27.000Z</published>
    <updated>2021-02-19T08:15:05.171Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutig-seoci-searchfunction"><a href="#elk-elraseutig-seoci-searchfunction" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱-서치-searchfunction"></a> ELK 엘라스틱 서치 SearchFunction</h1><p>이번에 포스팅에서는 ELK의 SearchFunction에 대해서 살펴보겠습니다.</p><blockquote><p>Data</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> <span class="string">'localhost:9200/_bulk'</span> --dat</span><br><span class="line">a-binary @simple_basketball.json</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">"took"</span>:1391,<span class="string">"errors"</span>:<span class="literal">false</span>,<span class="string">"items"</span>:[&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:0,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;,&#123;<span class="string">"index"</span>:&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"2"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:1,<span class="string">"_primary_term"</span>:1,<span class="string">"status"</span>:201&#125;&#125;]&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같은 데이터를 가지고 확인을 해보겠습니다. 그러면 두개의 Document가 삽입되게 됩니다.</p><blockquote><p>Search</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET localhost:9200/basketball/record/_search\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 80,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 1,</span><br><span class="line">    <span class="string">"successful"</span> : 1,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 2,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : 1.0,</span><br><span class="line">    <span class="string">"hits"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"record"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"_score"</span> : 1.0,</span><br><span class="line">        <span class="string">"_source"</span> : &#123;</span><br><span class="line">          <span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,</span><br><span class="line">          <span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,</span><br><span class="line">          <span class="string">"points"</span> : 30,</span><br><span class="line">          <span class="string">"rebounds"</span> : 3,</span><br><span class="line">          <span class="string">"assists"</span> : 4,</span><br><span class="line">          <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"record"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"2"</span>,</span><br><span class="line">        <span class="string">"_score"</span> : 1.0,</span><br><span class="line">        <span class="string">"_source"</span> : &#123;</span><br><span class="line">          <span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,</span><br><span class="line">          <span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,</span><br><span class="line">          <span class="string">"points"</span> : 20,</span><br><span class="line">          <span class="string">"rebounds"</span> : 5,</span><br><span class="line">          <span class="string">"assists"</span> : 8,</span><br><span class="line">          <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 데이터가 정상적으로 들어가고 Documents가 조회되는것들을 확인할 수 있습니다.</p><blockquote><p>SEARCH -URI</p></blockquote><p>-URI 옵션을 사용하여 제가 조회할 데이터들을 조회할 수 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET <span class="string">'localhost:9200/basketball/record/_search?q=points:30&amp;pretty'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 18,</span><br><span class="line">  <span class="string">"timed_out"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"_shards"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : 1,</span><br><span class="line">    <span class="string">"successful"</span> : 1,</span><br><span class="line">    <span class="string">"skipped"</span> : 0,</span><br><span class="line">    <span class="string">"failed"</span> : 0</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"hits"</span> : &#123;</span><br><span class="line">    <span class="string">"total"</span> : &#123;</span><br><span class="line">      <span class="string">"value"</span> : 1,</span><br><span class="line">      <span class="string">"relation"</span> : <span class="string">"eq"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"max_score"</span> : 1.0,</span><br><span class="line">    <span class="string">"hits"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"basketball"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"record"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"_score"</span> : 1.0,</span><br><span class="line">        <span class="string">"_source"</span> : &#123;</span><br><span class="line">          <span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,</span><br><span class="line">          <span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>,</span><br><span class="line">          <span class="string">"points"</span> : 30,</span><br><span class="line">          <span class="string">"rebounds"</span> : 3,</span><br><span class="line">          <span class="string">"assists"</span> : 4,</span><br><span class="line">          <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>SEARCH - REQUEST BODY</p></blockquote><p>이번에 살펴볼 옵션은 -REQUEST BODY옵션입니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET -H <span class="string">'Content-Type:application/json'</span> localhost:9200/basketball/record/_search -d <span class="string">'</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">"query" : &#123;</span></span><br><span class="line"><span class="string">"term" : &#123;"points" : 30&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;'</span></span><br><span class="line">&#123;<span class="string">"took"</span>:16,<span class="string">"timed_out"</span>:<span class="literal">false</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:1,<span class="string">"successful"</span>:1,<span class="string">"skipped"</span>:0,<span class="string">"failed"</span>:0&#125;,<span class="string">"hits"</span>:&#123;<span class="string">"total"</span>:&#123;<span class="string">"value"</span>:1,<span class="string">"relation"</span>:<span class="string">"eq"</span>&#125;,<span class="string">"max_score"</span>:1.0,<span class="string">"hits"</span>:[&#123;<span class="string">"_index"</span>:<span class="string">"basketball"</span>,<span class="string">"_type"</span>:<span class="string">"record"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_score"</span>:1.0,<span class="string">"_source"</span>:&#123;<span class="string">"team"</span> : <span class="string">"Chicago Bulls"</span>,<span class="string">"name"</span> : <span class="string">"Michael Jordan"</span>, <span class="string">"points"</span> : 30,<span class="string">"rebounds"</span> : 3,<span class="string">"assists"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"1996-10-11"</span>&#125;&#125;]&#125;&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같이 직접 REQUEST BODY를 사용하여 값을 조회해오는모습을 볼 수 있습니다.<br>-d는 Direct로 처리하기 위한 옵션입니다.</p><blockquote><p>참고사항</p></blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-body.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-body.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutig-seoci-searchfunction&quot;&gt;&lt;a href=&quot;#elk-elraseutig-seoci-searchfunction&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownI
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="SearchFunction" scheme="http://gwanhyeon.github.io/tags/searchfunction/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱 서치 Mapping</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-mapping/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-mapping/</id>
    <published>2021-02-19T05:11:20.000Z</published>
    <updated>2021-02-19T05:39:44.746Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutigseoci-mapping"><a href="#elk-elraseutigseoci-mapping" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱서치-mapping"></a> ELK 엘라스틱서치 MAPPING</h1><p>ELK에서 말하는 개념은 RDS에서 스키마와 동일한 의미를 가지고 있습니다.<br>Mapping없이 ELK 데이터를 넣는것은 상당히 위험하고 Document Mapping이 되어있지않다면 Date, String과 같은 구별이 가지않을 수 있습니다.</p><p>잘못지정된 타입같은 경우 Kibana를 사용하여 데이터를 분리하여 보여주고 싶거나 데이터값의 평균값을 구할때 제대로된 계산이 처리되지 않을 수 있습니다.</p><blockquote><p>Mapping JSON</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"class"</span> : &#123;</span><br><span class="line">        <span class="string">"properties"</span> : &#123;</span><br><span class="line">            <span class="string">"title"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"professor"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"major"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"semester"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"student_count"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"unit"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"rating"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"submit_date"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"date"</span>,</span><br><span class="line">                <span class="string">"format"</span>: <span class="string">"yyyy-MM-dd"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"school_location"</span> : &#123;</span><br><span class="line">                <span class="string">"type"</span> : <span class="string">"geo_point"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>현재 Mapping 관계를 사용해보기 위해서 사용해볼 json형식은 다음과 같습니다.<br>Type:geo_point 같은 경우 Kibana Data시각화할때, 지도위에서 학교위치를 직접 표시할 수 있습니다. Type이 Date Format을 사용할경우 날짜별로 시각화를 처리할 수도 있습니다.</p><p>이제 다음과 같이 이전에 사용하였던 classes인덱스를 삭제해주고 다시 classes라는 인덱스를 재생성하여 Mapping 처리를  알아 보도록 하겠습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XDELETE http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;%</span><br><span class="line"> kgh  ~</span><br><span class="line"><span class="variable">$curl</span> -XPUT http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>,<span class="string">"shards_acknowledged"</span>:<span class="literal">true</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;%</span><br><span class="line"> kgh  ~</span><br><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"classes"</span> : &#123;</span><br><span class="line">    <span class="string">"aliases"</span> : &#123; &#125;,</span><br><span class="line">    <span class="string">"mappings"</span> : &#123; &#125;,</span><br><span class="line">    <span class="string">"settings"</span> : &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"routing"</span> : &#123;</span><br><span class="line">          <span class="string">"allocation"</span> : &#123;</span><br><span class="line">            <span class="string">"include"</span> : &#123;</span><br><span class="line">              <span class="string">"_tier_preference"</span> : <span class="string">"data_content"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"number_of_shards"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"provided_name"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"creation_date"</span> : <span class="string">"1613711830633"</span>,</span><br><span class="line">        <span class="string">"number_of_replicas"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"uuid"</span> : <span class="string">"q99TJFowRqu7LFB1DjowZQ"</span>,</span><br><span class="line">        <span class="string">"version"</span> : &#123;</span><br><span class="line">          <span class="string">"created"</span> : <span class="string">"7110199"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 인덱스를 삭제하고 재 생성한것을 보실 수 있습니다. 여기서 중요한점은<br>mapping이 현재 비어져있다는것입니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT -H <span class="string">'Content-Type:application/json'</span> <span class="string">'http://localhost:9200/classes/class/_mapping?include_type_name=true'</span> -d @classesRating_mapping.json</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;%</span><br></pre></td></tr></table></figure><p>Elasticsearch 6.0 will show this error. 가 발생하였는데, 제가 지금쓰고 있는 버전은 7.11버전을 사용중입니다.<br>즉, elasticsearch 7.x 버전부터는 curl 리퀘스트에서 헤더를 명확히 설정해주어야하고 또 mappign을 생성할 때에는 include_type_name을 true로 설정해주어야합니다.<br>이에 대해서 원인을 찾아보니 elasticsearch가 mapping 타입 중 string을 삭제하고 text로 변경하여 사용하고있다고 합니다.</p><p>버전별로 생기는 미세한 차이점을 잘 체크하면서 변경된 사항을 잘 확인해야될 것 같습니다.</p><p><a href="https://stackoverflow.com/questions/47452770/no-handler-for-type-string-declared-on-field-name" target="_blank" rel="noopener">https://stackoverflow.com/questions/47452770/no-handler-for-type-string-declared-on-field-name</a></p><blockquote><p>이제 다음과 같이 ELK 매핑이 되었는지 확인을 해보겠습니다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"classes"</span> : &#123;</span><br><span class="line">    <span class="string">"aliases"</span> : &#123; &#125;,</span><br><span class="line">    <span class="string">"mappings"</span> : &#123;</span><br><span class="line">      <span class="string">"properties"</span> : &#123;</span><br><span class="line">        <span class="string">"major"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"professor"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"rating"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"school_location"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"geo_point"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"semester"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"student_count"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"submit_date"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"date"</span>,</span><br><span class="line">          <span class="string">"format"</span> : <span class="string">"yyyy-MM-dd"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"title"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"text"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"unit"</span> : &#123;</span><br><span class="line">          <span class="string">"type"</span> : <span class="string">"integer"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"settings"</span> : &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"routing"</span> : &#123;</span><br><span class="line">          <span class="string">"allocation"</span> : &#123;</span><br><span class="line">            <span class="string">"include"</span> : &#123;</span><br><span class="line">              <span class="string">"_tier_preference"</span> : <span class="string">"data_content"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"number_of_shards"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"provided_name"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"creation_date"</span> : <span class="string">"1613711830633"</span>,</span><br><span class="line">        <span class="string">"number_of_replicas"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"uuid"</span> : <span class="string">"q99TJFowRqu7LFB1DjowZQ"</span>,</span><br><span class="line">        <span class="string">"version"</span> : &#123;</span><br><span class="line">          <span class="string">"created"</span> : <span class="string">"7110199"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이제 이런식으로 매핑을 진행하면 시각화에서 조금더 유연하게 처리가 가능하게 됩니다.다시 Document에 값을 집어 넣어보도록 하겠습니다.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H 'Content-Type:application/json' http://localhost:9200/_bulk\?pretty --data-binary @Classes.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"took"</span> : <span class="number">1703</span>,</span><br><span class="line">  <span class="attr">"errors"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"items"</span> : [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"2"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"3"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"5"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">3</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"6"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">4</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"7"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"8"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">6</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"9"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">7</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"10"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">8</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"11"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">9</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"12"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">10</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"13"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">11</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"14"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">12</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"15"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">13</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"16"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">14</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"17"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">15</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"18"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">16</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"19"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">17</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"20"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">18</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"21"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">19</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"22"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">20</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"23"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">21</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"24"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">22</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"index"</span> : &#123;</span><br><span class="line">        <span class="attr">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="attr">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="attr">"_id"</span> : <span class="string">"25"</span>,</span><br><span class="line">        <span class="attr">"_version"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">          <span class="attr">"total"</span> : <span class="number">2</span>,</span><br><span class="line">          <span class="attr">"successful"</span> : <span class="number">1</span>,</span><br><span class="line">          <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"_seq_no"</span> : <span class="number">23</span>,</span><br><span class="line">        <span class="attr">"_primary_term"</span> : <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"status"</span> : <span class="number">201</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>최종 출력</p></blockquote><p>이제 제대로 값들이 들어간것을 확인할 수 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 1,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 0,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [</span><br><span class="line">      <span class="string">"spring"</span>,</span><br><span class="line">      <span class="string">"fall"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5,</span><br><span class="line">    <span class="string">"submit_date"</span> : <span class="string">"2016-01-02"</span>,</span><br><span class="line">    <span class="string">"school_location"</span> : &#123;</span><br><span class="line">      <span class="string">"lat"</span> : 36.0,</span><br><span class="line">      <span class="string">"lon"</span> : -120.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutigseoci-mapping&quot;&gt;&lt;a href=&quot;#elk-elraseutigseoci-mapping&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="Mapping" scheme="http://gwanhyeon.github.io/tags/mapping/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 BULK</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-bulk/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-bulk/</id>
    <published>2021-02-19T04:57:51.000Z</published>
    <updated>2021-02-19T05:08:19.227Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elk-elraseutigseoci-bulk"><a href="#elk-elraseutigseoci-bulk" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#elk-엘라스틱서치-bulk"></a> ELK 엘라스틱서치 BULK</h1><blockquote><p>Elastic BULK란 무엇일까요?</p></blockquote><p>간단히 말해 여러개의 Document를 한번에 ElasticSearch에 넣는 방식을 말합니다.</p><p>그러면 바로 실습으로 알아보도록 하겠습니다.</p><p>제가 사용할 실습 json파일은 다음과 같습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"1"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,<span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 100,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-01-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"2"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Network"</span>,<span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-02-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"3"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Operating System"</span>,<span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-03-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"5"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 40,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-04-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.00, <span class="string">"lon"</span> : -112.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"6"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Network"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"summer"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-02-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 36.00, <span class="string">"lon"</span> : -120.00&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"7"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Operating System"</span>,<span class="string">"Professor"</span> : <span class="string">"Jeniffer Anderson"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 1, <span class="string">"submit_date"</span> : <span class="string">"2016-11-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"8"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Algorithm"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 80,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-10-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"9"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Data Structure"</span>,<span class="string">"Professor"</span> : <span class="string">"Tim Cook"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-07-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"10"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Computer Graphic"</span>,<span class="string">"Professor"</span> : <span class="string">"Jeniffer Anderson"</span>,<span class="string">"major"</span> : <span class="string">"Computer Science"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 60,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 39.97, <span class="string">"lon"</span> : -89.78&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"11"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Music Fundamental"</span>,<span class="string">"Professor"</span> : <span class="string">"Jay Z"</span>,<span class="string">"major"</span> : <span class="string">"Music"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 100,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-05-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"12"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Vocal Techniques"</span>,<span class="string">"Professor"</span> : <span class="string">"Beyonce"</span>,<span class="string">"major"</span> : <span class="string">"Music"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-11-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"13"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Guitar Techiniques"</span>,<span class="string">"Professor"</span> : <span class="string">"Eric Clapton"</span>,<span class="string">"major"</span> : <span class="string">"Music"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-03-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"14"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Finance"</span>,<span class="string">"Professor"</span> : <span class="string">"Bill Gates"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 50,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-01-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"15"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Marketing"</span>,<span class="string">"Professor"</span> : <span class="string">"Bill Gates"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 60,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-01-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"16"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Accounting Information Systems"</span>,<span class="string">"Professor"</span> : <span class="string">"Tom Cruise"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 100,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 1, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.51, <span class="string">"lon"</span> : -74.83&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"17"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Individual Taxation"</span>,<span class="string">"Professor"</span> : <span class="string">"Tom Cruise"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 1,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-08-02"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.32, <span class="string">"lon"</span> : -94.74&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"18"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Auditing"</span>,<span class="string">"Professor"</span> : <span class="string">"Victoria Park"</span>,<span class="string">"major"</span> : <span class="string">"Accounting"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 2,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-09-13"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.32, <span class="string">"lon"</span> : -94.74&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"19"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Cell Biology"</span>,<span class="string">"Professor"</span> : <span class="string">"Anjella Kim"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 40,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 5, <span class="string">"submit_date"</span> : <span class="string">"2016-02-22"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 42.32, <span class="string">"lon"</span> : -94.74&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"20"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Physiology"</span>,<span class="string">"Professor"</span> : <span class="string">"Jack Berk"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"summer"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 32.69, <span class="string">"lon"</span> : -99.44&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"21"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Neuroscience"</span>,<span class="string">"Professor"</span> : <span class="string">"Jihee Yang"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-06-03"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 32.69, <span class="string">"lon"</span> : -99.44&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"22"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Immunology"</span>,<span class="string">"Professor"</span> : <span class="string">"Meredith Lee"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"winter"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 2, <span class="string">"submit_date"</span> : <span class="string">"2016-06-21"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 32.69, <span class="string">"lon"</span> : -99.44&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"23"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Genetics"</span>,<span class="string">"Professor"</span> : <span class="string">"David Pollack"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"spring"</span>],<span class="string">"student_count"</span> : 20,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-06-30"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 28.22, <span class="string">"lon"</span> : -81.87&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"24"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Biochemistry"</span>,<span class="string">"Professor"</span> : <span class="string">"John Miller"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 3,<span class="string">"rating"</span> : 4, <span class="string">"submit_date"</span> : <span class="string">"2016-01-11"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 28.22, <span class="string">"lon"</span> : -81.87&#125;&#125;</span><br><span class="line">&#123; <span class="string">"index"</span> : &#123; <span class="string">"_index"</span> : <span class="string">"classes"</span>, <span class="string">"_type"</span> : <span class="string">"class"</span>, <span class="string">"_id"</span> : <span class="string">"25"</span> &#125; &#125;</span><br><span class="line">&#123;<span class="string">"title"</span> : <span class="string">"Anatomy"</span>,<span class="string">"Professor"</span> : <span class="string">"Tom Johnson"</span>,<span class="string">"major"</span> : <span class="string">"Medical"</span>,<span class="string">"semester"</span> : [<span class="string">"fall"</span>],<span class="string">"student_count"</span> : 30,<span class="string">"unit"</span> : 5,<span class="string">"rating"</span> : 3, <span class="string">"submit_date"</span> : <span class="string">"2016-11-12"</span>, <span class="string">"school_location"</span> : &#123;<span class="string">"lat"</span> : 28.22, <span class="string">"lon"</span> : -81.87&#125;&#125;</span><br></pre></td></tr></table></figure><p>Bulk 파일을 보면 Meta Information의 형식으로 가지고 있습니다.</p><blockquote><p>Bulk를 사용하여 값들을 Document에 삽입해보도록 하겠습니다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> http://localhost:9200/_bulk/\?pretty --data-binary @classes.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"took"</span> : 591,</span><br><span class="line">  <span class="string">"errors"</span> : <span class="literal">false</span>,</span><br><span class="line">  <span class="string">"items"</span> : [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 7,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"updated"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 6,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 200</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"2"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 7,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"3"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 8,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"5"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 9,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"6"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 10,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"7"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 11,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"8"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 12,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"9"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 13,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"10"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 14,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"11"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 15,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"12"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 16,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"13"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 17,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"14"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 18,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"15"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 19,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"16"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 20,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"17"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 21,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"18"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 22,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"19"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 23,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"20"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 24,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"21"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 25,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"22"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 26,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"23"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 27,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"24"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 28,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"index"</span> : &#123;</span><br><span class="line">        <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">        <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">        <span class="string">"_id"</span> : <span class="string">"25"</span>,</span><br><span class="line">        <span class="string">"_version"</span> : 1,</span><br><span class="line">        <span class="string">"result"</span> : <span class="string">"created"</span>,</span><br><span class="line">        <span class="string">"_shards"</span> : &#123;</span><br><span class="line">          <span class="string">"total"</span> : 2,</span><br><span class="line">          <span class="string">"successful"</span> : 1,</span><br><span class="line">          <span class="string">"failed"</span> : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"_seq_no"</span> : 29,</span><br><span class="line">        <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">        <span class="string">"status"</span> : 201</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같은형식으로 bulk파일들이 정상적으로 document에 들어간것을 확인할 수 있습니다</p><blockquote><p>Bulk Document 조회</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 7,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 6,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [</span><br><span class="line">      <span class="string">"spring"</span>,</span><br><span class="line">      <span class="string">"fall"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5,</span><br><span class="line">    <span class="string">"submit_date"</span> : <span class="string">"2016-01-02"</span>,</span><br><span class="line">    <span class="string">"school_location"</span> : &#123;</span><br><span class="line">      <span class="string">"lat"</span> : 36.0,</span><br><span class="line">      <span class="string">"lon"</span> : -120.0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 첫번째에 들어있는 document값을 정상적으로 조회한것을 확인할 수 있습니다.<br>여기서 주의할점은 pretty연산을 진행하기전에 앞에 \를 붙여실행해야 정상적으로 원하는 결과를 볼 수 있습니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elk-elraseutigseoci-bulk&quot;&gt;&lt;a href=&quot;#elk-elraseutigseoci-bulk&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#elk-엘
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="BULK" scheme="http://gwanhyeon.github.io/tags/bulk/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 Data CRUD</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-crud/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-crud/</id>
    <published>2021-02-19T04:18:53.000Z</published>
    <updated>2021-02-19T08:13:15.888Z</updated>
    
    <content type="html"><![CDATA[<h1 id="elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-delete"><a href="#elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-delete" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#엘라스틱서치-데이터-입력-조회-삭제-get-post-put-delete"></a> 엘라스틱서치 데이터 입력 조회 삭제 (GET, POST, PUT, DELETE)</h1><p>이번 시간에 살펴볼 내용은 엘라스틱서치에서 Data CRUD를 실습해보는 시간을 가져보겠습니다.</p><p>그전에 엘라스틱서피와 RDS와의 차이점을 살펴보겠습니다.</p><blockquote><p>ELASTIC SEARCH VS RDS</p></blockquote><table><thead><tr><th>Elastic Search</th><th style="text-align:center">RDS</th></tr></thead><tbody><tr><td><code>Index</code></td><td style="text-align:center">Database</td></tr><tr><td><code>Type</code></td><td style="text-align:center">Table</td></tr><tr><td><code>Document</code></td><td style="text-align:center">Row</td></tr><tr><td><code>Field</code></td><td style="text-align:center">Column</td></tr><tr><td><code>Mapping</code></td><td style="text-align:center">Schema</td></tr></tbody></table><p>엘라스틱서치에서는 REST API를 사용합니다.</p><table><thead><tr><th>Elastic Search</th><th style="text-align:center">RDS</th><th style="text-align:center">CRUD</th></tr></thead><tbody><tr><td><code>GET</code></td><td style="text-align:center">Select</td><td style="text-align:center">Read</td></tr><tr><td><code>PUT</code></td><td style="text-align:center">Update</td><td style="text-align:center">Update</td></tr><tr><td><code>POST</code></td><td style="text-align:center">Insert</td><td style="text-align:center">Create</td></tr><tr><td><code>DELETE</code></td><td style="text-align:center">Delete</td><td style="text-align:center">Delete</td></tr></tbody></table><p>다음과 같이 표를 보면 CRUD의 역할과 동일하게 처리한다라고 생각을 하면됩니다.</p><blockquote><p>GET 조회시</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"error"</span>:&#123;<span class="string">"root_cause"</span>:[&#123;<span class="string">"type"</span>:<span class="string">"index_not_found_exception"</span>,<span class="string">"reason"</span>:<span class="string">"no such index [classes]"</span>,<span class="string">"resource.type"</span>:<span class="string">"index_or_alias"</span>,<span class="string">"resource.id"</span>:<span class="string">"classes"</span>,<span class="string">"index_uuid"</span>:<span class="string">"_na_"</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;],<span class="string">"type"</span>:<span class="string">"index_not_found_exception"</span>,<span class="string">"reason"</span>:<span class="string">"no such index [classes]"</span>,<span class="string">"resource.type"</span>:<span class="string">"index_or_alias"</span>,<span class="string">"resource.id"</span>:<span class="string">"classes"</span>,<span class="string">"index_uuid"</span>:<span class="string">"_na_"</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;,<span class="string">"status"</span>:404&#125;%</span><br></pre></td></tr></table></figure><p>curl의 -XGET 옵션을 통하여 엘라스틱서치의 9200번 포트로 접근해줍니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes</span><br><span class="line"></span><br><span class="line">http://localhost:9200 - 엘라스틱서치 주소</span><br><span class="line">classes - Index</span><br></pre></td></tr></table></figure><blockquote><p>GET 조회시 깔끔하게 보고싶다면?</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classe\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"error"</span> : &#123;</span><br><span class="line">    <span class="string">"root_cause"</span> : [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"type"</span> : <span class="string">"index_not_found_exception"</span>,</span><br><span class="line">        <span class="string">"reason"</span> : <span class="string">"no such index [classe]"</span>,</span><br><span class="line">        <span class="string">"resource.type"</span> : <span class="string">"index_or_alias"</span>,</span><br><span class="line">        <span class="string">"resource.id"</span> : <span class="string">"classe"</span>,</span><br><span class="line">        <span class="string">"index_uuid"</span> : <span class="string">"_na_"</span>,</span><br><span class="line">        <span class="string">"index"</span> : <span class="string">"classe"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"type"</span> : <span class="string">"index_not_found_exception"</span>,</span><br><span class="line">    <span class="string">"reason"</span> : <span class="string">"no such index [classe]"</span>,</span><br><span class="line">    <span class="string">"resource.type"</span> : <span class="string">"index_or_alias"</span>,</span><br><span class="line">    <span class="string">"resource.id"</span> : <span class="string">"classe"</span>,</span><br><span class="line">    <span class="string">"index_uuid"</span> : <span class="string">"_na_"</span>,</span><br><span class="line">    <span class="string">"index"</span> : <span class="string">"classe"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"status"</span> : 404</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 JSON 포멧으로 깔끔하게 결과값들을 확인할 수 있습니다.</p><blockquote><p>인덱스 생성 PUT</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XPUT http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>,<span class="string">"shards_acknowledged"</span>:<span class="literal">true</span>,<span class="string">"index"</span>:<span class="string">"classes"</span>&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같이 인덱스가 정상적으로 생성된것을 확인할 수 있습니다.</p><blockquote><p>인덱스 삭제 DELETE</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XDELETE http://localhost:9200/classes</span><br><span class="line">&#123;<span class="string">"acknowledged"</span>:<span class="literal">true</span>&#125;%</span><br></pre></td></tr></table></figure><p>다음과 같이 정상적으로 엘라스틱서치의 인덱스값이 삭제된것을 확인할 수 있습니다.</p><blockquote><p>Document 생성하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type: application/json'</span> http://localhost:9200/classes/class/1/ -d <span class="string">'&#123;"title" : "Algorithm", "professor" : "John"&#125;'</span></span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:1,<span class="string">"result"</span>:<span class="string">"created"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:0,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p><strong>주의사항</strong><br>curl -XPOSt <a href="http://localhost:9200/classes/class/1/" target="_blank" rel="noopener">http://localhost:9200/classes/class/1/</a> -d ‘{“title” : “Algorithm”, “professor” : “John”}’ 입력 시 www-form-urlencoded is not supported status 406 에러가 발생합니다. 높은 버전에선 -H ‘Content-Type: application/json’ 를 사용해주어야합니다.</p><blockquote><p>참고링크<br><a href="https://www.elastic.co/kr/blog/strict-content-type-checking-for-elasticsearch-rest-requests" target="_blank" rel="noopener">https://www.elastic.co/kr/blog/strict-content-type-checking-for-elasticsearch-rest-requests</a></p></blockquote><p><strong>Starting from Elasticsearch 6.0, all REST requests that include a body must also provide the correct content-type for that body.</strong></p><blockquote><p>Document 생성된것 확인하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes/class/1/\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 1,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 0,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Algorithm"</span>,</span><br><span class="line">    <span class="string">"professor"</span> : <span class="string">"John"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>파일을 사용하여 Document 생성하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type: application/json'</span> http://localhost:9200/classes/class/1/ -d @class.json</span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:2,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:1,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p>@기호를 사용하여 class.json 파일안에 있는 json 데이터를 통하여 Document를 생성하였습니다. JSON내용은 다음과같습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [<span class="string">"spring"</span>, <span class="string">"fall"</span>],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Document 조회해보기</p></blockquote><p>이제 정상적으로 파일에서 가져온 Document값을 조회해보도록 하겠습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes/class/1/\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 2,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 1,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Machine Learning"</span>,</span><br><span class="line">    <span class="string">"Professor"</span> : <span class="string">"Minsuk Heo"</span>,</span><br><span class="line">    <span class="string">"major"</span> : <span class="string">"Computer Science"</span>,</span><br><span class="line">    <span class="string">"semester"</span> : [</span><br><span class="line">      <span class="string">"spring"</span>,</span><br><span class="line">      <span class="string">"fall"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"student_count"</span> : 100,</span><br><span class="line">    <span class="string">"unit"</span> : 3,</span><br><span class="line">    <span class="string">"rating"</span> : 5</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이렇게 정상적으로 파일에 들어가있는 값들을 통하여 document로 정상적으로 구성되었습니다.</p><blockquote><p>Data Update</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST -H <span class="string">'Content-Type:application/json'</span> http://localhost:9200/classes/class/1/_update -d <span class="string">'</span></span><br><span class="line"><span class="string">&#123;"doc":&#123;"unit":1&#125;&#125;'</span></span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:4,<span class="string">"result"</span>:<span class="string">"noop"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:0,<span class="string">"successful"</span>:0,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:3,<span class="string">"_primary_term"</span>:1&#125;%</span><br></pre></td></tr></table></figure><p>_update를 뒤에 붙여주면서 진행을 하면 해당 unit값이 업데이트된것을 확인할 수 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 5,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 4,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Algorithm"</span>,</span><br><span class="line">    <span class="string">"professor"</span> : <span class="string">"John"</span>,</span><br><span class="line">    <span class="string">"unit"</span> : 2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>script를 이용하여 업데이트하기</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XPOST -H <span class="string">'Content-Type:application/json'</span> http://localhost:9200/classes/class/1/_update -d <span class="string">'</span></span><br><span class="line"><span class="string">quote&gt; &#123;"script":"ctx._source.unit += 5"&#125; '</span></span><br><span class="line">&#123;<span class="string">"_index"</span>:<span class="string">"classes"</span>,<span class="string">"_type"</span>:<span class="string">"class"</span>,<span class="string">"_id"</span>:<span class="string">"1"</span>,<span class="string">"_version"</span>:6,<span class="string">"result"</span>:<span class="string">"updated"</span>,<span class="string">"_shards"</span>:&#123;<span class="string">"total"</span>:2,<span class="string">"successful"</span>:1,<span class="string">"failed"</span>:0&#125;,<span class="string">"_seq_no"</span>:5,<span class="string">"_primary_term"</span>:1&#125;%</span><br><span class="line"> kgh  ~</span><br><span class="line"> </span><br><span class="line"><span class="variable">$curl</span> -XGET http://localhost:9200/classes/class/1\?pretty</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"_index"</span> : <span class="string">"classes"</span>,</span><br><span class="line">  <span class="string">"_type"</span> : <span class="string">"class"</span>,</span><br><span class="line">  <span class="string">"_id"</span> : <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"_version"</span> : 6,</span><br><span class="line">  <span class="string">"_seq_no"</span> : 5,</span><br><span class="line">  <span class="string">"_primary_term"</span> : 1,</span><br><span class="line">  <span class="string">"found"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"_source"</span> : &#123;</span><br><span class="line">    <span class="string">"title"</span> : <span class="string">"Algorithm"</span>,</span><br><span class="line">    <span class="string">"professor"</span> : <span class="string">"John"</span>,</span><br><span class="line">    <span class="string">"unit"</span> : 7</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>{“script”:“ctx._source.unit += 5”} 과 같이 script문을 사용하면 다음과같이 정상적으로 데이터가 업데이트를 쉽게 처리할 수 있습니다.</p><blockquote><p>Reference</p></blockquote><p><a href="https://github.com/minsuk-heo/BigData" target="_blank" rel="noopener">https://github.com/minsuk-heo/BigData</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-delete&quot;&gt;&lt;a href=&quot;#elraseutigseoci-deiteo-ibryeog-johoe-sagje-get-post-put-de
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
      <category term="CRUD" scheme="http://gwanhyeon.github.io/tags/crud/"/>
    
  </entry>
  
  <entry>
    <title>ELK 엘라스틱서치 정의 및 설치하기</title>
    <link href="http://gwanhyeon.github.io/ELK-20210219-elk-install/"/>
    <id>http://gwanhyeon.github.io/ELK-20210219-elk-install/</id>
    <published>2021-02-19T02:43:32.000Z</published>
    <updated>2021-02-19T04:42:14.020Z</updated>
    
    <content type="html"><![CDATA[<h1 id="homebrew"><a href="#homebrew" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#homebrew"></a> Homebrew</h1><p>Homebrew는 자유-오픈 소스 소프트웨어 패키지 관리 시스템의 하나로서 애플의 macOS 운영 체제의 소프트웨어 설치를 단순하게 만들어준다. 원래 맥스 호웰(Max Howell)이 개발한 이 패키지 관리자는 루비 온 웨일즈 공동체에서 인기를 얻었으며 확장성으로 호평을 받았습니다.홈브루는 쉬운 사용성, 명령 줄로의 통합이 가능하므로 이용이 권장됩니다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$/bin/bash -c <span class="string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"</span></span><br></pre></td></tr></table></figure><p>Homebrew를 이용하기 위해 설치를 진행해줍니다.</p><h1 id="elkran"><a href="#elkran" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#elk란"></a> ELK란?</h1><h2 id="elasticsearch"><a href="#elasticsearch" class="header-anchor">2.1. </a><a class="markdownIt-Anchor" href="#elasticsearch"></a> ElasticSearch</h2><ul><li>ElasticSearch는 Lucene 기반으로 개발한 분산 검색엔진으로, Logstash를 통해 수신된 데이터를 저장소에 저장하는 역할을 담당합니다.</li><li>데이터를 중심부에 저장하여 예상되는 항목을 검색하고 예상치 못한 항목을 찾아낼 수 있습니다.</li><li>정형, 비정형, 위치정보, 메트릭 등 원하는 방법으로 다양한 유형의 검색을 수행하고 결합할 수 있습니다.</li></ul><h2 id="logstash"><a href="#logstash" class="header-anchor">2.2. </a><a class="markdownIt-Anchor" href="#logstash"></a> Logstash</h2><ul><li>오픈소스 서버측 데이터 처리 파이프라인으로, 다양한 소스에서 동시에 데이터를 수집하고 변환하여 stash 보관소로 보내는 역할을 합니다.</li><li>수집할 로그를 선정해서, 지정된 대상 서버(ElasticSearch)에 인덱싱하여 전송하는 역할을 담당하는 소프트웨어입니다.</li></ul><h2 id="kibana"><a href="#kibana" class="header-anchor">2.3. </a><a class="markdownIt-Anchor" href="#kibana"></a> Kibana</h2><ul><li>데이터를 시각적으로 탐색하고 실시간으로 분석 할 수 있습니다.</li><li>시각화를 담당하는 HTML와 Javascript 엔진입니다.</li></ul><h1 id="elastic-seolcihagi"><a href="#elastic-seolcihagi" class="header-anchor">3. </a><a class="markdownIt-Anchor" href="#elastic-설치하기"></a> Elastic 설치하기</h1><blockquote><p>설치전 이슈</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$brew</span> tap elastic/tap</span><br><span class="line">Error:</span><br><span class="line">  homebrew-core is a shallow <span class="built_in">clone</span>.</span><br><span class="line">To `brew update`, first run:</span><br><span class="line">  git -C /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow</span><br><span class="line">This restriction has been made on GitHub<span class="string">'s request because updating shallow</span></span><br><span class="line"><span class="string">clones is an extremely expensive operation due to the tree layout and traffic of</span></span><br><span class="line"><span class="string">Homebrew/homebrew-core and Homebrew/homebrew-cask. We don'</span>t <span class="keyword">do</span> this <span class="keyword">for</span> you</span><br><span class="line">automatically to avoid repeatedly performing an expensive unshallow operation <span class="keyword">in</span></span><br><span class="line">CI systems (<span class="built_in">which</span> should instead be fixed to not use shallow clones). Sorry <span class="keyword">for</span></span><br><span class="line">the inconvenience!</span><br><span class="line">==&gt; Tapping elastic/tap</span><br><span class="line">Cloning into <span class="string">'/usr/local/Homebrew/Library/Taps/elastic/homebrew-tap'</span>...</span><br><span class="line">remote: Enumerating objects: 32, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (32/32), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (29/29), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 791 (delta 15), reused 8 (delta 3), pack-reused 759</span><br><span class="line">Receiving objects: 100% (791/791), 181.90 KiB | 432.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (601/601), <span class="keyword">done</span>.</span><br><span class="line">Tapped 17 formulae (44 files, 289.5KB).</span><br></pre></td></tr></table></figure><p>ELK를 설치하는데 있어서 해당오류가 발생하여 다음과 같이 해결을 진행하였습니다. 업데이트가 제대로 진행이 되지 않아 homebrew core를 업데이트를 진행하였습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$brew</span> update</span><br><span class="line">Error:</span><br><span class="line">  homebrew-core is a shallow <span class="built_in">clone</span>.</span><br><span class="line">To `brew update`, first run:</span><br><span class="line">  git -C /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow</span><br><span class="line">This restriction has been made on GitHub<span class="string">'s request because updating shallow</span></span><br><span class="line"><span class="string">clones is an extremely expensive operation due to the tree layout and traffic of</span></span><br><span class="line"><span class="string">Homebrew/homebrew-core and Homebrew/homebrew-cask. We don'</span>t <span class="keyword">do</span> this <span class="keyword">for</span> you</span><br><span class="line">automatically to avoid repeatedly performing an expensive unshallow operation <span class="keyword">in</span></span><br><span class="line">CI systems (<span class="built_in">which</span> should instead be fixed to not use shallow clones). Sorry <span class="keyword">for</span></span><br></pre></td></tr></table></figure><p>Homebrew를 업데이트를 진행하려고하였지만, 역시나 같은오류가 발생하여 Stackoverflow의 힘을 빌리게 되었습니다.<br><a href="https://stackoverflow.com/questions/65160625/cant-update-or-upgrade-homebrew" target="_blank" rel="noopener">https://stackoverflow.com/questions/65160625/cant-update-or-upgrade-homebrew</a></p><blockquote><p>homebrew core update</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew/</span><br><span class="line">rm -rf homebrew-core</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Homebrew/homebrew-core.git</span><br></pre></td></tr></table></figure><p>다음과 같은 명령어로 현재 Homebrew 라이브러리안에 있는 탭볼륨의 코어를 삭제후 다시 설치를 진행하였습니다.</p><blockquote><p>Elastic 설치하기</p></blockquote><p>이제 본격적으로 ELK설치를 진행하겠습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew/</span><br><span class="line">rm -rf homebrew-core</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Homebrew/homebrew-core.git</span><br><span class="line">Cloning into <span class="string">'homebrew-core'</span>...</span><br><span class="line">remote: Enumerating objects: 34, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (34/34), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (24/24), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 910921 (delta 19), reused 19 (delta 10), pack-reused 910887</span><br><span class="line">Receiving objects: 100% (910921/910921), 364.35 MiB | 8.72 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (620824/620824), <span class="keyword">done</span>.</span><br><span class="line">Updating files: 100% (5773/5773), <span class="keyword">done</span>.</span><br><span class="line"> kgh  /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew   stable</span><br><span class="line"><span class="variable">$brew</span> tap elastic/tap</span><br><span class="line">Updating Homebrew...</span><br><span class="line">To restore the stashed changes to /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/adoptopenjdk/homebrew-openjdk run:</span><br><span class="line">  <span class="string">'cd /usr/local/Homebrew/Library/Taps/adoptopenjdk/homebrew-openjdk &amp;&amp; git stash pop'</span></span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 3 taps (homebrew/cask, homebrew/services and adoptopenjdk/openjdk).</span><br><span class="line">==&gt; New Casks</span><br><span class="line">accordance                             forticlient-vpn                        mubu                                   spotter</span><br><span class="line">aldente                                fspy                                   munkiadmin                             start</span><br><span class="line">astah-uml                              gather                                 opgg                                   stringz</span><br><span class="line">atemosc                                gdat                                   oss-browser                            textbuddy</span><br><span class="line">audiogridder-plugin                    google-drive                           parsify                                the-unofficial-homestuck-collection</span><br><span class="line">audiogridder-server                    grid                                   pathephone                             twobird</span><br><span class="line">bleunlock                              helo                                   pibar                                  ultdata</span><br><span class="line">brewlet                                imdone                                 pokemon-trading-card-game-online       unclack</span><br><span class="line">cakebrewjs                             imobie-m1-app-checker                  pragli                                 vine-server</span><br><span class="line">cinco                                  intellidock                            prezi-video                            vofa-plus</span><br><span class="line">colorwell                              kieler                                 ptpwebcam                              webull</span><br><span class="line">curseforge                             kiwi-for-gmail                         ray                                    wolfram-engine</span><br><span class="line">deadbeef                               lightform                              raycast                                xcodes</span><br><span class="line">decloner                               lightkey                               sengi                                  xournal-plus-plus</span><br><span class="line">deskreen                               little-navmap                          signet                                 yesplaymusic</span><br><span class="line">digital                                macfuse                                sitesucker-pro                         zy-player</span><br><span class="line">duckstation                            mathinspector                          slippi-dolphin</span><br><span class="line">f-bar                                  melonds                                space-saver</span><br><span class="line">fawkes                                 miniforge                              spaceman</span><br><span class="line">==&gt; Updated Casks</span><br><span class="line">Updated 1352 casks.</span><br><span class="line">==&gt; Deleted Casks</span><br><span class="line">archi                     clashxr                   facebook-ios-sdk          jeromelebel-mongohub      racket-cs                 tagalicious</span><br><span class="line">arrayfire                 disablemonitor            google-hangouts           oni                       ringtones                 teamspeak-client</span><br><span class="line">barxtemp                  evom                      irip                      project-slippi-dolphin    ripit                     yyets</span><br></pre></td></tr></table></figure><p>Homebrew 코어를 업데이트를 진행한 후 <code>$brew tap elastic/tap</code> 과 같은 명령어로 볼륨 설치를 완료하게 되었습니다.<br>그리고 이제 elastic을 설치해보겠습니다</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">brew install elasticsearch-full</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">Updated 2 formulae.</span><br><span class="line"></span><br><span class="line">Warning: elasticsearch has been deprecated because it is switching to an incompatible license!</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/elasticsearch-7.10.2.cat</span><br><span class="line">==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/6bb47c36590116e78d</span><br><span class="line"><span class="comment">#=#=#                                                                        ##O#- #                                                                      ##O=#  #                                                                                                                                                0.                                                                           0.                                                                           0.                                                                           0.                                                                           0.                                                                           0.                                                                           1.#                                                                          1.#                                                                          1.#                                                                          2.##                                                                         3.###                                                                        4.###                                                                        5.####                                                                       6.#####                                                                      7.######                                                                     8.#######                                                                   11.########                                                                  12.#########                                                                 13.##########                                                                15.###########                                                               16.############                                                              17.##############                                                            19.###############                                                           21.################                                                          22.#################                                                         24.##################                                                        25.###################                                                       27.####################                                                      29.#####################                                                     30.#######################                                                   32.########################                                                  34.#########################                                                 35.##########################                                                36.###########################                                               38.############################                                              40.#############################                                             41.##############################                                            42.################################                                          44.#################################                                         46.##################################                                        47.##################################                                        48.####################################                                      51.#####################################                                     52.#####################################                                     52.######################################                                    53.########################################                                  56.########################################                                  56.#########################################                                 57.##########################################                                59.############################################                              61.#############################################                             63.##############################################                            64.###############################################                           65.################################################                          66.#################################################                         68.##################################################                        69.##################################################                        70.###################################################                       71.####################################################                      73.####################################################                      73.#####################################################                     74.#######################################################                   76.########################################################                  78.########################################################                  78.##########################################################                81.###########################################################               82.############################################################              84.#############################################################             86.###############################################################           87.################################################################          88.#################################################################         90.##################################################################        92.####################################################################      94.#####################################################################     96.#####################################################################     97.#######################################################################   98.######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring elasticsearch-7.10.2.catalina.bottle.tar.gz</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/elasticsearch/7.10.2/bin/elasticsearch-keystore create</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Data:    /usr/<span class="built_in">local</span>/var/lib/elasticsearch/</span><br><span class="line">Logs:    /usr/<span class="built_in">local</span>/var/<span class="built_in">log</span>/elasticsearch/elasticsearch_kgh.log</span><br><span class="line">Plugins: /usr/<span class="built_in">local</span>/var/elasticsearch/plugins/</span><br><span class="line">Config:  /usr/<span class="built_in">local</span>/etc/elasticsearch/</span><br><span class="line"></span><br><span class="line">To have launchd start elasticsearch now and restart at login:</span><br><span class="line"> brew services start elasticsearch</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">'t want/need a background service you can just run:</span></span><br><span class="line"><span class="string"> elasticsearch</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">🍺  /usr/local/Cellar/elasticsearch/7.10.2: 156 files, 113.5MB</span></span><br></pre></td></tr></table></figure><h1 id="kibana-seolcihagi"><a href="#kibana-seolcihagi" class="header-anchor">4. </a><a class="markdownIt-Anchor" href="#kibana-설치하기"></a> Kibana 설치하기</h1><p>다음과 같은 명령어로 Kibana설치를 진행합니다</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">brew install elastic/tap/kibana(full을 사용하지않으면 최신화적인 elasticsearch와의 버전문제가 생길 가능성이 있습니다.) 사용 X</span><br><span class="line"></span><br><span class="line">brew install elastic/tap/kibana-full(사용O)</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">Updated 2 formulae.</span><br><span class="line"></span><br><span class="line">==&gt; Installing kibana-full from elastic/tap</span><br><span class="line">==&gt; Downloading https://artifacts.elastic.co/downloads/kibana/kibana-7.11.1-darwin-x86_64.tar.gz?tap=elastic/homebrew-tap</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Caveats</span><br><span class="line">Config: /usr/<span class="built_in">local</span>/etc/kibana/</span><br><span class="line">If you wish to preserve your plugins upon upgrade, make a copy of</span><br><span class="line">/usr/<span class="built_in">local</span>/opt/kibana-full/plugins before upgrading, and copy it into the</span><br><span class="line">new keg location after upgrading.</span><br><span class="line"></span><br><span class="line">To have launchd start elastic/tap/kibana-full now and restart at login:</span><br><span class="line">  brew services start elastic/tap/kibana-full</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">'t want/need a background service you can just run:</span></span><br><span class="line"><span class="string">  kibana</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">🍺  /usr/local/Cellar/kibana-full/7.11.1: 47,465 files, 655.5MB, built in 2 minutes 10 seconds</span></span><br><span class="line"><span class="string">==&gt; `brew cleanup` has not been run in 30 days, running now...</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/bdw-gc--8.0.4_1.catalina.bottle.1.tar.gz... (513KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/certbot--1.10.1.catalina.bottle.tar.gz... (7.2MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/dialog--1.3-20201126.catalina.bottle.tar.gz... (330.7KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/emacs--27.1.catalina.bottle.tar.gz... (44.3MB)</span></span><br><span class="line"><span class="string">Removing: /usr/local/Cellar/gdbm/1.18.1... (20 files, 591.2KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/gnu-getopt--2.36.1.catalina.bottle.tar.gz... (56.2KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/go--1.15.6.catalina.bottle.tar.gz... (153.9MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/groonga--10.1.0.catalina.bottle.tar.gz... (8MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/guile--3.0.4.catalina.bottle.2.tar.gz... (11.5MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/mariadb--10.5.8.catalina.bottle.2.tar.gz... (50.6MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/nettle--3.6.catalina.bottle.tar.gz... (866.6KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/nghttp2--1.42.0_1.catalina.bottle.tar.gz... (971.0KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/node--15.5.0.catalina.bottle.tar.gz... (15.1MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/openjdk--15.0.1.catalina.bottle.tar.gz... (190.9MB)</span></span><br><span class="line"><span class="string">Removing: /usr/local/Cellar/pkg-config/0.29.2... (11 files, 627.2KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/python@3.9--setuptools--51.0.0.zip... (2.0MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/python@3.9--pip--20.3.1.tar.gz... (1.5MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/python@3.9--wheel--0.36.1.tar.gz... (62.7KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/redis--6.0.9.catalina.bottle.tar.gz... (1.8MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/sphinx-doc--3.4.1.catalina.bottle.tar.gz... (15.1MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Caches/Homebrew/unbound--1.13.0.catalina.bottle.tar.gz... (2.7MB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/pkg-config... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/tree... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libtool... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/jansson... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/gmp... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/msgpack... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/augeas... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libidn2... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/nghttp2... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/go... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/nettle... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/mariadb... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/gdbm... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/gnu-getopt... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libunistring... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/jemalloc... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/bdw-gc... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/maven... (101B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/icu4c... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/certbot... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/readline... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/sqlite... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/c-ares... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/yarn... (100B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/nvm... (99B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/emacs... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/dialog... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/openjdk... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/git-flow... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/gettext... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/git-flow-avh... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/sphinx-doc... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libtasn1... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libevent... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/openssl@1.1... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/cask... (100B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/node... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/unbound... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/zsh... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/groonga... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/guile... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/p11-kit... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libev... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/protobuf... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/libffi... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/python@3.9... (2 files, 754.7KB)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/ethereum... (64B)</span></span><br><span class="line"><span class="string">Removing: /Users/kgh/Library/Logs/Homebrew/gnutls... (64B)</span></span><br><span class="line"><span class="string">Pruned 2 symbolic links and 3 directories from /usr/local</span></span><br></pre></td></tr></table></figure><h1 id="elasticsearch-silhaenghagi"><a href="#elasticsearch-silhaenghagi" class="header-anchor">5. </a><a class="markdownIt-Anchor" href="#elasticsearch-실행하기"></a> Elasticsearch 실행하기</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">elasticsearch</span><br><span class="line">warning: no-jdk distributions that <span class="keyword">do</span> not bundle a JDK are deprecated and will be removed <span class="keyword">in</span> a future release</span><br><span class="line">warning: no-jdk distributions that <span class="keyword">do</span> not bundle a JDK are deprecated and will be removed <span class="keyword">in</span> a future release</span><br><span class="line">[2021-02-19T12:05:59,584][INFO ][o.e.n.Node               ] [kgh-2.local] version[7.10.2-SNAPSHOT], pid[94450], build[oss/tar/unknown/2021-01-16T01:34:41.142971Z], OS[Mac OS X/10.15.5/x86_64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/15.0.1/15.0.1+9]</span><br><span class="line">[2021-02-19T12:05:59,590][INFO ][o.e.n.Node               ] [kgh-2.local] JVM home [/usr/<span class="built_in">local</span>/Cellar/openjdk/15.0.1/libexec/openjdk.jdk/Contents/Home]</span><br><span class="line">[2021-02-19T12:05:59,598][INFO ][o.e.n.Node               ] [kgh-2.local] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=<span class="literal">true</span>, -Dfile.encoding=UTF-8, -Djna.nosys=<span class="literal">true</span>, -XX:-OmitStackTraceInFastThrow, -XX:+ShowCodeDetailsInExceptionMessages, -Dio.netty.noUnsafe=<span class="literal">true</span>, -Dio.netty.noKeySetOptimization=<span class="literal">true</span>, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=<span class="literal">false</span>, -Dlog4j2.disable.jmx=<span class="literal">true</span>, -Djava.locale.providers=SPI,COMPAT, -Xms1g, -Xmx1g, -XX:+UseG1GC, -XX:G1ReservePercent=25, -XX:InitiatingHeapOccupancyPercent=30, -Djava.io.tmpdir=/var/folders/fy/5zsq88p55dx45pk4gmpltmmr0000gp/T/elasticsearch-9946170376789376085, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=/usr/<span class="built_in">local</span>/var/<span class="built_in">log</span>/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/usr/<span class="built_in">local</span>/Cellar/elasticsearch/7.10.2/libexec, -Des.path.conf=/usr/<span class="built_in">local</span>/etc/elasticsearch, -Des.distribution.flavor=oss, -Des.distribution.type=tar, -Des.bundled_jdk=<span class="literal">false</span>]</span><br><span class="line">[2021-02-19T12:05:59,599][WARN ][o.e.n.Node               ] [kgh-2.local] version [7.10.2-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable <span class="keyword">for</span> production</span><br><span class="line">[2021-02-19T12:06:00,853][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [aggs-matrix-stats]</span><br><span class="line">[2021-02-19T12:06:00,855][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [analysis-common]</span><br><span class="line">[2021-02-19T12:06:00,856][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [geo]</span><br><span class="line">[2021-02-19T12:06:00,857][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [ingest-common]</span><br><span class="line">[2021-02-19T12:06:00,858][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [ingest-geoip]</span><br><span class="line">[2021-02-19T12:06:00,859][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [ingest-user-agent]</span><br><span class="line">[2021-02-19T12:06:00,859][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [kibana]</span><br><span class="line">[2021-02-19T12:06:00,860][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [lang-expression]</span><br><span class="line">[2021-02-19T12:06:00,861][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [lang-mustache]</span><br><span class="line">[2021-02-19T12:06:00,861][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [lang-painless]</span><br><span class="line">[2021-02-19T12:06:00,862][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [mapper-extras]</span><br><span class="line">[2021-02-19T12:06:00,863][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [parent-join]</span><br><span class="line">[2021-02-19T12:06:00,864][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [percolator]</span><br><span class="line">[2021-02-19T12:06:00,864][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [rank-eval]</span><br><span class="line">[2021-02-19T12:06:00,865][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [reindex]</span><br><span class="line">[2021-02-19T12:06:00,865][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [repository-url]</span><br><span class="line">[2021-02-19T12:06:00,866][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [<span class="built_in">test</span>-delayed-aggs]</span><br><span class="line">[2021-02-19T12:06:00,867][INFO ][o.e.p.PluginsService     ] [kgh-2.local] loaded module [transport-netty4]</span><br><span class="line">[2021-02-19T12:06:00,868][INFO ][o.e.p.PluginsService     ] [kgh-2.local] no plugins loaded</span><br><span class="line">[2021-02-19T12:06:00,920][INFO ][o.e.e.NodeEnvironment    ] [kgh-2.local] using [1] data paths, mounts [[/System/Volumes/Data (/dev/disk1s1)]], net usable_space [39.2gb], net total_space [233.5gb], types [apfs]</span><br><span class="line">[2021-02-19T12:06:00,921][INFO ][o.e.e.NodeEnvironment    ] [kgh-2.local] heap size [1gb], compressed ordinary object pointers [<span class="literal">true</span>]</span><br><span class="line">[2021-02-19T12:06:01,012][INFO ][o.e.n.Node               ] [kgh-2.local] node name [kgh-2.local], node ID [_FYb0BAnQFyCJd4z4-M3Jw], cluster name [elasticsearch_brew], roles [master, remote_cluster_client, data, ingest]</span><br><span class="line">[2021-02-19T12:06:05,212][INFO ][o.e.t.NettyAllocator     ] [kgh-2.local] creating NettyAllocator with the following configs: [name=unpooled, suggested_max_allocation_size=256kb, factors=&#123;es.unsafe.use_unpooled_allocator=null, g1gc_enabled=<span class="literal">true</span>, g1gc_region_size=1mb, heap_size=1gb&#125;]</span><br><span class="line">[2021-02-19T12:06:05,377][INFO ][o.e.d.DiscoveryModule    ] [kgh-2.local] using discovery <span class="built_in">type</span> [zen] and seed hosts providers [settings]</span><br><span class="line">[2021-02-19T12:06:05,870][WARN ][o.e.g.DanglingIndicesState] [kgh-2.local] gateway.auto_import_dangling_indices is disabled, dangling indices will not be automatically detected or imported and must be managed manually</span><br><span class="line">[2021-02-19T12:06:06,195][INFO ][o.e.n.Node               ] [kgh-2.local] initialized</span><br><span class="line">[2021-02-19T12:06:06,196][INFO ][o.e.n.Node               ] [kgh-2.local] starting ...</span><br><span class="line">[2021-02-19T12:06:06,446][INFO ][o.e.t.TransportService   ] [kgh-2.local] publish_address &#123;127.0.0.1:9300&#125;, bound_addresses &#123;[::1]:9300&#125;, &#123;127.0.0.1:9300&#125;</span><br><span class="line">[2021-02-19T12:06:06,883][WARN ][o.e.b.BootstrapChecks    ] [kgh-2.local] the default discovery settings are unsuitable <span class="keyword">for</span> production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</span><br><span class="line">[2021-02-19T12:06:06,944][INFO ][o.e.c.c.ClusterBootstrapService] [kgh-2.local] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered</span><br><span class="line">[2021-02-19T12:06:09,949][INFO ][o.e.c.c.Coordinator      ] [kgh-2.local] setting initial configuration to VotingConfiguration&#123;_FYb0BAnQFyCJd4z4-M3Jw&#125;</span><br><span class="line">[2021-02-19T12:06:10,258][INFO ][o.e.c.s.MasterService    ] [kgh-2.local] elected-as-master ([1] nodes joined)[&#123;kgh-2.local&#125;&#123;_FYb0BAnQFyCJd4z4-M3Jw&#125;&#123;XfIeFRDrTIqm91ZOBkXD1Q&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;dimr&#125; elect leader, _BECOME_MASTER_TASK_, _FINISH_ELECTION_], term: 1, version: 1, delta: master node changed &#123;previous [], current [&#123;kgh-2.local&#125;&#123;_FYb0BAnQFyCJd4z4-M3Jw&#125;&#123;XfIeFRDrTIqm91ZOBkXD1Q&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;dimr&#125;]&#125;</span><br><span class="line">[2021-02-19T12:06:10,362][INFO ][o.e.c.c.CoordinationState] [kgh-2.local] cluster UUID <span class="built_in">set</span> to [opZ_8jGaS-yI2qclxNlqhg]</span><br><span class="line">[2021-02-19T12:06:10,433][INFO ][o.e.c.s.ClusterApplierService] [kgh-2.local] master node changed &#123;previous [], current [&#123;kgh-2.local&#125;&#123;_FYb0BAnQFyCJd4z4-M3Jw&#125;&#123;XfIeFRDrTIqm91ZOBkXD1Q&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;dimr&#125;]&#125;, term: 1, version: 1, reason: Publication&#123;term=1, version=1&#125;</span><br><span class="line">[2021-02-19T12:06:10,487][INFO ][o.e.h.AbstractHttpServerTransport] [kgh-2.local] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;[::1]:9200&#125;, &#123;127.0.0.1:9200&#125;</span><br><span class="line">[2021-02-19T12:06:10,488][INFO ][o.e.n.Node               ] [kgh-2.local] started</span><br><span class="line">[2021-02-19T12:06:10,547][INFO ][o.e.g.GatewayService     ] [kgh-2.local] recovered [0] indices into cluster_state</span><br></pre></td></tr></table></figure><p>다음과 같이 <code>elasticsearch</code> 명령어로 Elasticsearch가 실행된것을 알 수 있습니다. 이제 publish_address인 127.0.0.1:9200 경로로 웹브라우저 상에서 접근을 하게 되면 다음과 같은 메시지를 얻을 수 있습니다.  아니면 아래와 같은 방식으로 curl -XGET 방식으로 직접터미널에서 확인해보는 방식이 있습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$curl</span> -XGET localhost:9200</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"kgh-2.local"</span>,</span><br><span class="line">  <span class="string">"cluster_name"</span> : <span class="string">"elasticsearch_brew"</span>,</span><br><span class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"opZ_8jGaS-yI2qclxNlqhg"</span>,</span><br><span class="line">  <span class="string">"version"</span> : &#123;</span><br><span class="line">    <span class="string">"number"</span> : <span class="string">"7.10.2-SNAPSHOT"</span>,</span><br><span class="line">    <span class="string">"build_flavor"</span> : <span class="string">"oss"</span>,</span><br><span class="line">    <span class="string">"build_type"</span> : <span class="string">"tar"</span>,</span><br><span class="line">    <span class="string">"build_hash"</span> : <span class="string">"unknown"</span>,</span><br><span class="line">    <span class="string">"build_date"</span> : <span class="string">"2021-01-16T01:34:41.142971Z"</span>,</span><br><span class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">true</span>,</span><br><span class="line">    <span class="string">"lucene_version"</span> : <span class="string">"8.7.0"</span>,</span><br><span class="line">    <span class="string">"minimum_wire_compatibility_version"</span> : <span class="string">"6.8.0"</span>,</span><br><span class="line">    <span class="string">"minimum_index_compatibility_version"</span> : <span class="string">"6.0.0-beta1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "name" : "kgh-2.local",</span><br><span class="line">  "cluster_name" : "elasticsearch_brew",</span><br><span class="line">  "cluster_uuid" : </span><br><span class="line">  "version" : &#123;</span><br><span class="line">    "number" : "7.10.2-SNAPSHOT",</span><br><span class="line">    "build_flavor" : "oss",</span><br><span class="line">    "build_type" : "tar",</span><br><span class="line">    "build_hash" : "unknown",</span><br><span class="line">    "build_date" : "2021-01-16T01:34:41.142971Z",</span><br><span class="line">    "build_snapshot" : true,</span><br><span class="line">    "lucene_version" : "8.7.0",</span><br><span class="line">    "minimum_wire_compatibility_version" : "6.8.0",</span><br><span class="line">    "minimum_index_compatibility_version" : "6.0.0-beta1"</span><br><span class="line">  &#125;,</span><br><span class="line">  "tagline" : "You Know, for Search"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="kibana-silhaenghagi"><a href="#kibana-silhaenghagi" class="header-anchor">6. </a><a class="markdownIt-Anchor" href="#kibana-실행하기"></a> Kibana 실행하기</h1><p>Terminal상에서 다음과 같은 명령어로 Kibana를 실행하여줍니다. 실행시 오류가 발생하여 보니 elasticsearch와의 버전문제가 발생하였습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$kibana</span></span><br><span class="line">  <span class="built_in">log</span>   [12:12:04.315] [info][plugins-service] Plugin <span class="string">"visTypeXy"</span> is disabled.</span><br><span class="line">  <span class="built_in">log</span>   [12:12:04.439] [warning][config][deprecation] Environment variable <span class="string">"DATA_PATH"</span> will be removed.  It has been replaced with kibana.yml setting <span class="string">"path.data"</span></span><br><span class="line">  <span class="built_in">log</span>   [12:12:04.440] [warning][config][deprecation] Config key [monitoring.cluster_alerts.email_notifications.email_address] will be required <span class="keyword">for</span> email notifications to work <span class="keyword">in</span> 8.0.<span class="string">"</span></span><br><span class="line"><span class="string">  log   [12:12:04.754] [info][plugins-system] Setting up [101] plugins: [taskManager,licensing,globalSearch,globalSearchProviders,code,usageCollection,xpackLegacy,telemetryCollectionManager,telemetry,telemetryCollectionXpack,kibanaUsageCollection,securityOss,newsfeed,mapsLegacy,kibanaLegacy,translations,bfetch,share,legacyExport,embeddable,uiActionsEnhanced,expressions,data,home,observability,console,consoleExtensions,apmOss,searchprofiler,painlessLab,grokdebugger,management,indexPatternManagement,advancedSettings,fileUpload,savedObjects,visualizations,visTypeTable,visTypeMarkdown,visTypeVega,visTypeTimelion,features,licenseManagement,dataEnhanced,tileMap,mapsOss,regionMap,lensOss,inputControlVis,graph,timelion,dashboard,dashboardEnhanced,visualize,charts,visTypeVislib,visTypeTimeseries,visTypeTimeseriesEnhanced,visTypeMetric,visTypeTagcloud,watcher,canvas,discover,discoverEnhanced,savedObjectsManagement,spaces,security,reporting,dashboardMode,savedObjectsTagging,lens,maps,lists,encryptedSavedObjects,cloud,upgradeAssistant,snapshotRestore,fleet,indexManagement,remoteClusters,crossClusterReplication,rollup,indexLifecycleManagement,enterpriseSearch,ml,beatsManagement,transform,ingestPipelines,eventLog,actions,alerts,triggersActionsUi,stackAlerts,securitySolution,case,infra,monitoring,logstash,apm,uptime,esUiShared]</span></span><br><span class="line"><span class="string">  log   [12:12:04.758] [info][plugins][taskManager] TaskManager is identified by the Kibana UUID: 75bba0a2-d69a-4376-b540-34d359878b57</span></span><br><span class="line"><span class="string">  log   [12:12:05.076] [warning][config][plugins][security] Generating a random key for xpack.security.encryptionKey. To prevent sessions from being invalidated on restart, please set xpack.security.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:12:05.077] [warning][config][plugins][security] Session cookies will be transmitted over insecure connections. This is not recommended.</span></span><br><span class="line"><span class="string">  log   [12:12:05.120] [warning][config][plugins][reporting] Generating a random key for xpack.reporting.encryptionKey. To prevent sessions from being invalidated on restart, please set xpack.reporting.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:12:05.121] [info][config][plugins][reporting] Chromium sandbox provides an additional layer of protection, and is supported for Darwin OS. Automatically enabling Chromium sandbox.</span></span><br><span class="line"><span class="string">  log   [12:12:05.154] [warning][config][encryptedSavedObjects][plugins] Generating a random key for xpack.encryptedSavedObjects.encryptionKey. To decrypt encrypted saved objects attributes after restart, please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:12:05.184] [warning][fleet][plugins] Fleet APIs are disabled because the Encrypted Saved Objects plugin uses an ephemeral encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:12:05.287] [warning][actions][actions][plugins] APIs are disabled because the Encrypted Saved Objects plugin uses an ephemeral encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:12:05.303] [warning][alerting][alerts][plugins][plugins] APIs are disabled because the Encrypted Saved Objects plugin uses an ephemeral encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:12:05.446] [info][monitoring][monitoring][plugins] config sourced from: production cluster</span></span><br><span class="line"><span class="string">  log   [12:12:05.705] [info][savedobjects-service] Waiting until all Elasticsearch nodes are compatible with Kibana before starting saved objects migrations...</span></span><br><span class="line"><span class="string">  log   [12:12:05.790] [warning][licensing][plugins] License information could not be obtained from Elasticsearch due to [illegal_argument_exception] request [/_xpack] contains unrecognized parameter: [accept_enterprise] :: &#123;"</span>path<span class="string">":"</span>/_xpack?accept_enterprise=<span class="literal">true</span><span class="string">","</span>statusCode<span class="string">":400,"</span>response<span class="string">":"</span>&#123;\"error\":&#123;\"root_cause\":[&#123;\"<span class="built_in">type</span>\":\"illegal_argument_exception\",\"reason\":\"request [/_xpack] contains unrecognized parameter: [accept_enterprise]\"&#125;],\"<span class="built_in">type</span>\":\"illegal_argument_exception\",\"reason\":\"request [/_xpack] contains unrecognized parameter: [accept_enterprise]\"&#125;,\"status\":400&#125;<span class="string">"&#125; error</span></span><br><span class="line"><span class="string">  log   [12:12:05.794] [warning][monitoring][monitoring][plugins] X-Pack Monitoring Cluster Alerts will not be available: X-Pack plugin is not installed on the Elasticsearch cluster.</span></span><br><span class="line"><span class="string">  log   [12:12:05.900] [error][savedobjects-service] This version of Kibana (v7.11.1) is incompatible with the following Elasticsearch nodes in your cluster: v7.10.2 @ 127.0.0.1:9200 (127.0.0.1)</span></span><br><span class="line"><span class="string">  log   [12:12:35.729] [warning][licensing][plugins] License information could not be obtained from Elasticsearch due to [illegal_argument_exception] request [/_xpack] contains unrecognized parameter: [accept_enterprise] :: &#123;"</span>path<span class="string">":"</span>/_xpack?accept_enterprise=<span class="literal">true</span><span class="string">","</span>statusCode<span class="string">":400,"</span>response<span class="string">":"</span>&#123;\"error\":&#123;\"root_cause\":[&#123;\"<span class="built_in">type</span>\":\"illegal_argument_exception\",\"reason\":\"request [/_xpack] contains unrecognized parameter: [accept_enterprise]\"&#125;],\"<span class="built_in">type</span>\":\"illegal_argument_exception\",\"reason\":\"request [/_xpack] contains unrecognized parameter: [accept_enterprise]\"&#125;,\"status\":400&#125;<span class="string">"&#125; error</span></span><br><span class="line"><span class="string">^C  log   [12:12:42.392] [info][plugins-system] Stopping all plugins.</span></span><br><span class="line"><span class="string">  log   [12:12:42.395] [info][kibana-monitoring][monitoring][monitoring][plugins] Monitoring stats collection is stopped</span></span><br><span class="line"><span class="string">^C  log   [12:12:42.624] [info][plugins-system] Stopping all plugins.</span></span><br><span class="line"><span class="string">  log   [12:12:42.628] [info][savedobjects-service] Starting saved objects migrations</span></span><br><span class="line"><span class="string">  log   [12:12:42.631] [warning][savedobjects-service] Unable to connect to Elasticsearch. Error: Given the configuration, the ConnectionPool was not able to find a usable Connection for this request.</span></span><br><span class="line"><span class="string">  log   [12:12:42.632] [warning][savedobjects-service] Unable to connect to Elasticsearch. Error: Given the configuration, the ConnectionPool was not able to find a usable Connection for this request.</span></span><br><span class="line"><span class="string">^C%</span></span><br><span class="line"><span class="string"> kgh  ~</span></span><br><span class="line"><span class="string"><span class="variable">$kibana</span> --version</span></span><br><span class="line"><span class="string">7.11.1</span></span><br></pre></td></tr></table></figure><p>이렇게 해당오류가 발생한 이유를 보니 버전을 full 버전(즉, 최신버전으로)다운받지 않아서 이러한 호환성문제가 생기게 되었습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install elasticsearch(최신 버전 호환 X)</span><br><span class="line">brew install elasticsearch-full(최신 버전 호환 O)</span><br></pre></td></tr></table></figure><p>따라서 다음과 같은방법으로 elasticsearch버전을 unlink해주고 새롭게 다시 설치를 진행하였습니다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$brew</span> uninstall elasticsearch</span><br><span class="line"><span class="variable">$rm</span> -rf /usr/<span class="built_in">local</span>/etc/elasticsearch</span><br><span class="line"><span class="variable">$rm</span> -rf /usr/<span class="built_in">local</span>/var/lib/elasticsearch</span><br><span class="line"><span class="variable">$brew</span> unlink elasticsearch</span><br><span class="line">Unlinking /usr/<span class="built_in">local</span>/Cellar/elasticsearch/7.10.2... 4 symlinks removed.</span><br><span class="line"></span><br><span class="line">brew install elasticsearch-full</span><br><span class="line">==&gt; Installing elasticsearch-full from elastic/tap</span><br><span class="line">==&gt; Downloading https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-darwin-x86_64.tar.gz?tap=elastic/homebrew-tap</span><br><span class="line">Already downloaded: /Users/kgh/Library/Caches/Homebrew/downloads/4c04176d64640de7c66954a6e6c536ac2ff45a342828e8af1d13fc8bf0ed47c8--elasticsearch-7.11.1-darwin-x86_64.tar.gz</span><br><span class="line">Warning: Tried to install empty array to /usr/<span class="built_in">local</span>/etc/elasticsearch/jvm.options.d</span><br><span class="line">==&gt; codesign -f -s - /usr/<span class="built_in">local</span>/Cellar/elasticsearch-full/7.11.1/libexec/modules/x-pack-ml/platform/darwin-x86_64/controller.app --deep</span><br><span class="line">==&gt; find /usr/<span class="built_in">local</span>/Cellar/elasticsearch-full/7.11.1/libexec/jdk.app/Contents/Home/bin -<span class="built_in">type</span> f -<span class="built_in">exec</span> codesign -f -s - &#123;&#125; ;</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Data:    /usr/<span class="built_in">local</span>/var/lib/elasticsearch/elasticsearch_kgh/</span><br><span class="line">Logs:    /usr/<span class="built_in">local</span>/var/<span class="built_in">log</span>/elasticsearch/elasticsearch_kgh.log</span><br><span class="line">Plugins: /usr/<span class="built_in">local</span>/var/elasticsearch/plugins/</span><br><span class="line">Config:  /usr/<span class="built_in">local</span>/etc/elasticsearch/</span><br><span class="line"></span><br><span class="line">To have launchd start elastic/tap/elasticsearch-full now and restart at login:</span><br><span class="line"> brew services start elastic/tap/elasticsearch-full</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">'t want/need a background service you can just run:</span></span><br><span class="line"><span class="string"> elasticsearch</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">🍺  /usr/local/Cellar/elasticsearch-full/7.11.1: 933 files, 488.2MB, built in 19 seconds</span></span><br></pre></td></tr></table></figure><p>다음과 같이 버전을 새로 설치하여 호환성을 맞추어주었습니다.</p><p><strong>반드시 $elasticsearch가 구동되어있다면 재시작을 진행해야 정상적으로 수행이됩니다</strong></p><blockquote><p>kibana 다시 재가동하기</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">kibana</span><br><span class="line">  log   [<span class="number">12</span>:<span class="number">50</span>:<span class="number">29.122</span>] [info][plugins-service] Plugin <span class="string">"visTypeXy"</span> is disabled.</span><br><span class="line">  log   [<span class="number">12</span>:<span class="number">50</span>:<span class="number">29.357</span>] [warning][config][deprecation] Environment variable <span class="string">"DATA_PATH"</span> will be removed.  It has been replaced with kibana.yml setting <span class="string">"path.data"</span></span><br><span class="line">  log   [<span class="number">12</span>:<span class="number">50</span>:<span class="number">29.359</span>] [warning][config][deprecation] Config key [monitoring.cluster_alerts.email_notifications.email_address] will be required <span class="keyword">for</span> email notifications to work in <span class="number">8.0</span>.<span class="string">"</span></span><br><span class="line"><span class="string">  log   [12:50:29.635] [info][plugins-system] Setting up [101] plugins: [taskManager,licensing,globalSearch,globalSearchProviders,code,usageCollection,xpackLegacy,telemetryCollectionManager,telemetry,telemetryCollectionXpack,kibanaUsageCollection,securityOss,newsfeed,mapsLegacy,kibanaLegacy,translations,share,legacyExport,embeddable,uiActionsEnhanced,expressions,charts,esUiShared,bfetch,data,home,observability,console,consoleExtensions,apmOss,searchprofiler,painlessLab,grokdebugger,management,indexPatternManagement,advancedSettings,fileUpload,savedObjects,visualizations,visTypeVislib,visTypeTimeseries,visTypeTimeseriesEnhanced,visTypeVega,visTypeTable,visTypeTimelion,features,licenseManagement,dataEnhanced,watcher,canvas,visTypeTagcloud,visTypeMetric,visTypeMarkdown,tileMap,regionMap,lensOss,mapsOss,inputControlVis,graph,timelion,dashboard,dashboardEnhanced,visualize,discover,discoverEnhanced,savedObjectsManagement,spaces,security,savedObjectsTagging,maps,lens,reporting,lists,encryptedSavedObjects,dashboardMode,cloud,upgradeAssistant,snapshotRestore,fleet,indexManagement,remoteClusters,crossClusterReplication,rollup,indexLifecycleManagement,enterpriseSearch,ml,beatsManagement,transform,ingestPipelines,eventLog,actions,alerts,triggersActionsUi,stackAlerts,securitySolution,case,infra,monitoring,logstash,apm,uptime]</span></span><br><span class="line"><span class="string">  log   [12:50:29.639] [info][plugins][taskManager] TaskManager is identified by the Kibana UUID: 75bba0a2-d69a-4376-b540-34d359878b57</span></span><br><span class="line"><span class="string">  log   [12:50:30.070] [warning][config][plugins][security] Generating a random key for xpack.security.encryptionKey. To prevent sessions from being invalidated on restart, please set xpack.security.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:50:30.070] [warning][config][plugins][security] Session cookies will be transmitted over insecure connections. This is not recommended.</span></span><br><span class="line"><span class="string">  log   [12:50:30.180] [warning][config][plugins][reporting] Generating a random key for xpack.reporting.encryptionKey. To prevent sessions from being invalidated on restart, please set xpack.reporting.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:50:30.183] [info][config][plugins][reporting] Chromium sandbox provides an additional layer of protection, and is supported for Darwin OS. Automatically enabling Chromium sandbox.</span></span><br><span class="line"><span class="string">  log   [12:50:30.192] [warning][config][encryptedSavedObjects][plugins] Generating a random key for xpack.encryptedSavedObjects.encryptionKey. To decrypt encrypted saved objects attributes after restart, please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:50:30.265] [warning][fleet][plugins] Fleet APIs are disabled because the Encrypted Saved Objects plugin uses an ephemeral encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:50:30.393] [warning][actions][actions][plugins] APIs are disabled because the Encrypted Saved Objects plugin uses an ephemeral encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:50:30.414] [warning][alerting][alerts][plugins][plugins] APIs are disabled because the Encrypted Saved Objects plugin uses an ephemeral encryption key. Please set xpack.encryptedSavedObjects.encryptionKey in the kibana.yml or use the bin/kibana-encryption-keys command.</span></span><br><span class="line"><span class="string">  log   [12:50:30.540] [info][monitoring][monitoring][plugins] config sourced from: production cluster</span></span><br><span class="line"><span class="string">  log   [12:50:30.816] [info][savedobjects-service] Waiting until all Elasticsearch nodes are compatible with Kibana before starting saved objects migrations...</span></span><br><span class="line"><span class="string">  log   [12:50:31.036] [info][savedobjects-service] Starting saved objects migrations</span></span><br><span class="line"><span class="string">  log   [12:50:31.095] [info][savedobjects-service] Creating index .kibana_task_manager_1.</span></span><br><span class="line"><span class="string">  log   [12:50:31.100] [info][savedobjects-service] Creating index .kibana_1.</span></span><br><span class="line"><span class="string">  log   [12:50:31.929] [info][savedobjects-service] Pointing alias .kibana_task_manager to .kibana_task_manager_1.</span></span><br><span class="line"><span class="string">  log   [12:50:32.013] [info][savedobjects-service] Pointing alias .kibana to .kibana_1.</span></span><br><span class="line"><span class="string">  log   [12:50:32.134] [info][savedobjects-service] Finished in 1039ms.</span></span><br><span class="line"><span class="string">  log   [12:50:32.188] [info][savedobjects-service] Finished in 1101ms.</span></span><br><span class="line"><span class="string">  log   [12:50:32.225] [info][plugins-system] Starting [101] plugins: [taskManager,licensing,globalSearch,globalSearchProviders,code,usageCollection,xpackLegacy,telemetryCollectionManager,telemetry,telemetryCollectionXpack,kibanaUsageCollection,securityOss,newsfeed,mapsLegacy,kibanaLegacy,translations,share,legacyExport,embeddable,uiActionsEnhanced,expressions,charts,esUiShared,bfetch,data,home,observability,console,consoleExtensions,apmOss,searchprofiler,painlessLab,grokdebugger,management,indexPatternManagement,advancedSettings,fileUpload,savedObjects,visualizations,visTypeVislib,visTypeTimeseries,visTypeTimeseriesEnhanced,visTypeVega,visTypeTable,visTypeTimelion,features,licenseManagement,dataEnhanced,watcher,canvas,visTypeTagcloud,visTypeMetric,visTypeMarkdown,tileMap,regionMap,lensOss,mapsOss,inputControlVis,graph,timelion,dashboard,dashboardEnhanced,visualize,discover,discoverEnhanced,savedObjectsManagement,spaces,security,savedObjectsTagging,maps,lens,reporting,lists,encryptedSavedObjects,dashboardMode,cloud,upgradeAssistant,snapshotRestore,fleet,indexManagement,remoteClusters,crossClusterReplication,rollup,indexLifecycleManagement,enterpriseSearch,ml,beatsManagement,transform,ingestPipelines,eventLog,actions,alerts,triggersActionsUi,stackAlerts,securitySolution,case,infra,monitoring,logstash,apm,uptime]</span></span><br><span class="line"><span class="string">  log   [12:50:35.778] [info][listening] Server running at http://localhost:5601</span></span><br><span class="line"><span class="string">  log   [12:50:36.837] [info][server][Kibana][http] http server running at http://localhost:5601</span></span><br><span class="line"><span class="string">  log   [12:50:36.851] [info][plugins][watcher] Your basic license does not support watcher. Please upgrade your license.</span></span><br><span class="line"><span class="string">  log   [12:50:36.865] [info][crossClusterReplication][plugins] Your basic license does not support crossClusterReplication. Please upgrade your license.</span></span><br><span class="line"><span class="string">  log   [12:50:36.876] [info][kibana-monitoring][monitoring][monitoring][plugins] Starting monitoring stats collection</span></span><br><span class="line"><span class="string">  log   [12:50:39.515] [info][plugins][reporting] Downloading https://storage.googleapis.com/headless_shell/chromium-ef768c9-darwin_x64.zip to /usr/local/Cellar/kibana-full/7.11.1/libexec/.chromium/chromium-ef768c9-darwin_x64.zip</span></span><br><span class="line"><span class="string">  log   [12:50:39.517] [info][plugins][reporting] Downloading https://storage.googleapis.com/headless_shell/chromium-ef768c9-linux_x64.zip to /usr/local/Cellar/kibana-full/7.11.1/libexec/.chromium/chromium-ef768c9-linux_x64.zip</span></span><br><span class="line"><span class="string">  log   [12:50:39.518] [info][plugins][reporting] Downloading https://storage.googleapis.com/headless_shell/chromium-ef768c9-linux_arm64.zip to /usr/local/Cellar/kibana-full/7.11.1/libexec/.chromium/chromium-ef768c9-linux_arm64.zip</span></span><br><span class="line"><span class="string">  log   [12:50:39.519] [info][plugins][reporting] Downloading https://storage.googleapis.com/headless_shell/chromium-ef768c9-windows_x64.zip to /usr/local/Cellar/kibana-full/7.11.1/libexec/.chromium/chromium-ef768c9-windows_x64.zip</span></span><br><span class="line"><span class="string">  log   [12:51:03.269] [info][plugins][reporting] Downloaded https://storage.googleapis.com/headless_shell/chromium-ef768c9-linux_x64.zip</span></span><br><span class="line"><span class="string">  log   [12:51:05.427] [info][plugins][reporting] Downloaded https://storage.googleapis.com/headless_shell/chromium-ef768c9-darwin_x64.zip</span></span><br><span class="line"><span class="string">  log   [12:51:06.716] [info][plugins][reporting] Downloaded https://storage.googleapis.com/headless_shell/chromium-ef768c9-windows_x64.zip</span></span><br><span class="line"><span class="string">  log   [12:51:07.962] [info][plugins][reporting] Downloaded https://storage.googleapis.com/headless_shell/chromium-ef768c9-linux_arm64.zip</span></span><br><span class="line"><span class="string">  log   [12:51:07.969] [info][plugins][reporting] Extracting [/usr/local/Cellar/kibana-full/7.11.1/libexec/.chromium/chromium-ef768c9-darwin_x64.zip] to [/usr/local/Cellar/kibana-full/7.11.1/libexec/x-pack/plugins/reporting/chromium/headless_shell-darwin_x64/headless_shell]</span></span><br><span class="line"><span class="string">  log   [12:51:07.995] [warning][environment] Detected an unhandled Promise rejection.</span></span><br><span class="line"><span class="string">Error: Cannot delete files/directories outside the current working directory. Can be overridden with the `force` option.</span></span><br></pre></td></tr></table></figure><blockquote><p>버전별 설치하기</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -O https:<span class="comment">//artifacts.elastic.co/downloads/kibana/kibana-7.10.2-darwin-x86_64.tar.gz</span></span><br><span class="line">tar -xzf kibana-<span class="number">7.10</span><span class="number">.2</span>-darwin-x86_64.tar.gz</span><br></pre></td></tr></table></figure><p><a href="https://smartstuartkim.wordpress.com/2019/09/23/install-elastic-stack-on-mac-session-1-openjdk-elastic-search-kibana-logstash-beat/" target="_blank" rel="noopener">https://smartstuartkim.wordpress.com/2019/09/23/install-elastic-stack-on-mac-session-1-openjdk-elastic-search-kibana-logstash-beat/</a></p><h1 id="kibana-gadong"><a href="#kibana-gadong" class="header-anchor">7. </a><a class="markdownIt-Anchor" href="#kibana-가동"></a> kibana 가동</h1><p>이제 다음과 같이 구동이되면 정상적으로 실행이 된것을 알 수 있습니다.</p><p><img src="https://www.google.com/imgres?imgurl=https%3A%2F%2Fpostfiles.pstatic.net%2FMjAxOTAzMjVfMjY2%2FMDAxNTUzNDQyNTg1OTM3.l64ILf-mwez4KBUG6Ot0imzxgb-W2Yp809zxaMOhdS4g.UNmLbyYSOgSh6oBMyn6G1SaRmwbEE-pS1NUnceix3V4g.PNG.hihello0426%2F%25EC%258A%25A4%25ED%2581%25AC%25EB%25A6%25B0%25EC%2583%25B7_2019-03-25_%25EC%2598%25A4%25EC%25A0%2584_12.49.36.png%3Ftype%3Dw773&amp;imgrefurl=https%3A%2F%2Fblog.naver.com%2FPostView.nhn%3FblogId%3Dhihello0426%26logNo%3D221496517750%26parentCategoryNo%3D50%26categoryNo%3D52%26viewDate%3D%26isShowPopularPosts%3Dfalse%26from%3DpostView&amp;tbnid=MOPqztZr9yT6YM&amp;vet=12ahUKEwig9JDBhvXuAhVIbJQKHUS8BBcQMygCegUIARCYAQ..i&amp;docid=jWTS9_Epc_LcSM&amp;w=773&amp;h=454&amp;q=Kibana%20welcome&amp;ved=2ahUKEwig9JDBhvXuAhVIbJQKHUS8BBcQMygCegUIARCYAQ" alt="Kibana"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;homebrew&quot;&gt;&lt;a href=&quot;#homebrew&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#homebrew&quot;&gt;&lt;/a&gt; Homebrew&lt;/h1&gt;
&lt;p&gt;Homeb
      
    
    </summary>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/categories/elk/"/>
    
    
      <category term="ELK" scheme="http://gwanhyeon.github.io/tags/elk/"/>
    
  </entry>
  
  <entry>
    <title>Java MultiThread(멀티스레드) 고려사항</title>
    <link href="http://gwanhyeon.github.io/Java-20210218-multi-thread-java/"/>
    <id>http://gwanhyeon.github.io/Java-20210218-multi-thread-java/</id>
    <published>2021-02-18T07:22:53.000Z</published>
    <updated>2021-02-18T07:40:04.743Z</updated>
    
    <content type="html"><![CDATA[<h1 id="multi-thread-goryeosahang"><a href="#multi-thread-goryeosahang" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#multi-thread-고려사항"></a> Multi Thread 고려사항</h1><p>MultiThread를 구현하는 대표적인방법은 두가지가 있습니다.</p><ul><li>java.lang.Thread 클래스를 상속받아서 구현하는 방법</li><li>java.lang.Runnable 인터페이스를 구현해서 개발하는 방법</li></ul><blockquote><p>Field Member</p></blockquote><p>필드의 의미는 클래스에 변수를 정의하는 공간을 의미합니다. 하지만, 객체가 여러 스레드가 접근하는 싱글톤 객체라면 filed 상태값을 갖고 있지않고, 모든 변수를 parameter -&gt; return 형식으로 구성해야합니다.</p><blockquote><p>Synchronized</p></blockquote><p>동기화 처리시에 synchronized 키워드를 사용하여 스레드 간섭을 피하고 이 키워드 기반으로 구현된 Collection도 존재합니다.<br>List 대신 Vector, Map 대신 HashTable을 사용할 수 있지만, API 및 성능상 문제를 가지고 있습니다.</p><p>성능문제를 어떻게 해결 할 수 있을까요?</p><p>Collections 라는 utll 클래스에서 제공되는 static 메소드를 통해 해결이 가능합니다.</p><p>다음과 같이 변경하여 해결이 가능합니다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Collections.synchronizedList()</span><br><span class="line">Collections.synchronizedSet()</span><br><span class="line">Collections.synchronizedMap()</span><br></pre></td></tr></table></figure><p>더 나아가서, JDK 1.7부터는 ConcurrentHashMap 구현체를 제공하여 Collections utill을 사용하는것보다 보다 좋은 성능을 내는 자료구조를 제공합니다.</p><ul><li>ConcurrentHashMap 예시</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    private final ConcurrentHashMap&lt;String, Movie.MovieDto&gt; movieMapCache = new ConcurrentHashMap&lt;&gt;(16);</span></span><br><span class="line"><span class="comment">    private volatile Long cacheLoadTime = 0L;</span></span><br><span class="line"><span class="comment">    private volatile Long cacheTimeLimit = 600 * 1000L;</span></span><br><span class="line"><span class="comment">     * 영화 캐시 조회</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Movie.MovieDto&gt; findCacheByQuery(<span class="keyword">final</span> String query) &#123;</span><br><span class="line">        <span class="keyword">long</span> nowTime = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">if</span>(CollectionUtils.isEmpty(movieMapCache) || nowTime - cacheLoadTime &gt; cacheTimeLimit)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (movieMapCache)&#123;</span><br><span class="line">                ResponseEntity&lt;Movie.MovieDto&gt; exchange = getExchange(query);</span><br><span class="line">                List&lt;Movie.Item&gt; ResponseMovieList = Movie.Item.of(exchange);</span><br><span class="line">                MovieGroup items = <span class="keyword">new</span> MovieGroup(ResponseMovieList);</span><br><span class="line">                List&lt;Movie.Item&gt; listOrderRating = items.getListOrderRating();</span><br><span class="line">                Movie.MovieDto resultList = Movie.MovieDto.of(exchange, listOrderRating);</span><br><span class="line">                cacheInitialized();</span><br><span class="line">                cacheLoadTime = nowTime;</span><br><span class="line">                movieMapCache.put(query, resultList);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> movieMapCache;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>ThreadLocal</p></blockquote><p>일반 변수의 수명은 특정 코드 블록(예, 메서드 범위, for 블록 범위 등) 범위 내에서만 유효합니다. 하지만 <code>ThreadLocal</code>을 사용하면 반면에 ThreadLocal을 이용하면 쓰레드 영역에 변수를 설정할 수 있기 때문에, 특정 쓰레드가 실행하는 모든 코드에서 그 쓰레드에 설정된 변수 값을 사용할 수 있습니다. Thread사이에 간섭을 없애야하는 데이터에 사용이 되야하는데 멀티 스레드 환경에서는 클래스의필드에 멤버를 추가할 수 없고 매개변수로 넘겨받아야합니다. 결론적으로 스레드 내부의 싱글톤을 사용하기위해 사용합니다.</p><ul><li>ThreadLocal 주의 사항</li></ul><ol><li>ThreadLocal 객체를 생성한다.</li><li>ThreadLocal.set() 메서드를 이용해서 현재 쓰레드의 로컬 변수에 값을 저장한다.</li><li>ThreadLocal.get() 메서드를 이용해서 현재 쓰레드의 로컬 변수 값을 읽어온다.</li><li>ThreadLocal.remove() 메서드를 이용해서 현재 쓰레드의 로컬 변수 값을 삭제한다.</li></ol><p>쓰레드 풀 환경에서 ThreadLocal을 사용하는 경우 ThreadLocal 변수에 보관된 데이터의 사용이 끝나면 반드시 해당 데이터를 삭제해야하며 그렇지 않을 경우 재사용되는 쓰레드가 올바르지 않은 데이터를 참조할 수 있는 가능성이 있습니다.</p><ul><li>ThreadLocal 사용</li></ul><ol><li>사용자 인증정보 전파 - Spring Security에서는 ThreadLocal을 이용해서 사용자 인증 정보를 전달합니다.</li><li>트랜잭션 컨텍스트 - 트랜잭션 매니저는 트랜잭션 컨텍스트를 전파하는 데 ThreadLocal을 사용합니다.</li><li>세션 정보</li><li>Thread Safe한 데이터 저장</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;multi-thread-goryeosahang&quot;&gt;&lt;a href=&quot;#multi-thread-goryeosahang&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#mul
      
    
    </summary>
    
    
      <category term="Java" scheme="http://gwanhyeon.github.io/categories/java/"/>
    
    
      <category term="Java" scheme="http://gwanhyeon.github.io/tags/java/"/>
    
      <category term="thread" scheme="http://gwanhyeon.github.io/tags/thread/"/>
    
  </entry>
  
  <entry>
    <title>Java Wrapper Class, Auto Boxing</title>
    <link href="http://gwanhyeon.github.io/Java-20210218-wrapper-class-auto-boxing-java/"/>
    <id>http://gwanhyeon.github.io/Java-20210218-wrapper-class-auto-boxing-java/</id>
    <published>2021-02-18T06:57:33.000Z</published>
    <updated>2021-02-18T07:17:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="wrapper-class"><a href="#wrapper-class" class="header-anchor">1. </a><a class="markdownIt-Anchor" href="#wrapper-class"></a> Wrapper Class</h1><p>Wrapper Class란?</p><p>자바의 자료형은 크게 <code>기본 타입(primitive type)과 참조 타입(reference type)</code>으로 나누어집니다.<br>대표적으로 기본 타입은 char, int, float, double, boolean 등이 있고 참조 타입은 class, interface 등이 있는데 프로그래밍을 하다 보면 기본 타입의 데이터를 객체로 표현해야 하는 경우가 종종 있습니다. 이럴 때에 기본 자료타입(primitive type)을 객체로 다루기 위해서 사용하는 클래스들을 래퍼 클래스(wrapper class)라고 합니다. Wrapper Class는 java.lang 패키지에 포함되어 있습니다.</p><p>컬렉션에서 제네릭을 사용하기 위해서는 Wrapper class를 사용해줘야하는데 null 값을 반환해야만 하는 경우에는 return type 을 Wrapper class 로 지정하여 null을 반환하도록 할 수 있습니다. 아니면 옵셔널을 붙여서 반환하는 방식도 있습니다.</p><p>Primitive data type 인 경우에는 “==” 비교가 가능하지만  Wrapper class 인 경우에는 .intValue() 메소드를 통해 해당 Wrapper class 의 값을 직접 가져와서 비교해야합니다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WrapperClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Integer phoneNumber = <span class="keyword">new</span> Integer(<span class="string">"123456789"</span>);</span><br><span class="line">        <span class="keyword">int</span> num = phoneNumber.intValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>위와 같은 예제는 기본 타입의 값을 포장 객체로 만드는 과정을 <code>박싱</code>이라고 하고 반대로 포장객체에서 기본타입의 값을 얻어내는 과정을 <code>언박싱</code>이라고 합니다.</p><h1 id="autoboxing"><a href="#autoboxing" class="header-anchor">2. </a><a class="markdownIt-Anchor" href="#autoboxing"></a> AutoBoxing</h1><p>기본타입 값을 직접 박싱, 언박싱하지 않아도 자동적으로 박싱과 언박싱이 일어나는 경우가 있습니다. 자동 박싱의 포장 클래스 타입에 기본값이 대입될 경우에 발생합니다. AutoBoxing은 JDK 1.5 부터는 AutoBoxing과 AutoUnBoxing을 제공합니다. 이 기능은 각 Wrapper class 에 상응하는 Primitive data type 일 경우에만 가능합니다.</p><blockquote><p>예제 1</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WrapperClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 자동 박싱</span></span><br><span class="line">        Integer phoneNumber = <span class="number">123456789</span>;</span><br><span class="line">        <span class="comment">// 자동 언박싱</span></span><br><span class="line">        <span class="keyword">int</span> num = phoneNumber;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>다음과 같이 Integer Wrapper Class에서 Primitive data type으로 AutoBoxing이 일어나게 됩니다.</p><blockquote><p>예제 2</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; arrList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">arrList.add(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>다음과 같은 예제는 Integer라는 Wrapper class 로 설정한 collection 에 데이터를 add 할 때 Integer 객체로 감싸서 넣지 않습니다.<br>즉, 자바 내부에서 AutoBoxing 해주기 때문입니다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;wrapper-class&quot;&gt;&lt;a href=&quot;#wrapper-class&quot; class=&quot;header-anchor&quot;&gt;1. &lt;/a&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#wrapper-class&quot;&gt;&lt;/a&gt; Wrapper
      
    
    </summary>
    
    
      <category term="Java" scheme="http://gwanhyeon.github.io/categories/java/"/>
    
    
      <category term="WrapperClass" scheme="http://gwanhyeon.github.io/tags/wrapperclass/"/>
    
      <category term="AutoBoxing" scheme="http://gwanhyeon.github.io/tags/autoboxing/"/>
    
  </entry>
  
</feed>
